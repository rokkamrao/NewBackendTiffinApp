2025-11-22 11:15:57,954 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 11:15:58,050 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 32668 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 11:15:58,051 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 11:15:58,054 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-22 11:15:58,848 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 11:15:58,915 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 53 ms. Found 3 JPA repository interfaces.
2025-11-22 11:15:59,919 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 11:15:59,934 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 11:15:59,937 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 11:15:59,938 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 11:16:00,030 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 11:16:00,031 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1895 ms
2025-11-22 11:16:00,237 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 11:16:00,318 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 11:16:00,393 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 11:16:00,825 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 11:16:00,865 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 11:16:01,110 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-22 11:16:01,112 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 11:16:01,145 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 11:16:01,167 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 11:16:02,459 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 11:16:02,478 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 11:16:02,484 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 11:16:02,485 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 11:16:02,485 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 11:16:02,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 11:16:02,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 11:16:02,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 11:16:02,493 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 11:16:02,504 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 11:16:02,507 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 11:16:02,508 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 11:16:02,509 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 11:16:02,511 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 11:16:02,514 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 11:16:02,518 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 11:16:02,519 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 11:16:02,520 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 11:16:02,521 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 11:16:02,521 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 11:16:02,522 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 11:16:02,538 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 11:16:02,541 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 11:16:02,545 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 11:16:02,549 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 11:16:02,550 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 11:16:02,551 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 11:16:02,553 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 11:16:02,559 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 11:16:02,863 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 11:16:05,202 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 11:16:05,202 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 11:16:05,269 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 11:16:05,606 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-22 11:16:05,686 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-22 11:16:05,718 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-22 11:16:05,797 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:16:05,799 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:16:05,801 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:16:05,802 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:16:05,899 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-22 11:16:05,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-22 11:16:05,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-22 11:16:05,901 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-22 11:16:05,901 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-22 11:16:05,902 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-22 11:16:05,902 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-22 11:16:05,903 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-22 11:16:05,983 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-22 11:16:06,027 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-22 11:16:06,156 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 11:16:06,157 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 11:16:06,157 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 11:16:06,157 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@acdff3a]
2025-11-22 11:16:06,158 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@acdff3a]
2025-11-22 11:16:06,158 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@acdff3a]]
2025-11-22 11:16:06,159 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 11:16:06,159 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:16:06,159 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:16:06,159 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 11:16:06,197 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 11:16:06,205 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.944 seconds (process running for 9.476)
2025-11-22 11:16:06,320 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 11:16:06,358 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 11:16:06,390 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,414 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,417 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,418 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,421 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,422 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,424 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,425 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,427 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,429 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,431 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,433 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:06,434 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 11:16:06,436 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 11:16:06,437 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 11:16:06,820 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:07,126 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:07,418 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:07,725 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:08,034 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:08,346 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:08,660 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:16:08,663 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 11:16:08,663 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 11:16:08,664 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 11:16:08,664 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 11:16:08,665 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 11:16:08,665 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 11:16:08,665 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 11:16:08,665 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 11:16:08,665 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 11:17:06,353 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-22 11:20:42,061 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 11:20:42,339 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 11:20:42,369 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 11:20:42,372 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 11:20:42,373 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 11:20:42,377 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@acdff3a]]
2025-11-22 11:20:42,378 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@acdff3a]
2025-11-22 11:20:42,378 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@acdff3a]
2025-11-22 11:20:42,378 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 11:20:42,379 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:20:42,380 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:20:42,417 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 11:20:42,448 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 11:20:42,486 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 11:20:42,488 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 11:20:42,490 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 11:20:42,491 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 11:20:42,492 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 11:20:42,494 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 11:20:42,533 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 11:20:42,556 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 11:20:56,357 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 11:20:56,506 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 24268 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 11:20:56,506 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 11:20:56,507 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-22 11:20:57,089 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 11:20:57,145 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 3 JPA repository interfaces.
2025-11-22 11:20:57,833 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 11:20:57,846 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 11:20:57,849 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 11:20:57,849 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 11:20:57,917 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 11:20:57,917 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1343 ms
2025-11-22 11:20:58,040 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 11:20:58,109 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 11:20:58,145 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 11:20:58,398 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 11:20:58,424 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 11:20:58,597 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-22 11:20:58,599 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 11:20:58,626 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 11:20:58,647 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 11:20:59,562 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 11:20:59,576 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 11:20:59,580 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 11:20:59,581 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 11:20:59,582 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 11:20:59,582 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 11:20:59,582 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 11:20:59,582 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 11:20:59,588 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 11:20:59,600 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 11:20:59,603 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 11:20:59,605 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 11:20:59,607 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 11:20:59,608 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 11:20:59,611 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 11:20:59,615 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 11:20:59,617 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 11:20:59,618 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 11:20:59,618 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 11:20:59,619 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 11:20:59,620 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 11:20:59,635 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 11:20:59,637 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 11:20:59,640 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 11:20:59,642 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 11:20:59,644 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 11:20:59,646 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 11:20:59,647 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 11:20:59,652 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 11:20:59,851 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 11:21:01,640 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 11:21:01,640 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 11:21:01,700 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 11:21:01,925 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-22 11:21:02,006 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-22 11:21:02,039 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-22 11:21:02,114 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:21:02,116 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:21:02,118 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:21:02,119 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 11:21:02,209 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-22 11:21:02,210 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-22 11:21:02,210 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-22 11:21:02,210 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-22 11:21:02,212 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-22 11:21:02,213 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-22 11:21:02,213 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-22 11:21:02,213 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-22 11:21:02,285 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-22 11:21:02,327 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-22 11:21:02,444 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 11:21:02,444 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 11:21:02,444 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 11:21:02,444 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]
2025-11-22 11:21:02,444 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]
2025-11-22 11:21:02,445 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]]
2025-11-22 11:21:02,446 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 11:21:02,446 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:21:02,446 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:21:02,446 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 11:21:02,479 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 11:21:02,486 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.961 seconds (process running for 7.38)
2025-11-22 11:21:02,541 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 11:21:02,569 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 11:21:02,590 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,613 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,616 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,618 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,620 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,623 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,626 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,627 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,631 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,634 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,637 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,639 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:02,641 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 11:21:02,642 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 11:21:02,644 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 11:21:02,943 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:03,240 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:03,534 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:03,824 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:04,103 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:04,380 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:04,681 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 11:21:04,683 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 11:21:04,683 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 11:21:04,683 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 11:21:04,683 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 11:21:04,683 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 11:21:04,684 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 11:21:04,684 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 11:21:04,684 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 11:21:04,684 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 11:22:02,657 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-22 11:29:03,478 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 11:29:03,779 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 11:29:03,807 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 11:29:03,808 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 11:29:03,809 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 11:29:03,812 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]]
2025-11-22 11:29:03,812 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]
2025-11-22 11:29:03,812 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]
2025-11-22 11:29:03,812 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 11:29:03,813 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:29:03,813 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 11:29:03,838 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 11:29:03,867 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 11:29:03,906 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 11:29:03,907 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 11:29:03,908 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 11:29:03,910 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 11:29:03,911 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 11:29:03,911 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 11:29:03,946 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 11:29:03,973 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 12:12:50,228 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 12:12:50,269 WARN  [main] [trace=] [user=] o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/mr_te/.m2/repository/org/json/json/20180130/json-20180130.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/mr_te/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-11-22 12:12:50,323 INFO  [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - Starting AuthenticationServiceTest using Java 21.0.9 with PID 26712 (started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 12:12:50,324 DEBUG [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 12:12:50,325 INFO  [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - The following 1 profile is active: "test"
2025-11-22 12:12:50,435 DEBUG [main] [trace=] [user=] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@36d697ab
2025-11-22 12:12:51,423 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 12:12:51,497 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 3 JPA repository interfaces.
2025-11-22 12:12:52,763 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 12:12:52,893 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 12:12:52,953 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 12:12:53,517 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 12:12:53,586 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 12:12:54,076 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-22 12:12:54,081 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 12:12:54,142 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 12:12:54,181 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 12:12:55,984 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 12:12:56,014 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 12:12:56,021 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 12:12:56,021 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 12:12:56,021 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 12:12:56,021 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 12:12:56,022 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 12:12:56,022 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 12:12:56,032 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 12:12:56,050 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 12:12:56,053 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 12:12:56,054 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 12:12:56,057 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 12:12:56,058 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 12:12:56,061 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 12:12:56,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 12:12:56,072 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 12:12:56,073 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 12:12:56,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 12:12:56,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 12:12:56,075 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 12:12:56,101 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 12:12:56,103 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 12:12:56,113 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 12:12:56,115 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 12:12:56,116 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 12:12:56,119 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 12:12:56,120 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 12:12:56,129 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 12:12:56,622 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 12:12:58,611 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 12:12:59,043 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-22 12:12:59,187 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-22 12:12:59,299 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-22 12:12:59,413 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:12:59,414 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:12:59,417 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:12:59,419 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:12:59,576 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-22 12:12:59,577 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-22 12:12:59,577 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-22 12:12:59,577 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-22 12:12:59,578 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-22 12:12:59,578 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-22 12:12:59,578 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-22 12:12:59,578 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-22 12:12:59,795 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-22 12:12:59,877 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-22 12:13:00,085 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 12:13:00,086 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 12:13:00,086 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 12:13:00,086 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ab219ad]
2025-11-22 12:13:00,086 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ab219ad]
2025-11-22 12:13:00,086 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ab219ad]]
2025-11-22 12:13:00,087 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 12:13:00,087 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:13:00,088 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:13:00,095 INFO  [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - Started AuthenticationServiceTest in 10.755 seconds (process running for 13.416)
2025-11-22 12:13:00,198 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 12:13:00,246 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 12:13:00,280 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,312 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,315 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,318 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,321 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,322 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,324 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,327 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,329 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,331 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,334 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,335 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,336 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 12:13:00,338 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 12:13:00,339 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 12:13:00,601 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:00,843 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:01,082 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:01,318 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:01,550 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:01,782 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:02,016 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 12:13:02,017 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 12:13:02,453 INFO  [main] [trace=] [user=] c.t.a.service.AuthenticationService - Completing signup for phone: +919876543210
2025-11-22 12:13:02,487 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-22 12:13:02,504 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:13:02,616 INFO  [main] [trace=] [user=] c.t.a.service.AuthenticationService - Sending OTP to phone: +919876543210
2025-11-22 12:13:02,616 INFO  [main] [trace=] [user=] c.t.a.service.AuthenticationService - Generated OTP for +919876543210: 123456 (expires in 5 minutes)
2025-11-22 12:13:02,663 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@36d697ab, started on Sat Nov 22 12:12:50 IST 2025
2025-11-22 12:13:02,666 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 12:13:02,667 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 12:13:02,667 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 12:13:02,667 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ab219ad]]
2025-11-22 12:13:02,667 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ab219ad]
2025-11-22 12:13:02,667 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ab219ad]
2025-11-22 12:13:02,667 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 12:13:02,667 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:13:02,667 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:13:02,671 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 12:13:02,816 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 12:13:02,819 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 12:13:02,819 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 12:13:02,820 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 12:13:02,821 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 12:13:02,821 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 12:13:02,822 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 12:13:02,825 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 12:13:02,826 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 12:49:05,599 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 12:49:05,735 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication v0.0.1-SNAPSHOT using Java 21.0.8 with PID 30616 (D:\Food Delivery app\tiffin-api\target\tiffin-api-0.0.1-SNAPSHOT.jar started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 12:49:05,737 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 12:49:05,739 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "test"
2025-11-22 12:49:06,813 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 12:49:06,886 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 3 JPA repository interfaces.
2025-11-22 12:49:07,998 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 12:49:08,013 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 12:49:08,018 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 12:49:08,018 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 12:49:08,075 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 12:49:08,075 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2192 ms
2025-11-22 12:49:08,280 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 12:49:08,397 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 12:49:08,451 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 12:49:08,790 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 12:49:08,821 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 12:49:09,016 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-22 12:49:09,019 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 12:49:09,046 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 12:49:09,065 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 12:49:10,182 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 12:49:10,200 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 12:49:10,207 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 12:49:10,208 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 12:49:10,209 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 12:49:10,209 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 12:49:10,210 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 12:49:10,210 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 12:49:10,220 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 12:49:10,233 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 12:49:10,235 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 12:49:10,236 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 12:49:10,238 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 12:49:10,241 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 12:49:10,243 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 12:49:10,248 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 12:49:10,249 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 12:49:10,250 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 12:49:10,250 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 12:49:10,251 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 12:49:10,252 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 12:49:10,269 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 12:49:10,271 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 12:49:10,274 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 12:49:10,278 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 12:49:10,280 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 12:49:10,284 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 12:49:10,286 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 12:49:10,298 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 12:49:10,662 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 12:49:12,394 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 12:49:12,394 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 12:49:12,481 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 12:49:12,846 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-22 12:49:13,002 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-22 12:49:13,069 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-22 12:49:13,216 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:49:13,219 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:49:13,221 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:49:13,224 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 12:49:13,393 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-22 12:49:13,394 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-22 12:49:13,394 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-22 12:49:13,394 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-22 12:49:13,395 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-22 12:49:13,396 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-22 12:49:13,397 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-22 12:49:13,397 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-22 12:49:13,524 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-22 12:49:13,623 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-22 12:49:13,799 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 12:49:13,799 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 12:49:13,799 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 12:49:13,800 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ac1028]
2025-11-22 12:49:13,800 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ac1028]
2025-11-22 12:49:13,800 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ac1028]]
2025-11-22 12:49:13,801 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 12:49:13,802 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:49:13,802 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:49:13,802 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 12:49:13,834 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 12:49:13,854 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.907 seconds (process running for 9.52)
2025-11-22 12:49:13,917 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 12:49:13,950 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 12:49:13,986 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,012 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,015 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,017 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,021 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,024 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,028 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,031 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,035 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,039 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,042 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,045 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,048 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 12:49:14,051 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 12:49:14,054 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 12:49:14,336 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,587 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:14,827 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:15,068 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:15,308 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:15,547 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:15,785 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 12:49:15,787 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 12:49:15,788 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 12:49:15,788 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 12:49:15,788 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 12:49:15,788 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 12:49:15,788 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 12:49:15,788 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 12:49:15,789 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 12:49:15,789 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 12:50:13,949 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-22 12:52:23,435 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 12:52:23,646 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 12:52:23,672 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 12:52:23,675 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 12:52:23,676 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 12:52:23,678 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ac1028]]
2025-11-22 12:52:23,678 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ac1028]
2025-11-22 12:52:23,679 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ac1028]
2025-11-22 12:52:23,679 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 12:52:23,679 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:52:23,679 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 12:52:23,703 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 12:52:23,729 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 12:52:23,769 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 12:52:23,770 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 12:52:23,771 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 12:52:23,774 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 12:52:23,774 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 12:52:23,782 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 12:52:23,808 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 12:52:23,832 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 13:04:01,624 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 13:04:01,684 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 4904 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 13:04:01,685 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 13:04:01,685 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-22 13:04:02,287 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 13:04:02,369 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 3 JPA repository interfaces.
2025-11-22 13:04:03,053 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 13:04:03,073 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 13:04:03,078 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 13:04:03,078 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 13:04:03,193 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 13:04:03,195 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1467 ms
2025-11-22 13:04:03,331 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 13:04:03,404 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 13:04:03,440 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 13:04:03,672 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 13:04:03,698 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 13:04:03,855 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-22 13:04:03,857 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 13:04:03,879 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 13:04:03,899 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 13:04:04,805 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 13:04:04,819 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 13:04:04,823 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 13:04:04,824 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 13:04:04,824 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 13:04:04,824 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 13:04:04,825 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 13:04:04,825 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 13:04:04,830 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 13:04:04,844 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 13:04:04,847 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 13:04:04,849 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 13:04:04,850 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 13:04:04,852 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 13:04:04,855 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 13:04:04,859 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 13:04:04,861 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 13:04:04,861 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 13:04:04,862 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 13:04:04,863 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 13:04:04,863 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 13:04:04,878 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 13:04:04,881 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 13:04:04,883 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 13:04:04,884 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 13:04:04,887 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 13:04:04,888 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 13:04:04,889 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 13:04:04,894 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 13:04:05,166 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 13:04:06,921 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 13:04:06,921 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 13:04:06,979 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 13:04:07,275 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-22 13:04:07,368 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-22 13:04:07,404 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-22 13:04:07,491 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 13:04:07,493 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 13:04:07,495 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 13:04:07,496 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 13:04:07,594 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-22 13:04:07,595 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-22 13:04:07,595 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-22 13:04:07,595 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-22 13:04:07,595 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-22 13:04:07,596 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-22 13:04:07,597 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-22 13:04:07,597 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-22 13:04:07,671 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-22 13:04:07,714 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-22 13:04:07,843 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 13:04:07,844 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 13:04:07,845 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 13:04:07,845 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]
2025-11-22 13:04:07,845 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]
2025-11-22 13:04:07,845 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]]
2025-11-22 13:04:07,846 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 13:04:07,846 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 13:04:07,846 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 13:04:07,846 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 13:04:07,876 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 13:04:07,883 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.734 seconds (process running for 7.033)
2025-11-22 13:04:07,939 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 13:04:07,964 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 13:04:07,987 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,006 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,008 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,010 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,012 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,014 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,015 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,016 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,018 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,020 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,022 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,023 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,026 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 13:04:08,028 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 13:04:08,029 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 13:04:08,314 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,597 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:08,878 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:09,157 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:09,435 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:09,710 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:09,990 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 13:04:09,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 13:04:09,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 13:04:09,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 13:04:09,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 13:04:09,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 13:04:09,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 13:04:09,993 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 13:04:09,993 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 13:04:09,993 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 13:05:07,869 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-22 13:20:02,725 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 13:20:02,985 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 13:20:03,018 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-22 13:20:03,020 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-22 13:20:03,020 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 13:20:03,022 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]]
2025-11-22 13:20:03,022 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]
2025-11-22 13:20:03,022 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]
2025-11-22 13:20:03,023 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 13:20:03,023 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 13:20:03,023 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-22 13:20:03,045 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 13:20:03,075 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 13:20:03,104 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 13:20:03,106 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 13:20:03,107 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 13:20:03,107 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 13:20:03,109 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 13:20:03,110 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 13:20:03,145 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 13:20:03,167 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 14:58:26,985 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 14:58:27,046 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 18752 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 14:58:27,047 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 14:58:27,048 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 14:58:27,591 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 14:58:27,644 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 3 JPA repository interfaces.
2025-11-22 14:58:28,324 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 14:58:28,337 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 14:58:28,340 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 14:58:28,340 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 14:58:28,407 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 14:58:28,407 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1312 ms
2025-11-22 14:58:28,540 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 14:58:28,612 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 14:58:28,644 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 14:58:28,864 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 14:58:28,888 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 14:58:29,039 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 14:58:29,041 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 14:58:29,063 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 14:58:29,082 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 14:58:29,961 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 14:58:29,976 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 14:58:29,979 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 14:58:29,980 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 14:58:29,980 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 14:58:29,980 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 14:58:29,981 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 14:58:29,981 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 14:58:29,986 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 14:58:29,998 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 14:58:30,000 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 14:58:30,002 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 14:58:30,004 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 14:58:30,005 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 14:58:30,007 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 14:58:30,013 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 14:58:30,015 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 14:58:30,016 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 14:58:30,017 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 14:58:30,017 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 14:58:30,018 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 14:58:30,030 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 14:58:30,032 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 14:58:30,034 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 14:58:30,036 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 14:58:30,038 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 14:58:30,039 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 14:58:30,040 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 14:58:30,046 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 14:58:30,237 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 14:58:31,971 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 14:58:31,971 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 14:58:32,024 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 14:58:32,407 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 14:58:32,409 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 14:58:32,411 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 14:58:32,412 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 14:58:32,671 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 14:58:32,719 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 14:58:32,720 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36806af3]]
2025-11-22 14:58:32,721 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 14:58:32,721 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 14:58:32,753 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 14:58:32,759 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.37 seconds (process running for 6.705)
2025-11-22 14:58:32,811 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 14:58:32,839 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 14:58:32,862 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,880 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,883 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,884 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,886 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,887 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,889 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,891 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,892 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,894 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,896 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,897 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:32,899 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 14:58:32,901 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 14:58:32,901 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 14:58:33,196 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:33,483 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:33,775 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:34,084 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:34,386 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:34,686 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:34,990 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 14:58:34,992 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 14:59:32,772 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-22 15:06:36,395 INFO  [http-nio-8081-exec-4] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-22 15:06:36,500 INFO  [http-nio-8081-exec-4] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-22 15:06:36,840 INFO  [http-nio-8081-exec-4] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 334 ms
2025-11-22 15:09:48,668 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 15:09:48,819 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 15:09:48,839 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 15:09:48,843 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36806af3]]
2025-11-22 15:09:48,844 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 15:09:48,893 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:09:48,911 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:09:48,935 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:09:48,937 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:09:48,938 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:09:48,941 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:09:48,942 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:09:48,942 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:09:48,970 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 15:09:48,986 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 15:10:05,594 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 15:10:05,659 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 13244 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 15:10:05,660 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 15:10:05,660 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 15:10:06,496 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 15:10:06,564 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 55 ms. Found 3 JPA repository interfaces.
2025-11-22 15:10:07,555 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 15:10:07,572 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 15:10:07,576 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 15:10:07,576 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 15:10:08,002 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 15:10:08,003 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2285 ms
2025-11-22 15:10:08,229 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 15:10:08,358 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 15:10:08,433 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 15:10:08,833 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 15:10:08,912 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 15:10:09,335 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 15:10:09,337 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 15:10:09,375 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 15:10:09,404 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 15:10:11,803 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 15:10:11,837 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:10:11,848 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:10:11,849 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:10:11,850 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:10:11,850 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:10:11,851 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:10:11,851 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:10:11,863 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 15:10:11,887 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 15:10:11,891 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 15:10:11,893 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 15:10:11,896 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 15:10:11,899 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 15:10:11,904 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 15:10:11,915 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 15:10:11,919 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 15:10:11,921 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 15:10:11,924 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 15:10:11,926 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 15:10:11,929 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:10:11,967 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 15:10:11,970 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 15:10:11,980 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 15:10:11,983 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 15:10:11,986 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:10:11,990 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 15:10:11,995 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:10:12,009 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:10:12,385 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 15:10:15,426 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 15:10:15,427 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 15:10:15,514 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 15:10:16,261 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:10:16,264 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:10:16,266 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:10:16,268 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:10:16,737 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 15:10:16,806 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 15:10:16,807 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]]
2025-11-22 15:10:16,808 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 15:10:16,808 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 15:10:16,866 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 15:10:16,876 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 11.939 seconds (process running for 12.412)
2025-11-22 15:10:16,956 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 15:10:16,997 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 15:10:17,032 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,060 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,062 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,065 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,066 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,069 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,073 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,077 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,080 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,084 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,087 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,090 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 15:10:17,092 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 15:10:17,093 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 15:10:17,420 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:17,736 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:18,038 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:18,342 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:18,663 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:18,963 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:19,253 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:10:19,255 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 15:10:19,256 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 15:10:19,256 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 15:10:19,256 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 15:10:19,256 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 15:10:19,256 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 15:10:19,256 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 15:10:19,257 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 15:10:19,257 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 15:10:21,552 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-22 15:10:21,553 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-22 15:10:21,556 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-22 15:11:06,442 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 15:11:06,460 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 15:11:06,464 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 15:11:06,465 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@fb07c40]]
2025-11-22 15:11:06,465 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 15:11:06,472 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:11:06,477 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:11:06,481 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:11:06,482 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:11:06,483 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:11:06,484 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:11:06,484 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:11:06,486 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:11:06,497 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 15:11:06,504 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 15:11:38,577 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 15:11:38,636 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 26420 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 15:11:38,637 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 15:11:38,638 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 15:11:39,209 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 15:11:39,272 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 52 ms. Found 3 JPA repository interfaces.
2025-11-22 15:11:40,017 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 15:11:40,028 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 15:11:40,030 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 15:11:40,031 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 15:11:40,090 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 15:11:40,090 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1409 ms
2025-11-22 15:11:40,198 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 15:11:40,260 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 15:11:40,289 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 15:11:40,506 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 15:11:40,531 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 15:11:40,679 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 15:11:40,681 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 15:11:40,702 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 15:11:40,720 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 15:11:41,620 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 15:11:41,633 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:11:41,637 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:11:41,638 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:11:41,638 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:11:41,638 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:11:41,638 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:11:41,638 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:11:41,644 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 15:11:41,658 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 15:11:41,661 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 15:11:41,662 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 15:11:41,665 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 15:11:41,667 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 15:11:41,669 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 15:11:41,672 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 15:11:41,673 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 15:11:41,674 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 15:11:41,674 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 15:11:41,675 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 15:11:41,677 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:11:41,690 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 15:11:41,692 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 15:11:41,694 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 15:11:41,697 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 15:11:41,699 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:11:41,700 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 15:11:41,701 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:11:41,706 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:11:41,898 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 15:11:43,651 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 15:11:43,652 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 15:11:43,710 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 15:11:44,091 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:11:44,092 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:11:44,094 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:11:44,096 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:11:44,339 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 15:11:44,387 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 15:11:44,387 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26dd7f53]]
2025-11-22 15:11:44,387 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 15:11:44,388 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 15:11:44,418 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 15:11:44,424 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.518 seconds (process running for 6.955)
2025-11-22 15:11:44,476 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 15:11:44,501 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 15:11:44,521 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,541 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,544 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,546 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,547 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,549 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,552 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,553 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,555 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,556 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,558 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,560 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:44,561 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 15:11:44,563 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 15:11:44,565 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 15:11:44,848 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:45,268 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:45,570 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:45,853 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:46,139 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:46,429 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:46,717 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:11:46,718 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 15:11:46,718 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 15:11:46,718 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 15:11:46,719 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 15:11:46,719 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 15:11:46,719 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 15:11:46,720 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 15:11:46,720 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 15:11:46,720 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 15:15:45,924 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 15:15:46,006 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 31632 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 15:15:46,007 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 15:15:46,007 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 15:15:47,242 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 15:15:47,322 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 65 ms. Found 3 JPA repository interfaces.
2025-11-22 15:15:48,381 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 15:15:48,394 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 15:15:48,397 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 15:15:48,398 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 15:15:48,486 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 15:15:48,486 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2422 ms
2025-11-22 15:15:48,623 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 15:15:48,699 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 15:15:48,737 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 15:15:49,029 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 15:15:49,064 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 15:15:49,291 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 15:15:49,294 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 15:15:49,328 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 15:15:49,355 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 15:15:50,537 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 15:15:50,555 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:15:50,558 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:15:50,559 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:15:50,559 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:15:50,559 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:15:50,560 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:15:50,560 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:15:50,566 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 15:15:50,582 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 15:15:50,586 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 15:15:50,588 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 15:15:50,590 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 15:15:50,592 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 15:15:50,595 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 15:15:50,599 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 15:15:50,600 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 15:15:50,601 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 15:15:50,602 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 15:15:50,602 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 15:15:50,603 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:15:50,620 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 15:15:50,622 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 15:15:50,626 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 15:15:50,628 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 15:15:50,629 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:15:50,631 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 15:15:50,633 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:15:50,640 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:15:50,886 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 15:15:52,922 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 15:15:52,923 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 15:15:52,987 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 15:15:53,465 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:15:53,468 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:15:53,471 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:15:53,475 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:15:53,842 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 15:15:53,902 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 15:15:53,902 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@16ce05de]]
2025-11-22 15:15:53,903 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 15:15:53,903 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 15:15:53,970 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 15:15:53,978 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.909 seconds (process running for 9.677)
2025-11-22 15:15:54,043 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 15:15:54,076 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 15:15:54,098 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,121 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,126 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,129 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,134 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,136 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,140 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,143 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,146 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,152 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,155 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,157 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 15:15:54,160 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 15:15:54,162 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 15:15:54,487 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:54,797 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:55,091 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:55,391 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:55,700 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:56,013 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:56,317 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:15:56,319 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 15:15:56,319 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 15:15:56,319 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 15:15:56,319 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 15:15:56,319 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 15:15:56,320 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 15:15:56,320 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 15:15:56,320 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 15:15:56,320 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 15:16:47,580 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-22 15:16:47,587 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-22 15:16:47,611 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 23 ms
2025-11-22 15:16:53,914 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-22 15:20:36,324 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 15:20:36,500 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 32848 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 15:20:36,502 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 15:20:36,504 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 15:20:38,907 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 15:20:39,088 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 152 ms. Found 3 JPA repository interfaces.
2025-11-22 15:20:41,970 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 15:20:42,019 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 15:20:42,030 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 15:20:42,032 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 15:20:42,336 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 15:20:42,338 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5687 ms
2025-11-22 15:20:42,832 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 15:20:43,079 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 15:20:43,215 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 15:20:44,336 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 15:20:44,459 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 15:20:45,196 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 15:20:45,202 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 15:20:45,309 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 15:20:45,418 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 15:20:49,804 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 15:20:49,876 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:20:49,906 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:20:49,907 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:20:49,909 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:20:49,911 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:20:49,912 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:20:49,913 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:20:49,950 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 15:20:50,150 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 15:20:50,157 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 15:20:50,162 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 15:20:50,168 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 15:20:50,172 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 15:20:50,181 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 15:20:50,200 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 15:20:50,202 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 15:20:50,205 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 15:20:50,207 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 15:20:50,209 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 15:20:50,212 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:20:50,268 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 15:20:50,274 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 15:20:50,284 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 15:20:50,290 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 15:20:50,298 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:20:50,304 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 15:20:50,310 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:20:50,334 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:20:51,509 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 15:21:00,345 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 15:21:00,347 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 15:21:00,607 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 15:21:02,584 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:21:02,592 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:21:02,598 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:21:02,607 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:21:03,859 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 15:21:04,096 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 15:21:04,098 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3178ca57]]
2025-11-22 15:21:04,102 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 15:21:04,108 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 15:21:04,271 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 15:21:04,318 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 30.266 seconds (process running for 31.494)
2025-11-22 15:21:04,563 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 15:21:04,696 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 15:21:04,788 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,872 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,879 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,885 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,893 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,899 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,906 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,914 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,922 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,931 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,937 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,945 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:04,949 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 15:21:04,954 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 15:21:04,957 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 15:21:06,206 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:07,416 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:08,655 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:09,843 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:11,083 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:12,363 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:13,605 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:21:13,610 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 15:21:13,610 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 15:21:13,610 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 15:21:13,610 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 15:21:13,611 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 15:21:13,611 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 15:21:13,611 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 15:21:13,611 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 15:21:13,612 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 15:21:47,212 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 15:21:47,246 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 15:21:47,252 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 15:21:47,252 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3178ca57]]
2025-11-22 15:21:47,253 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 15:21:47,259 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:21:47,264 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:21:47,270 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:21:47,272 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:21:47,273 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:21:47,274 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:21:47,276 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:21:47,276 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:21:47,285 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 15:21:47,291 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 15:35:13,679 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 15:35:13,769 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 6580 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 15:35:13,770 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 15:35:13,771 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 15:35:14,643 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 15:35:14,710 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 56 ms. Found 3 JPA repository interfaces.
2025-11-22 15:35:15,749 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 15:35:15,765 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 15:35:15,769 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 15:35:15,769 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 15:35:15,869 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 15:35:15,870 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2021 ms
2025-11-22 15:35:16,073 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 15:35:16,172 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 15:35:16,221 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 15:35:16,609 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 15:35:16,648 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 15:35:16,879 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 15:35:16,882 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 15:35:16,916 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 15:35:16,944 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 15:35:18,360 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 15:35:18,394 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:35:18,401 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:35:18,402 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:35:18,404 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:35:18,405 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:35:18,405 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:35:18,406 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:35:18,414 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 15:35:18,433 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 15:35:18,437 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 15:35:18,439 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 15:35:18,441 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 15:35:18,443 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 15:35:18,447 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 15:35:18,453 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 15:35:18,454 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 15:35:18,455 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 15:35:18,456 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 15:35:18,457 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 15:35:18,458 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:35:18,474 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 15:35:18,477 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 15:35:18,481 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 15:35:18,484 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 15:35:18,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:35:18,488 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 15:35:18,490 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:35:18,495 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:35:18,795 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 15:35:21,768 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 15:35:21,770 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 15:35:21,927 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 15:35:22,555 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:35:22,557 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:35:22,560 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:35:22,562 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:35:22,956 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 15:35:23,024 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 15:35:23,025 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58b9cfb7]]
2025-11-22 15:35:23,026 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 15:35:23,026 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 15:35:23,078 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 15:35:23,089 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 10.345 seconds (process running for 10.862)
2025-11-22 15:35:23,171 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 15:35:23,215 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 15:35:23,244 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,271 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,276 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,278 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,283 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,286 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,289 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,291 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,294 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,298 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,301 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:23,303 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 15:35:23,304 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 15:35:23,306 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 15:35:23,749 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:24,187 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:24,594 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:25,027 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:25,424 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:25,823 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:26,248 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:35:26,251 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 15:35:26,252 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 15:35:26,252 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 15:35:26,252 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 15:35:26,253 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 15:35:26,253 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 15:35:26,253 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 15:35:26,253 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 15:35:26,253 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 15:35:41,882 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 15:35:41,911 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 15:35:41,917 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 15:35:41,917 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@58b9cfb7]]
2025-11-22 15:35:41,917 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 15:35:41,922 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:35:41,924 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:35:41,929 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:35:41,931 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:35:41,933 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:35:41,935 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:35:41,936 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:35:41,938 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:35:41,942 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 15:35:41,947 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 15:43:55,503 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 15:43:55,584 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 30072 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 15:43:55,585 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 15:43:55,586 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 15:43:56,435 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 15:43:56,507 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 3 JPA repository interfaces.
2025-11-22 15:43:57,528 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 15:43:57,546 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 15:43:57,550 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 15:43:57,550 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 15:43:57,643 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 15:43:57,644 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1988 ms
2025-11-22 15:43:57,836 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 15:43:57,926 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 15:43:57,974 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 15:43:58,306 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 15:43:58,345 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 15:43:58,577 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 15:43:58,580 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 15:43:58,613 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 15:43:58,643 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 15:44:00,367 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 15:44:00,384 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:44:00,389 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:44:00,390 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:44:00,391 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:44:00,391 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:44:00,392 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:44:00,393 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:44:00,400 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 15:44:00,417 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 15:44:00,423 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 15:44:00,425 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 15:44:00,427 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 15:44:00,432 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 15:44:00,439 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 15:44:00,449 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 15:44:00,453 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 15:44:00,455 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 15:44:00,457 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 15:44:00,460 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 15:44:00,462 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:44:00,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 15:44:00,489 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 15:44:00,494 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 15:44:00,496 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 15:44:00,499 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:44:00,503 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 15:44:00,506 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 15:44:00,515 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:44:00,885 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 15:44:03,713 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 15:44:03,713 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 15:44:03,812 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 15:44:04,392 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:44:04,394 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:44:04,396 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:44:04,399 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 15:44:04,781 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 15:44:04,878 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 15:44:04,880 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a554ba0]]
2025-11-22 15:44:04,881 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 15:44:04,882 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 15:44:04,939 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 15:44:04,947 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 10.308 seconds (process running for 10.861)
2025-11-22 15:44:05,031 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 15:44:05,076 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 15:44:05,107 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,138 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,145 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,156 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,159 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,161 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,164 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,168 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,171 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:05,173 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 15:44:05,175 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 15:44:05,176 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 15:44:05,669 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:06,194 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:06,725 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:07,182 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:07,607 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:08,063 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:08,522 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 15:44:08,525 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 15:44:08,526 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 15:44:08,526 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 15:44:08,526 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 15:44:08,526 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 15:44:08,527 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 15:44:08,527 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 15:44:08,528 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 15:44:08,528 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 15:44:24,489 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 15:44:24,511 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 15:44:24,515 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 15:44:24,516 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a554ba0]]
2025-11-22 15:44:24,516 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 15:44:24,521 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 15:44:24,523 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 15:44:24,527 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 15:44:24,528 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 15:44:24,530 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 15:44:24,534 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 15:44:24,536 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 15:44:24,538 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 15:44:24,542 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 15:44:24,545 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-22 16:46:03,606 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-22 16:46:03,993 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 31856 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-22 16:46:03,996 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-22 16:46:03,998 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - The following 1 profile is active: "local"
2025-11-22 16:46:06,616 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-22 16:46:06,815 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 166 ms. Found 3 JPA repository interfaces.
2025-11-22 16:46:09,872 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-22 16:46:09,923 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-22 16:46:09,934 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-22 16:46:09,935 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-22 16:46:10,250 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-22 16:46:10,252 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 6070 ms
2025-11-22 16:46:10,800 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-22 16:46:11,113 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-22 16:46:11,285 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-22 16:46:12,430 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-22 16:46:12,564 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-22 16:46:13,289 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin_local user=SA
2025-11-22 16:46:13,296 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-22 16:46:13,403 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-22 16:46:13,485 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-22 16:46:17,838 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-22 16:46:17,907 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 16:46:17,925 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 16:46:17,927 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 16:46:17,928 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 16:46:17,930 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 16:46:17,932 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 16:46:17,933 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 16:46:17,953 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-22 16:46:17,997 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-22 16:46:18,006 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-22 16:46:18,012 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-22 16:46:18,019 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-22 16:46:18,024 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-22 16:46:18,033 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-22 16:46:18,047 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-22 16:46:18,051 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-22 16:46:18,054 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-22 16:46:18,057 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-22 16:46:18,060 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-22 16:46:18,065 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-22 16:46:18,117 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-22 16:46:18,123 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-22 16:46:18,135 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-22 16:46:18,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-22 16:46:18,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-22 16:46:18,155 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-22 16:46:18,162 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-22 16:46:18,182 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 16:46:19,092 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-22 16:46:26,589 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-22 16:46:26,590 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-22 16:46:26,695 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-22 16:46:27,383 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 16:46:27,386 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 16:46:27,390 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 16:46:27,395 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-22 16:46:27,786 INFO  [main] [trace=] [user=] o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:tiffin_local'
2025-11-22 16:46:27,873 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-22 16:46:27,875 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]]
2025-11-22 16:46:27,875 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-22 16:46:27,876 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-22 16:46:27,930 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-22 16:46:27,938 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 25.76 seconds (process running for 26.383)
2025-11-22 16:46:28,026 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-22 16:46:28,087 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-22 16:46:28,141 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,183 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,187 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,192 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,196 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,199 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,202 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,205 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,208 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,212 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,216 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,219 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:28,221 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-22 16:46:28,222 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "users" u1_0
2025-11-22 16:46:28,224 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample users...
2025-11-22 16:46:28,638 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:29,027 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:29,417 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:29,815 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:30,215 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:30,607 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:31,105 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-22 16:46:31,109 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample users created successfully!
2025-11-22 16:46:31,110 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Test accounts created:
2025-11-22 16:46:31,110 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Regular User: john.customer@example.com / password123
2025-11-22 16:46:31,111 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Premium User: priya.premium@example.com / password123
2025-11-22 16:46:31,111 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Admin: admin@tiffin.app / admin123
2025-11-22 16:46:31,111 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Super Admin: superadmin@tiffin.app / superadmin123
2025-11-22 16:46:31,111 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Delivery: delivery@tiffin.app / delivery123
2025-11-22 16:46:31,111 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Partner: partner@tiffin.app / partner123
2025-11-22 16:46:31,112 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer -   Test User: test@tiffin.app / test123 (Phone: 9999999999)
2025-11-22 16:47:28,761 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-22 16:48:38,560 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-22 16:48:38,894 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-22 16:48:38,919 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-22 16:48:38,925 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4167d831]]
2025-11-22 16:48:38,926 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-22 16:48:38,976 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-22 16:48:39,000 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-22 16:48:39,034 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-22 16:48:39,035 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-22 16:48:39,037 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-22 16:48:39,039 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-22 16:48:39,040 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-22 16:48:39,042 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-22 16:48:39,075 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-22 16:48:39,097 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
