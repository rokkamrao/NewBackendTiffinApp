2025-11-13 13:20:15,581 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 13:20:15,672 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 11144 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 13:20:15,674 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 13:20:17,913 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 13:20:18,183 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 251 ms. Found 15 JPA repository interfaces.
2025-11-13 13:20:19,672 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 13:20:19,704 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 13:20:19,710 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 13:20:19,711 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 13:20:19,868 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 13:20:19,869 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4108 ms
2025-11-13 13:20:20,401 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 13:20:20,649 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 13:20:20,742 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 13:20:21,189 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 13:20:21,232 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 13:20:21,448 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@62ab5e63
2025-11-13 13:20:21,448 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 13:20:21,588 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 13:20:24,910 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 13:20:24,960 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 13:20:24,967 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 13:20:25,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 13:20:25,078 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 13:20:25,087 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 13:20:25,090 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 13:20:25,095 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 13:20:25,100 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 13:20:25,103 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 13:20:25,107 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 13:20:25,112 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 13:20:25,157 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 13:20:25,176 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 13:20:25,181 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 13:20:25,186 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 13:20:25,197 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 13:20:25,199 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 13:20:25,201 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 13:20:25,209 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 13:20:25,218 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 13:20:25,223 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 13:20:25,225 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 13:20:25,239 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 13:20:25,241 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 13:20:25,252 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 13:20:25,267 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 13:20:25,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 13:20:25,284 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 13:20:25,324 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 13:20:25,334 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 13:20:25,361 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 13:20:25,409 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 13:20:25,423 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 13:20:25,428 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 13:20:25,432 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 13:20:25,449 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 13:20:25,464 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:20:25,472 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 13:20:25,475 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:20:25,484 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 13:20:25,510 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 13:20:25,523 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 13:20:25,533 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 13:20:25,536 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:20:25,539 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 13:20:25,553 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 13:20:25,557 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:20:25,559 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 13:20:25,571 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 13:20:25,583 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 13:20:25,593 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 13:20:25,605 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 13:20:25,628 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 13:20:25,643 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 13:20:25,662 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 13:20:25,667 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 13:20:25,675 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 13:20:25,680 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 13:20:25,684 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 13:20:25,688 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 13:20:25,707 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 13:20:25,712 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 13:20:25,716 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 13:20:25,720 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-13 13:20:25,722 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 13:20:25,726 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 13:20:25,732 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 13:20:25,735 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 13:20:25,738 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 13:20:25,741 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-13 13:20:25,749 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 13:20:26,208 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 13:20:36,976 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 13:20:37,005 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 13:20:37,970 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 13:20:37,971 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 13:20:39,751 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 13:20:41,149 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 13:20:41,151 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@78a90c1e]]
2025-11-13 13:20:41,155 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 13:20:41,159 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 13:20:41,231 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 13:20:41,268 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 26.826 seconds (process running for 27.96)
2025-11-13 13:20:41,650 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 13:20:41,852 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 13:20:42,047 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 13:20:42,237 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 13:20:42,239 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 13:21:41,314 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-13 13:21:44,429 INFO  [http-nio-8081-exec-4] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 13:21:44,430 INFO  [http-nio-8081-exec-4] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 13:21:44,479 INFO  [http-nio-8081-exec-4] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 49 ms
2025-11-13 13:22:33,150 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 13:22:33,150 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 13:22:33,285 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 13:23:21,641 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 13:23:21,648 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 13:23:21,771 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 13:23:21,835 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 13:23:21,841 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 13:23:53,003 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-13 13:23:53,010 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-13 13:23:53,010 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1763020433010)
2025-11-13 13:23:53,017 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-13 13:23:57,108 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-13 13:23:57,108 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-13 13:23:57,113 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-13 13:23:57,136 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-13 13:23:57,157 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  Creating new user for phone: 9045394959
2025-11-13 13:23:57,205 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 13:23:57,246 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-13 13:23:57,246 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-13 13:37:27,399 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 13:38:53,744 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 13:38:53,792 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 13:38:53,811 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 13:39:51,577 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 13:51:41,356 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2025-11-13 13:57:52,284 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 13:57:52,330 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 21004 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 13:57:52,331 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 13:57:52,961 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 13:57:53,055 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 15 JPA repository interfaces.
2025-11-13 13:57:53,493 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 13:57:53,505 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 13:57:53,507 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 13:57:53,508 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 13:57:53,577 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 13:57:53,578 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1209 ms
2025-11-13 13:57:53,743 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 13:57:53,789 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 13:57:53,825 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 13:57:54,042 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 13:57:54,068 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 13:57:54,291 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@336d28a1
2025-11-13 13:57:54,291 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 13:57:54,367 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 13:57:55,401 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 13:57:55,422 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 13:57:55,424 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 13:57:55,438 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 13:57:55,440 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 13:57:55,441 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 13:57:55,441 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 13:57:55,443 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 13:57:55,444 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 13:57:55,445 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 13:57:55,446 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 13:57:55,447 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 13:57:55,459 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 13:57:55,465 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 13:57:55,466 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 13:57:55,468 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 13:57:55,471 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 13:57:55,472 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 13:57:55,473 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 13:57:55,476 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 13:57:55,479 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 13:57:55,481 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 13:57:55,481 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 13:57:55,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 13:57:55,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 13:57:55,490 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 13:57:55,494 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 13:57:55,497 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 13:57:55,500 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 13:57:55,506 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 13:57:55,509 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 13:57:55,523 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 13:57:55,542 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 13:57:55,548 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 13:57:55,548 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 13:57:55,556 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 13:57:55,563 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 13:57:55,570 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:57:55,575 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 13:57:55,577 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:57:55,578 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 13:57:55,584 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 13:57:55,592 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 13:57:55,593 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 13:57:55,597 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:57:55,598 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 13:57:55,605 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 13:57:55,606 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 13:57:55,608 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 13:57:55,612 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 13:57:55,618 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 13:57:55,623 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 13:57:55,628 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 13:57:55,633 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 13:57:55,640 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 13:57:55,647 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 13:57:55,651 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 13:57:55,654 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 13:57:55,656 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 13:57:55,658 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 13:57:55,659 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 13:57:55,667 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 13:57:55,669 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 13:57:55,671 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 13:57:55,672 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-13 13:57:55,673 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 13:57:55,675 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 13:57:55,677 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 13:57:55,679 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 13:57:55,680 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 13:57:55,681 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-13 13:57:55,685 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 13:57:55,910 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 13:57:59,255 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 13:57:59,256 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 13:57:59,393 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 13:57:59,393 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 13:57:59,685 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 13:57:59,944 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 13:57:59,944 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1b9225d5]]
2025-11-13 13:57:59,945 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 13:57:59,946 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 13:57:59,965 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 13:57:59,971 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.204 seconds (process running for 8.519)
2025-11-13 13:58:00,060 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 13:58:00,086 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 13:58:00,108 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 13:58:00,131 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 13:58:00,131 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 13:58:50,786 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 13:58:50,791 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 13:58:50,793 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 13:58:50,793 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1b9225d5]]
2025-11-13 13:58:50,793 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 13:58:50,796 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 13:58:50,799 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 13:58:50,801 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 13:58:50,803 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 13:58:50,805 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 13:58:50,808 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 13:58:50,809 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 13:58:50,809 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 13:58:50,810 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 13:58:50,811 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 13:58:50,812 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 13:58:50,813 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 13:58:50,818 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 13:58:50,822 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 13:58:50,823 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 13:58:50,824 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 13:58:50,827 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 13:58:50,828 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 13:58:50,828 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 13:58:50,831 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 13:58:50,834 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 13:58:50,835 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 13:58:50,835 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 13:58:50,838 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 13:58:50,839 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 13:58:50,841 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 13:58:50,845 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 13:58:50,848 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 13:58:50,852 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 13:58:50,857 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 13:58:50,861 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 13:58:50,861 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-13 13:58:50,874 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-13 13:59:58,984 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 13:59:59,026 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 20024 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 13:59:59,027 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 13:59:59,640 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 13:59:59,743 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 94 ms. Found 15 JPA repository interfaces.
2025-11-13 14:00:00,155 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 14:00:00,167 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 14:00:00,169 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 14:00:00,169 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 14:00:00,231 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 14:00:00,231 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1171 ms
2025-11-13 14:00:00,357 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 14:00:00,405 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 14:00:00,429 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 14:00:00,642 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 14:00:00,666 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 14:00:00,772 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@62158991
2025-11-13 14:00:00,773 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 14:00:00,835 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 14:00:01,863 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 14:00:01,876 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 14:00:01,878 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 14:00:01,879 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 14:00:01,879 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 14:00:01,880 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 14:00:01,880 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 14:00:01,881 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 14:00:01,881 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 14:00:01,882 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 14:00:01,882 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 14:00:01,882 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 14:00:01,883 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 14:00:01,883 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 14:00:01,883 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 14:00:01,884 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 14:00:01,884 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 14:00:01,884 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 14:00:01,885 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 14:00:01,885 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 14:00:01,886 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 14:00:01,886 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 14:00:01,886 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 14:00:01,887 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 14:00:01,888 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 14:00:01,888 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 14:00:01,888 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 14:00:01,889 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 14:00:01,889 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 14:00:01,889 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 14:00:01,890 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 14:00:01,896 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 14:00:01,912 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 14:00:01,918 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 14:00:01,920 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 14:00:01,923 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 14:00:01,930 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 14:00:01,935 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 14:00:01,938 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 14:00:01,940 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 14:00:01,941 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 14:00:01,946 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 14:00:01,953 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 14:00:01,955 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 14:00:01,958 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 14:00:01,960 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 14:00:01,967 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 14:00:01,969 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-13 14:00:01,971 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 14:00:01,975 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 14:00:01,986 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 14:00:01,992 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 14:00:01,996 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 14:00:02,004 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 14:00:02,011 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 14:00:02,019 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 14:00:02,022 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 14:00:02,024 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 14:00:02,027 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 14:00:02,030 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 14:00:02,031 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 14:00:02,037 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 14:00:02,040 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 14:00:02,042 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 14:00:02,043 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-13 14:00:02,044 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 14:00:02,045 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 14:00:02,048 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 14:00:02,050 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 14:00:02,051 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 14:00:02,052 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-13 14:00:02,057 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 14:00:02,265 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 14:00:05,615 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 14:00:05,615 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 14:00:05,732 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 14:00:05,732 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 14:00:06,011 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 14:00:06,233 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 14:00:06,234 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@9c77ccc]]
2025-11-13 14:00:06,235 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 14:00:06,235 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 14:00:06,259 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 14:00:06,266 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 7.694 seconds (process running for 7.956)
2025-11-13 14:00:06,350 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 14:00:06,374 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 14:00:06,396 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 14:00:06,416 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 14:00:06,416 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 14:01:06,237 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-13 14:31:06,251 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2025-11-13 14:47:04,734 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 14:47:04,768 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 14:47:04,782 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 14:47:04,783 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@9c77ccc]]
2025-11-13 14:47:04,784 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 14:47:04,803 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 14:47:04,828 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 14:47:04,841 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 14:47:04,867 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 14:47:04,871 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 14:47:04,872 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 14:47:04,873 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 14:47:04,875 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 14:47:04,878 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 14:47:04,880 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 14:47:04,881 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 14:47:04,883 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 14:47:04,904 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 14:47:04,915 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 14:47:04,918 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 14:47:04,921 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 14:47:04,927 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 14:47:04,928 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 14:47:04,929 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 14:47:04,935 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 14:47:04,942 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 14:47:04,944 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 14:47:04,947 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 14:47:04,955 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 14:47:04,956 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 14:47:04,962 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 14:47:04,971 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 14:47:04,976 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 14:47:04,983 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 14:47:04,991 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 14:47:04,997 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 14:47:05,047 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-13 14:47:05,065 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-13 14:52:14,944 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 14:52:14,985 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 3552 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 14:52:14,985 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 14:52:15,603 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 14:52:15,723 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 109 ms. Found 15 JPA repository interfaces.
2025-11-13 14:52:16,162 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 14:52:16,172 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 14:52:16,175 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 14:52:16,176 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 14:52:16,230 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 14:52:16,230 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1209 ms
2025-11-13 14:52:16,359 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 14:52:16,415 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 14:52:16,444 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 14:52:16,659 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 14:52:16,684 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 14:52:16,929 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@d13379e
2025-11-13 14:52:16,931 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 14:52:16,997 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 14:52:18,047 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 14:52:18,051 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 14:52:18,051 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 14:52:18,066 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 14:52:18,067 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 14:52:18,067 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 14:52:18,068 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 14:52:18,068 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 14:52:18,068 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 14:52:18,069 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 14:52:18,069 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 14:52:18,069 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 14:52:18,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 14:52:18,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 14:52:18,072 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 14:52:18,072 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 14:52:18,072 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 14:52:18,074 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 14:52:18,078 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 14:52:18,079 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 14:52:18,080 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 14:52:18,081 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 14:52:18,081 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 14:52:18,082 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 14:52:18,088 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 14:52:18,113 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 14:52:18,114 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 14:52:18,121 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 14:52:18,124 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 14:52:18,131 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "text",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "text",
        "nutritional_info" "text",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 14:52:18,138 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "text",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "text",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "text",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 14:52:18,146 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 14:52:18,155 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 14:52:18,164 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 14:52:18,166 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "text",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 14:52:18,174 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 14:52:18,178 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "text" not null,
        "metadata" "text",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 14:52:18,190 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 14:52:18,195 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 14:52:18,199 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 14:52:18,211 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 14:52:18,218 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 14:52:18,227 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 14:52:18,235 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 14:52:18,248 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 14:52:18,248 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 14:52:18,255 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 14:52:18,257 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 14:52:18,259 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 14:52:18,261 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 14:52:18,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 14:52:18,277 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 14:52:18,279 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 14:52:18,283 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 14:52:18,285 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 14:52:18,288 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 14:52:18,290 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 14:52:18,292 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 14:52:18,301 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 14:52:18,528 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 14:52:21,964 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 14:52:21,964 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 14:52:22,097 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 14:52:22,097 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 14:52:22,375 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 14:52:22,632 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 14:52:22,632 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1f8d6aa]]
2025-11-13 14:52:22,632 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 14:52:22,632 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 14:52:22,660 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 14:52:22,666 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.189 seconds (process running for 8.495)
2025-11-13 14:52:22,748 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 14:52:22,773 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 14:52:22,794 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 14:52:22,824 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 14:52:22,824 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 14:53:22,669 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-13 15:03:34,082 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 15:03:34,088 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 15:03:34,169 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 80 ms
2025-11-13 15:03:34,571 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 15:03:51,971 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 15:06:42,524 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 16:16:48,835 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 16:16:48,882 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 5388 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 16:16:48,883 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 16:16:49,541 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 16:16:49,651 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 15 JPA repository interfaces.
2025-11-13 16:16:50,088 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 16:16:50,091 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 16:16:50,104 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 16:16:50,105 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 16:16:50,161 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 16:16:50,161 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1240 ms
2025-11-13 16:16:50,292 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 16:16:50,350 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 16:16:50,379 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 16:16:50,615 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 16:16:50,642 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 16:16:50,771 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@d13379e
2025-11-13 16:16:50,773 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 16:16:50,844 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 16:16:51,898 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 16:16:51,912 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 16:16:51,914 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 16:16:51,929 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 16:16:51,931 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 16:16:51,934 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 16:16:51,937 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 16:16:51,939 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 16:16:51,941 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 16:16:51,942 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 16:16:51,943 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 16:16:51,944 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 16:16:51,958 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 16:16:51,962 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 16:16:51,964 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 16:16:51,965 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 16:16:51,970 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 16:16:51,974 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 16:16:51,979 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 16:16:51,981 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 16:16:51,985 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 16:16:51,987 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 16:16:51,992 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 16:16:51,998 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 16:16:51,999 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 16:16:52,004 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 16:16:52,009 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 16:16:52,013 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 16:16:52,020 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 16:16:52,021 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 16:16:52,028 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 16:16:52,030 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 16:16:52,047 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 16:16:52,069 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 16:16:52,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 16:16:52,073 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 16:16:52,080 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "text",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "text",
        "nutritional_info" "text",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 16:16:52,089 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "text",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "text",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "text",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 16:16:52,094 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 16:16:52,103 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 16:16:52,108 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 16:16:52,111 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "text",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 16:16:52,121 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 16:16:52,127 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "text" not null,
        "metadata" "text",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 16:16:52,134 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 16:16:52,139 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 16:16:52,143 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 16:16:52,150 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 16:16:52,157 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 16:16:52,166 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 16:16:52,171 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 16:16:52,182 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 16:16:52,185 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 16:16:52,187 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 16:16:52,190 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 16:16:52,192 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 16:16:52,195 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:16:52,205 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:16:52,208 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:16:52,210 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:16:52,213 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:16:52,215 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 16:16:52,216 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 16:16:52,218 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:16:52,220 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:16:52,226 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 16:16:52,448 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 16:16:55,888 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 16:16:55,889 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 16:16:56,007 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 16:16:56,008 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 16:16:56,277 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 16:16:56,522 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 16:16:56,522 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@16e9c09f]]
2025-11-13 16:16:56,522 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 16:16:56,522 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 16:16:56,548 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 16:16:56,552 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.171 seconds (process running for 8.463)
2025-11-13 16:16:56,629 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:16:56,661 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 16:16:56,683 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 16:16:56,704 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 16:16:56,704 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 16:17:15,575 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 16:17:15,581 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 16:17:15,583 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 16:17:15,584 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@16e9c09f]]
2025-11-13 16:17:15,584 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 16:17:15,588 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 16:17:15,590 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 16:17:15,592 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 16:17:15,593 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 16:17:15,595 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 16:17:15,596 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 16:17:15,599 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 16:17:15,600 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 16:17:15,602 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 16:17:15,603 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 16:17:15,603 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 16:17:15,604 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 16:17:15,609 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 16:17:15,612 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 16:17:15,613 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 16:17:15,614 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 16:17:15,617 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 16:17:15,621 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 16:17:15,624 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 16:17:15,627 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 16:17:15,630 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 16:17:15,632 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 16:17:15,637 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 16:17:15,641 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 16:17:15,644 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 16:17:15,650 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 16:17:15,654 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 16:17:15,658 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 16:17:15,662 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 16:17:15,666 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 16:17:15,670 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 16:17:15,677 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-13 16:17:15,679 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-13 16:17:44,376 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 16:17:44,429 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 22532 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 16:17:44,429 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 16:17:45,276 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 16:17:45,415 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 130 ms. Found 15 JPA repository interfaces.
2025-11-13 16:17:45,990 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 16:17:46,004 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 16:17:46,008 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 16:17:46,008 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 16:17:46,081 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 16:17:46,081 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1603 ms
2025-11-13 16:17:46,255 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 16:17:46,325 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 16:17:46,377 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 16:17:46,735 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 16:17:46,788 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 16:17:46,970 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@5f3ddc86
2025-11-13 16:17:46,970 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 16:17:47,072 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 16:17:48,932 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 16:17:48,950 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 16:17:48,958 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 16:17:48,961 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 16:17:48,963 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 16:17:48,965 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 16:17:48,967 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 16:17:48,968 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 16:17:48,969 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 16:17:48,971 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 16:17:48,972 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 16:17:48,974 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 16:17:48,976 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 16:17:48,976 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 16:17:48,977 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 16:17:48,978 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 16:17:48,978 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 16:17:48,979 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 16:17:48,979 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 16:17:48,980 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 16:17:48,981 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 16:17:48,981 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 16:17:48,982 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 16:17:48,982 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 16:17:48,982 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 16:17:48,983 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 16:17:48,983 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 16:17:48,984 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 16:17:48,984 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 16:17:48,985 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 16:17:48,986 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 16:17:48,994 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 16:17:49,019 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 16:17:49,026 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 16:17:49,026 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 16:17:49,035 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 16:17:49,048 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "text",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "text",
        "nutritional_info" "text",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 16:17:49,055 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "text",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "text",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "text",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 16:17:49,061 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 16:17:49,067 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 16:17:49,078 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 16:17:49,082 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "text",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 16:17:49,088 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 16:17:49,096 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "text" not null,
        "metadata" "text",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 16:17:49,116 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 16:17:49,125 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 16:17:49,133 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 16:17:49,137 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 16:17:49,144 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 16:17:49,152 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 16:17:49,160 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 16:17:49,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 16:17:49,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 16:17:49,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 16:17:49,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 16:17:49,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 16:17:49,179 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:17:49,193 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:17:49,201 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:17:49,205 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:17:49,209 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:17:49,211 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 16:17:49,214 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 16:17:49,216 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:17:49,219 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:17:49,225 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 16:17:49,564 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 16:17:54,353 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 16:17:54,355 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 16:17:54,579 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 16:17:54,594 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 16:17:55,209 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 16:17:56,046 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 16:17:56,046 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3a28e3c1]]
2025-11-13 16:17:56,053 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 16:17:56,060 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 16:17:56,121 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 16:17:56,144 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 12.335 seconds (process running for 12.712)
2025-11-13 16:17:56,460 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:17:56,553 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 16:17:56,605 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 16:17:56,672 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 16:17:56,674 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 16:18:12,741 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 16:18:12,748 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 16:18:12,749 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 16:18:12,751 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3a28e3c1]]
2025-11-13 16:18:12,751 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 16:18:12,754 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 16:18:12,759 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 16:18:12,759 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 16:18:12,766 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 16:18:12,767 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 16:18:12,768 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 16:18:12,769 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 16:18:12,770 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 16:18:12,773 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 16:18:12,774 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 16:18:12,774 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 16:18:12,775 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 16:18:12,781 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 16:18:12,784 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 16:18:12,786 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 16:18:12,787 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 16:18:12,790 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 16:18:12,793 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 16:18:12,796 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 16:18:12,800 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 16:18:12,803 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 16:18:12,805 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 16:18:12,809 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 16:18:12,814 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 16:18:12,819 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 16:18:12,824 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 16:18:12,832 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 16:18:12,835 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 16:18:12,837 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 16:18:12,844 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 16:18:12,849 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 16:18:12,861 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-13 16:18:12,864 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-13 16:18:42,132 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 16:18:42,184 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 23584 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 16:18:42,184 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 16:18:43,249 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 16:18:43,413 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 144 ms. Found 15 JPA repository interfaces.
2025-11-13 16:18:44,094 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 16:18:44,109 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 16:18:44,112 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 16:18:44,113 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 16:18:44,194 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 16:18:44,195 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1959 ms
2025-11-13 16:18:44,390 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 16:18:44,446 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 16:18:44,485 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 16:18:44,724 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 16:18:44,754 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 16:18:44,890 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@35ceec81
2025-11-13 16:18:44,891 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 16:18:44,966 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 16:18:46,109 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 16:18:46,133 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 16:18:46,135 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 16:18:46,140 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 16:18:46,141 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 16:18:46,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 16:18:46,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 16:18:46,143 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 16:18:46,143 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 16:18:46,144 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 16:18:46,144 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 16:18:46,145 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 16:18:46,146 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 16:18:46,147 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 16:18:46,147 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 16:18:46,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 16:18:46,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 16:18:46,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 16:18:46,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 16:18:46,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 16:18:46,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 16:18:46,150 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 16:18:46,150 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 16:18:46,151 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 16:18:46,152 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 16:18:46,152 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 16:18:46,153 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 16:18:46,153 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 16:18:46,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 16:18:46,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 16:18:46,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 16:18:46,161 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 16:18:46,183 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 16:18:46,191 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 16:18:46,193 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 16:18:46,196 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 16:18:46,204 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "text",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "text",
        "nutritional_info" "text",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 16:18:46,210 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "text",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "text",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "text",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 16:18:46,217 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 16:18:46,223 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 16:18:46,233 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 16:18:46,236 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "text",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 16:18:46,248 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 16:18:46,258 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "text" not null,
        "metadata" "text",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 16:18:46,266 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 16:18:46,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 16:18:46,281 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 16:18:46,288 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 16:18:46,295 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 16:18:46,302 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 16:18:46,313 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 16:18:46,324 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 16:18:46,328 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 16:18:46,331 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 16:18:46,335 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 16:18:46,337 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 16:18:46,340 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:18:46,352 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:18:46,355 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:18:46,356 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:18:46,359 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:18:46,361 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 16:18:46,363 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 16:18:46,365 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:18:46,367 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:18:46,374 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 16:18:46,597 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 16:18:50,105 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 16:18:50,105 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 16:18:50,249 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 16:18:50,249 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 16:18:50,566 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 16:18:50,837 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 16:18:50,837 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@77f1e7a]]
2025-11-13 16:18:50,838 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 16:18:50,839 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 16:18:50,864 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 16:18:50,870 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 9.37 seconds (process running for 9.803)
2025-11-13 16:18:50,964 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:18:50,981 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 16:18:51,033 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 16:18:51,061 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 16:18:51,061 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 16:19:01,993 INFO  [http-nio-8081-exec-3] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 16:19:01,999 INFO  [http-nio-8081-exec-3] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 16:19:02,005 INFO  [http-nio-8081-exec-3] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-13 16:19:02,131 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:19:02,131 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:19:02,152 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 16:19:07,074 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 16:19:07,291 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:19:07,322 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:19:07,325 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 16:19:16,570 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:19:16,597 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:19:16,597 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 16:19:50,852 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-13 16:33:51,948 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-13 16:33:52,001 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 13660 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-13 16:33:52,002 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-13 16:33:52,725 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 16:33:52,839 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 101 ms. Found 15 JPA repository interfaces.
2025-11-13 16:33:53,287 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-13 16:33:53,297 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-13 16:33:53,299 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 16:33:53,300 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-13 16:33:53,354 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-13 16:33:53,355 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1315 ms
2025-11-13 16:33:53,479 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 16:33:53,526 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-13 16:33:53,562 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 16:33:53,772 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 16:33:53,795 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-13 16:33:53,924 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@1686ed85
2025-11-13 16:33:53,925 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-13 16:33:53,993 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 16:33:55,056 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 16:33:55,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-13 16:33:55,072 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-13 16:33:55,086 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-13 16:33:55,087 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-13 16:33:55,087 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-13 16:33:55,091 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-13 16:33:55,094 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-13 16:33:55,095 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-13 16:33:55,096 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-13 16:33:55,097 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-13 16:33:55,098 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-13 16:33:55,108 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-13 16:33:55,111 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-13 16:33:55,113 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-13 16:33:55,114 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-13 16:33:55,119 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-13 16:33:55,122 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-13 16:33:55,125 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-13 16:33:55,128 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-13 16:33:55,133 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-13 16:33:55,134 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-13 16:33:55,139 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-13 16:33:55,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-13 16:33:55,146 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-13 16:33:55,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-13 16:33:55,151 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-13 16:33:55,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-13 16:33:55,158 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-13 16:33:55,162 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-13 16:33:55,168 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-13 16:33:55,178 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-13 16:33:55,194 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-13 16:33:55,204 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-13 16:33:55,204 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-13 16:33:55,210 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-13 16:33:55,215 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "text",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "text",
        "nutritional_info" "text",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-13 16:33:55,223 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "text",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "text",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "text",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-13 16:33:55,230 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-13 16:33:55,234 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-13 16:33:55,240 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-13 16:33:55,243 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "text",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-13 16:33:55,250 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-13 16:33:55,257 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "text" not null,
        "metadata" "text",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-13 16:33:55,267 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-13 16:33:55,272 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-13 16:33:55,278 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-13 16:33:55,288 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-13 16:33:55,296 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-13 16:33:55,308 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-13 16:33:55,319 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-13 16:33:55,334 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-13 16:33:55,338 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-13 16:33:55,343 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-13 16:33:55,348 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-13 16:33:55,350 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-13 16:33:55,357 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:33:55,370 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:33:55,375 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:33:55,377 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:33:55,380 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-13 16:33:55,384 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-13 16:33:55,390 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-13 16:33:55,394 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-13 16:33:55,397 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-13 16:33:55,404 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 16:33:55,616 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 16:33:58,930 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-13 16:33:58,930 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-13 16:33:59,066 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-13 16:33:59,066 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-13 16:33:59,333 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-13 16:33:59,572 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 16:33:59,574 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3ecc1bc7]]
2025-11-13 16:33:59,574 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 16:33:59,574 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-13 16:33:59,595 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-13 16:33:59,596 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.117 seconds (process running for 8.393)
2025-11-13 16:33:59,685 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:33:59,708 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-13 16:33:59,731 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 16:33:59,757 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-13 16:33:59,758 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-13 16:34:44,360 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 16:34:44,373 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 16:34:44,452 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 78 ms
2025-11-13 16:34:44,796 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 16:34:45,490 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:34:45,611 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:34:45,615 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 16:34:59,584 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-13 16:37:11,268 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 16:37:11,834 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 16:37:11,859 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:51:08,552 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:51:09,203 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:51:09,380 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 16:51:09,486 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 16:58:36,250 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:58:36,478 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:58:36,484 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 16:58:38,564 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 16:58:38,813 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 16:58:38,873 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 16:58:38,881 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 16:58:45,559 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-13 16:58:45,560 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-13 16:58:45,560 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1763033325560)
2025-11-13 16:58:45,560 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-13 16:58:51,796 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-13 16:58:51,796 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-13 16:58:51,803 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-13 16:58:51,810 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-13 16:58:51,817 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  Creating new user for phone: 9045394959
2025-11-13 16:58:51,852 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 16:58:51,886 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-13 16:58:51,886 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-13 17:00:04,678 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:00:04,694 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:00:04,694 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:00:05,481 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:00:05,634 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:00:05,644 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:02:36,827 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:04:59,616 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2025-11-13 17:05:43,995 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:06:00,211 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:06:27,881 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:16:24,472 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:16:34,707 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:16:34,906 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:16:34,920 WARN  [http-nio-8081-exec-9] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:16:39,330 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:16:39,358 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:16:39,362 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:16:39,409 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:16:39,409 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:16:44,857 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-13 17:16:44,857 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-13 17:16:44,857 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1763034404857)
2025-11-13 17:16:44,858 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-13 17:16:48,933 INFO  [http-nio-8081-exec-7] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-13 17:16:48,933 INFO  [http-nio-8081-exec-7] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-13 17:16:48,933 INFO  [http-nio-8081-exec-7] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-13 17:16:48,937 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-13 17:16:49,000 INFO  [http-nio-8081-exec-7] [trace=] [user=] c.t.a.service.AuthenticationService -  Existing user found: 1
2025-11-13 17:16:49,079 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt",
        a1_0."user_id",
        a1_0."id",
        a1_0."active",
        a1_0."apartment",
        a1_0."city",
        a1_0."country",
        a1_0."createdAt",
        a1_0."deliveryInstructions",
        a1_0."isDefault",
        a1_0."label",
        a1_0."landmark",
        a1_0."latitude",
        a1_0."longitude",
        a1_0."state",
        a1_0."street",
        a1_0."updatedAt",
        a1_0."zipCode" 
    from
        "users" u1_0 
    left join
        "addresses" a1_0 
            on u1_0."id"=a1_0."user_id" 
    where
        u1_0."id"=?
2025-11-13 17:16:49,104 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        o1_0."user_id",
        o1_0."id",
        o1_0."createdAt",
        o1_0."delivery_address_id",
        o1_0."deliveryTime",
        o1_0."orderTime",
        o1_0."paymentId",
        o1_0."paymentMethod",
        o1_0."paymentStatus",
        o1_0."specialInstructions",
        o1_0."status",
        o1_0."totalAmount" 
    from
        "orders" o1_0 
    where
        o1_0."user_id"=?
2025-11-13 17:16:49,118 INFO  [http-nio-8081-exec-7] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-13 17:16:49,118 INFO  [http-nio-8081-exec-7] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-13 17:16:49,148 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:16:49,148 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:17:19,568 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 17:18:14,788 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:18:14,789 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:18:16,947 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:18:16,947 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:18:26,418 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:18:26,450 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:18:26,450 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:18:39,167 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:18:39,893 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:18:39,938 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:18:39,947 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:18:39,985 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:18:39,983 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:18:59,646 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:19:27,888 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9876543210
2025-11-13 17:19:27,889 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9876543210
2025-11-13 17:19:27,890 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9876543210: 123456 (OTP ID: otp_1763034567889)
2025-11-13 17:19:27,890 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9876543210
2025-11-13 17:20:02,682 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9876543210
2025-11-13 17:20:02,682 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9876543210 with OTP: 123456
2025-11-13 17:20:02,684 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-13 17:20:02,863 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-13 17:20:02,904 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.a.service.AuthenticationService -  Creating new user for phone: 9876543210
2025-11-13 17:20:02,923 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-13 17:20:02,942 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9876543210, user ID: 2
2025-11-13 17:20:02,943 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9876543210
2025-11-13 17:26:25,971 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:26:26,212 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:26:26,284 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:26:26,439 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:26:26,712 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:26:42,622 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:26:42,712 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:26:42,717 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:26:42,744 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:26:42,753 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:27:35,194 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:27:35,228 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:27:35,228 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:27:35,469 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:27:35,486 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:27:50,882 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:27:50,993 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 17:28:00,746 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:28:00,826 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ct1_0."id",
        ct1_0."approved_at",
        ct1_0."avatar_emoji",
        ct1_0."comment",
        ct1_0."created_at",
        ct1_0."customer_image_url",
        ct1_0."customer_name",
        ct1_0."display_order",
        ct1_0."is_approved",
        ct1_0."is_featured",
        ct1_0."is_verified",
        ct1_0."location",
        ct1_0."order_id",
        ct1_0."rating",
        ct1_0."user_id" 
    from
        "customer_testimonials" ct1_0 
    where
        ct1_0."is_approved" 
    order by
        ct1_0."display_order",
        ct1_0."created_at" desc
2025-11-13 17:28:00,850 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        d1_0."id",
        d1_0."available",
        d1_0."calories",
        d1_0."cuisine",
        d1_0."description",
        d1_0."imageUrl",
        d1_0."name",
        d1_0."preparationTime",
        d1_0."price",
        d1_0."rating",
        d1_0."reviewCount",
        d1_0."spicyLevel",
        d1_0."type" 
    from
        "dishes" d1_0
2025-11-13 17:28:00,968 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-13 17:28:00,983 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-13 17:28:17,055 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 17:28:17,287 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-13 17:28:17,320 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        mp1_0."id",
        mp1_0."color",
        mp1_0."createdAt",
        mp1_0."deliveryDiscount",
        mp1_0."description",
        mp1_0."displayName",
        mp1_0."earlyAccess",
        mp1_0."exclusiveDeals",
        mp1_0."foodDiscount",
        mp1_0."freeDelivery",
        mp1_0."iconUrl",
        mp1_0."isActive",
        mp1_0."isFeatured",
        mp1_0."loyaltyBonusMultiplier",
        mp1_0."loyaltyMultiplier",
        mp1_0."maxCancellations",
        mp1_0."maxDeliveries",
        mp1_0."maxOrders",
        mp1_0."monthlyPrice",
        mp1_0."name",
        mp1_0."priorityDeliveryMinutes",
        mp1_0."prioritySupport",
        mp1_0."tier",
        mp1_0."updatedAt",
        mp1_0."yearlyDiscount",
        mp1_0."yearlyPrice" 
    from
        "membership_plans" mp1_0 
    where
        mp1_0."isActive" 
    order by
        mp1_0."tier"
2025-11-13 17:33:49,947 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
