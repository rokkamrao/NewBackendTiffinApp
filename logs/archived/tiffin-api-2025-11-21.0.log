2025-11-20 14:02:56,513 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:02:56,550 WARN  [main] [trace=] [user=] o.s.b.t.j.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer - 

Found multiple occurrences of org.json.JSONObject on the class path:

	jar:file:/C:/Users/mr_te/.m2/repository/org/json/json/20180130/json-20180130.jar!/org/json/JSONObject.class
	jar:file:/C:/Users/mr_te/.m2/repository/com/vaadin/external/google/android-json/0.0.20131108.vaadin1/android-json-0.0.20131108.vaadin1.jar!/org/json/JSONObject.class

You may wish to exclude one of them to ensure predictable runtime behavior

2025-11-20 14:02:56,589 INFO  [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - Starting AuthenticationServiceTest using Java 21.0.9 with PID 18624 (started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:02:56,590 DEBUG [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:02:56,590 INFO  [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - The following 1 profile is active: "test"
2025-11-20 14:02:56,662 DEBUG [main] [trace=] [user=] o.s.w.c.s.GenericWebApplicationContext - Refreshing org.springframework.web.context.support.GenericWebApplicationContext@28831d69
2025-11-20 14:02:57,513 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:02:57,569 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 1 JPA repository interface.
2025-11-20 14:02:58,767 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:02:58,915 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:02:58,969 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:02:59,520 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:02:59,579 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:03:00,068 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-11-20 14:03:00,075 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:03:00,189 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:03:00,270 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:03:03,264 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:03:03,317 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:03:03,329 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:03:03,347 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:03:03,402 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:03:03,411 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:03:03,413 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:03:03,414 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:03:03,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:03:03,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:03:03,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:03:03,477 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:03:04,384 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:03:08,110 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:03:08,338 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 13 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:03:08,484 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:03:08,539 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:03:08,697 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:03:08,699 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:03:08,699 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:03:08,707 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:03:08,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:03:08,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:03:08,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:03:08,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:03:08,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:03:08,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:03:08,900 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:03:09,167 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:03:09,285 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:03:09,539 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:03:09,539 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:03:09,539 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:03:09,539 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3875816f]
2025-11-20 14:03:09,539 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3875816f]
2025-11-20 14:03:09,539 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3875816f]]
2025-11-20 14:03:09,539 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:03:09,539 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:03:09,539 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:03:09,553 INFO  [main] [trace=] [user=] c.t.a.s.AuthenticationServiceTest - Started AuthenticationServiceTest in 13.759 seconds (process running for 15.862)
2025-11-20 14:03:10,223 INFO  [main] [trace=] [user=] c.t.a.service.AuthenticationService - Completing signup for phone: +919876543210
2025-11-20 14:03:10,367 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-20 14:03:10,532 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-20 14:03:10,810 INFO  [main] [trace=] [user=] c.t.a.service.AuthenticationService - Sending OTP to phone: +919876543210
2025-11-20 14:03:10,810 INFO  [main] [trace=] [user=] c.t.a.service.AuthenticationService - Generated OTP for +919876543210: 123426 (expires in 5 minutes)
2025-11-20 14:03:10,900 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] o.s.w.c.s.GenericWebApplicationContext - Closing org.springframework.web.context.support.GenericWebApplicationContext@28831d69, started on Thu Nov 20 14:02:56 IST 2025
2025-11-20 14:03:10,904 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:03:10,904 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:03:10,904 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-20 14:03:10,904 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3875816f]]
2025-11-20 14:03:10,905 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3875816f]
2025-11-20 14:03:10,905 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3875816f]
2025-11-20 14:03:10,905 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-20 14:03:10,905 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:03:10,905 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:03:10,910 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:03:11,103 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:03:11,106 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:03:11,111 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-20 14:03:11,113 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-20 14:11:24,486 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:11:24,546 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 28780 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:11:24,546 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:11:24,547 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 14:11:25,046 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:11:25,101 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 1 JPA repository interface.
2025-11-20 14:11:25,737 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-20 14:11:25,757 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-20 14:11:25,759 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 14:11:25,760 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 14:11:25,826 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 14:11:25,827 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1238 ms
2025-11-20 14:11:25,870 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 14:11:25,961 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:11:26,019 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:11:26,047 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:11:26,269 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:11:26,297 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:11:26,449 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 14:11:26,451 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:11:26,472 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:11:26,491 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:11:27,373 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:11:27,387 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:11:27,394 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:11:27,394 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:11:27,408 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:11:27,414 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:11:27,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:11:27,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:11:27,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:11:27,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:11:27,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:11:27,431 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:11:27,718 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:11:29,902 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:11:29,970 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:11:30,006 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:11:30,035 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:11:30,102 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:11:30,102 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:11:30,102 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:11:30,108 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:11:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:11:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:11:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:11:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:11:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:11:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:11:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:11:30,254 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:11:30,303 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:11:30,424 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:11:30,424 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:11:30,424 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:11:30,424 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@173e3893]
2025-11-20 14:11:30,425 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@173e3893]
2025-11-20 14:11:30,425 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@173e3893]]
2025-11-20 14:11:30,425 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:11:30,426 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:11:30,426 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:11:30,426 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-20 14:11:30,438 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:11:30,439 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:11:30,439 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-20 14:11:30,439 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@173e3893]]
2025-11-20 14:11:30,439 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@173e3893]
2025-11-20 14:11:30,439 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@173e3893]
2025-11-20 14:11:30,439 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-20 14:11:30,440 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:11:30,440 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:11:30,440 WARN  [main] [trace=] [user=] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-20 14:11:30,442 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:11:30,443 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:11:30,445 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:11:30,447 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-20 14:11:30,449 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-20 14:11:30,462 INFO  [main] [trace=] [user=] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-20 14:11:30,478 ERROR [main] [trace=] [user=] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-11-20 14:12:09,932 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:12:09,987 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 1860 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:12:09,988 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:12:09,989 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 14:12:10,534 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:12:10,581 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 1 JPA repository interface.
2025-11-20 14:12:11,251 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-20 14:12:11,270 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-20 14:12:11,273 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 14:12:11,273 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 14:12:11,335 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 14:12:11,335 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1303 ms
2025-11-20 14:12:11,379 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 14:12:11,472 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:12:11,533 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:12:11,562 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:12:11,804 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:12:11,826 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:12:11,988 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 14:12:11,990 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:12:12,016 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:12:12,035 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:12:12,797 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:12:12,810 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:12:12,814 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:12:12,819 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:12:12,830 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:12:12,836 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:12:12,837 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:12:12,837 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:12:12,838 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:12:12,838 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:12:12,840 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:12:12,855 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:12:13,062 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:12:14,825 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:12:14,902 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:12:14,938 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:12:14,961 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:12:15,025 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:15,026 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:15,028 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:15,030 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:15,117 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:12:15,117 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:12:15,118 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:12:15,118 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:12:15,119 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:12:15,119 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:12:15,119 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:12:15,169 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:12:15,213 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:12:15,335 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:12:15,335 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:12:15,336 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:12:15,336 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2590172b]
2025-11-20 14:12:15,336 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2590172b]
2025-11-20 14:12:15,337 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2590172b]]
2025-11-20 14:12:15,337 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:12:15,338 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:12:15,338 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:12:15,338 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-20 14:12:15,351 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:12:15,351 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:12:15,351 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-20 14:12:15,352 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2590172b]]
2025-11-20 14:12:15,352 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2590172b]
2025-11-20 14:12:15,352 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2590172b]
2025-11-20 14:12:15,352 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-20 14:12:15,352 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:12:15,352 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:12:15,353 WARN  [main] [trace=] [user=] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-11-20 14:12:15,355 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:12:15,356 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:12:15,358 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:12:15,360 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-20 14:12:15,363 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-20 14:12:15,372 INFO  [main] [trace=] [user=] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-20 14:12:15,389 ERROR [main] [trace=] [user=] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-11-20 14:12:53,872 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:12:53,938 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 3948 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:12:53,938 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:12:53,938 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 14:12:54,481 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:12:54,525 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 1 JPA repository interface.
2025-11-20 14:12:55,152 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-20 14:12:55,170 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-20 14:12:55,177 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 14:12:55,177 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 14:12:55,237 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 14:12:55,238 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1256 ms
2025-11-20 14:12:55,276 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 14:12:55,362 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:12:55,422 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:12:55,451 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:12:55,666 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:12:55,692 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:12:55,840 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 14:12:55,842 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:12:55,863 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:12:55,888 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:12:56,742 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:12:56,763 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:12:56,767 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:12:56,773 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:12:56,783 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:12:56,789 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:12:56,790 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:12:56,791 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:12:56,793 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:12:56,794 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:12:56,795 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:12:56,810 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:12:57,049 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:12:58,709 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:12:58,778 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:12:58,808 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:12:58,832 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:12:58,890 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:58,892 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:58,893 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:58,894 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:12:58,977 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:12:58,977 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:12:58,977 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:12:58,977 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:12:58,977 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:12:58,977 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:12:58,977 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:12:59,031 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:12:59,077 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:12:59,184 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:12:59,184 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:12:59,184 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:12:59,184 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@357972dc]
2025-11-20 14:12:59,184 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@357972dc]
2025-11-20 14:12:59,184 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@357972dc]]
2025-11-20 14:12:59,184 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:12:59,184 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:12:59,184 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:12:59,184 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-20 14:12:59,215 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-20 14:12:59,222 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 5.808 seconds (process running for 6.105)
2025-11-20 14:13:59,330 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-20 14:28:05,958 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:28:06,013 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 19120 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:28:06,014 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:28:06,014 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 14:28:06,505 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:28:06,544 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 1 JPA repository interface.
2025-11-20 14:28:07,157 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-20 14:28:07,176 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-20 14:28:07,180 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 14:28:07,180 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 14:28:07,245 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 14:28:07,245 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1191 ms
2025-11-20 14:28:07,287 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 14:28:07,372 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:28:07,435 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:28:07,466 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:28:07,704 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:28:07,731 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:28:07,885 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 14:28:07,888 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:28:07,909 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:28:07,926 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:28:08,658 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:28:08,671 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:28:08,675 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:28:08,680 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:28:08,689 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:28:08,696 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:28:08,696 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:28:08,696 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:28:08,696 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:28:08,696 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:28:08,700 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:28:08,715 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:28:08,916 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:28:10,691 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:28:10,761 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:28:10,789 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:28:10,820 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:28:10,882 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:28:10,882 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:28:10,882 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:28:10,882 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:28:10,969 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:28:10,969 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:28:10,969 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:28:10,969 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:28:10,985 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:28:10,985 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:28:10,985 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:28:11,045 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:28:11,083 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:28:11,185 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:28:11,185 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:28:11,185 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:28:11,185 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]
2025-11-20 14:28:11,185 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]
2025-11-20 14:28:11,185 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]]
2025-11-20 14:28:11,185 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:28:11,185 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:28:11,185 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:28:11,185 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-20 14:28:11,221 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-20 14:28:11,227 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 5.755 seconds (process running for 6.076)
2025-11-20 14:29:41,471 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:29:41,561 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 22924 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:29:41,562 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:29:41,564 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 14:29:42,246 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:29:42,319 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 59 ms. Found 1 JPA repository interface.
2025-11-20 14:29:43,226 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-20 14:29:43,247 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-20 14:29:43,250 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 14:29:43,251 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 14:29:43,321 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 14:29:43,321 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1695 ms
2025-11-20 14:29:43,370 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 14:29:43,465 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:29:43,527 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:29:43,562 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:29:43,805 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:29:43,833 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:29:44,000 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 14:29:44,001 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:29:44,023 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:29:44,041 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:29:44,844 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:29:44,857 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:29:44,860 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:29:44,867 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:29:44,882 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:29:44,887 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:29:44,890 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:29:44,891 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:29:44,891 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:29:44,892 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:29:44,892 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:29:44,908 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:29:45,113 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:29:46,899 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:29:46,971 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:29:47,002 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:29:47,028 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:29:47,091 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:29:47,093 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:29:47,095 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:29:47,096 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:29:47,184 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:29:47,185 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:29:47,185 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:29:47,186 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:29:47,187 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:29:47,187 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:29:47,187 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:29:47,234 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:29:47,277 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:29:47,388 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:29:47,388 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:29:47,388 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:29:47,388 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1e5066ac]
2025-11-20 14:29:47,388 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1e5066ac]
2025-11-20 14:29:47,388 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1e5066ac]]
2025-11-20 14:29:47,388 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:29:47,388 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:29:47,388 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:29:47,391 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-20 14:29:47,418 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-20 14:29:47,424 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.722 seconds (process running for 7.173)
2025-11-20 14:53:57,811 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:53:57,869 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 22964 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:53:57,869 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:53:57,870 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 14:53:58,344 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:53:58,389 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 1 JPA repository interface.
2025-11-20 14:53:59,020 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-20 14:53:59,030 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-20 14:53:59,033 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 14:53:59,033 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 14:53:59,098 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 14:53:59,098 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1189 ms
2025-11-20 14:53:59,140 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 14:53:59,226 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:53:59,284 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:53:59,313 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:53:59,528 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:53:59,553 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:53:59,711 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 14:53:59,713 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:53:59,735 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:53:59,751 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:54:00,502 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:54:00,526 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:54:00,527 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:54:00,537 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:54:00,543 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:54:00,543 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:54:00,543 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:54:00,543 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:54:00,543 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:54:00,543 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:54:00,557 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:54:00,563 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:54:00,781 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:54:02,602 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:54:02,679 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:54:02,708 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:54:02,729 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:54:02,798 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:54:02,800 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:54:02,802 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:54:02,803 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:54:02,890 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:54:02,891 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:54:02,891 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:54:02,892 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:54:02,892 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:54:02,893 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:54:02,893 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:54:02,942 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:54:02,983 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:54:03,091 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:54:03,091 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:54:03,091 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:54:03,092 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]
2025-11-20 14:54:03,092 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]
2025-11-20 14:54:03,092 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]]
2025-11-20 14:54:03,093 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:54:03,093 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:54:03,093 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:54:03,093 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-20 14:54:03,121 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-20 14:54:03,129 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 5.815 seconds (process running for 6.116)
2025-11-20 14:55:03,201 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-20 14:55:07,757 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-20 14:55:07,787 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-20 14:55:07,792 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:55:07,792 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:55:07,792 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-20 14:55:07,792 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]]
2025-11-20 14:55:07,793 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]
2025-11-20 14:55:07,793 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41df8b13]
2025-11-20 14:55:07,793 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-20 14:55:07,793 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:55:07,793 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:55:07,800 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:55:07,805 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:55:07,814 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:55:07,821 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-20 14:55:07,827 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-20 14:58:12,688 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 14:58:12,745 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 26936 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 14:58:12,745 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 14:58:12,746 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 14:58:13,227 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 14:58:13,271 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 1 JPA repository interface.
2025-11-20 14:58:13,880 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-20 14:58:13,899 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-20 14:58:13,901 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 14:58:13,901 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 14:58:13,966 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 14:58:13,967 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1180 ms
2025-11-20 14:58:14,009 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 14:58:14,094 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 14:58:14,151 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 14:58:14,180 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 14:58:14,392 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 14:58:14,418 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 14:58:14,569 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 14:58:14,570 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 14:58:14,593 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 14:58:14,611 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 14:58:15,343 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 14:58:15,357 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:58:15,361 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:58:15,368 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 14:58:15,381 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 14:58:15,385 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 14:58:15,387 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 14:58:15,388 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 14:58:15,388 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 14:58:15,388 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 14:58:15,388 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 14:58:15,404 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:58:15,603 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 14:58:17,359 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 14:58:17,434 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 14:58:17,468 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 14:58:17,491 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 14:58:17,556 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:58:17,556 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:58:17,556 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:58:17,556 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 14:58:17,655 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 14:58:17,655 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 14:58:17,655 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 14:58:17,655 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 14:58:17,655 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 14:58:17,655 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 14:58:17,655 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 14:58:17,717 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 14:58:17,763 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 14:58:17,869 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:58:17,869 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:58:17,870 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 14:58:17,870 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@65618897]
2025-11-20 14:58:17,870 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@65618897]
2025-11-20 14:58:17,871 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@65618897]]
2025-11-20 14:58:17,871 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 14:58:17,872 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:58:17,872 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:58:17,872 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-20 14:58:17,900 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-20 14:58:17,906 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 5.699 seconds (process running for 6.002)
2025-11-20 14:59:17,878 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-20 14:59:18,489 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-20 14:59:18,507 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-20 14:59:18,511 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 14:59:18,512 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 14:59:18,512 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-20 14:59:18,513 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@65618897]]
2025-11-20 14:59:18,513 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@65618897]
2025-11-20 14:59:18,513 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@65618897]
2025-11-20 14:59:18,513 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-20 14:59:18,514 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:59:18,514 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 14:59:18,517 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 14:59:18,519 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 14:59:18,522 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 14:59:18,526 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-20 14:59:18,529 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-20 15:01:25,236 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-20 15:01:25,293 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 27356 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-20 15:01:25,293 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-20 15:01:25,294 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-20 15:01:25,774 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-20 15:01:25,815 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 1 JPA repository interface.
2025-11-20 15:01:26,431 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-20 15:01:26,452 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-20 15:01:26,455 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-20 15:01:26,455 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-20 15:01:26,519 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-20 15:01:26,520 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1185 ms
2025-11-20 15:01:26,562 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-20 15:01:26,650 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-20 15:01:26,708 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-20 15:01:26,736 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-20 15:01:26,962 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-20 15:01:26,994 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-20 15:01:27,172 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-20 15:01:27,173 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-20 15:01:27,195 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-20 15:01:27,215 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-20 15:01:28,069 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-20 15:01:28,072 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-20 15:01:28,087 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-20 15:01:28,092 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-20 15:01:28,102 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-20 15:01:28,102 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-20 15:01:28,102 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-20 15:01:28,102 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-20 15:01:28,102 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-20 15:01:28,102 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-20 15:01:28,112 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-20 15:01:28,121 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-20 15:01:28,333 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-20 15:01:30,100 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-20 15:01:30,168 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 14 mappings in 'requestMappingHandlerMapping'
2025-11-20 15:01:30,199 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-20 15:01:30,220 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-20 15:01:30,279 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 15:01:30,281 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 15:01:30,283 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 15:01:30,284 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-20 15:01:30,369 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-20 15:01:30,370 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-20 15:01:30,370 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-20 15:01:30,371 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-20 15:01:30,371 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-20 15:01:30,372 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-20 15:01:30,372 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-20 15:01:30,420 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-20 15:01:30,461 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-20 15:01:30,564 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-20 15:01:30,564 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-20 15:01:30,564 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-20 15:01:30,565 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5da85657]
2025-11-20 15:01:30,565 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5da85657]
2025-11-20 15:01:30,565 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5da85657]]
2025-11-20 15:01:30,566 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-20 15:01:30,566 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 15:01:30,567 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-20 15:01:30,567 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-20 15:01:30,594 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-20 15:01:30,600 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 5.83 seconds (process running for 6.153)
2025-11-20 15:02:30,592 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-21 14:58:56,562 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 14:58:56,637 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 17808 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 14:58:56,638 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 14:58:56,639 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 14:58:57,490 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 14:58:57,550 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 2 JPA repository interfaces.
2025-11-21 14:58:58,534 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 14:58:58,552 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 14:58:58,555 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 14:58:58,556 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 14:58:58,651 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 14:58:58,651 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1942 ms
2025-11-21 14:58:58,675 ERROR [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [D:\Food Delivery app\tiffin-api\target\classes\com\tiffin\security\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'jwtTokenProvider': Injection of autowired dependencies failed
2025-11-21 14:58:58,704 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-21 14:58:58,718 WARN  [main] [trace=] [user=] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-11-21 14:58:58,728 INFO  [main] [trace=] [user=] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-21 14:58:58,746 ERROR [main] [trace=] [user=] o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:170)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:15)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [D:\Food Delivery app\tiffin-api\target\classes\com\tiffin\security\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'jwtTokenProvider': Injection of autowired dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:230)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:184)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:179)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:164)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:271)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:245)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4464)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:438)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jwtTokenProvider': Injection of autowired dependencies failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:515)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 54 common frames omitted
Caused by: org.springframework.util.PlaceholderResolutionException: Could not resolve placeholder 'app.jwtSecret' in value "${app.jwtSecret}"
	at org.springframework.util.PlaceholderResolutionException.withValue(PlaceholderResolutionException.java:81)
	at org.springframework.util.PlaceholderParser$ParsedValue.resolve(PlaceholderParser.java:423)
	at org.springframework.util.PlaceholderParser.replacePlaceholders(PlaceholderParser.java:128)
	at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:118)
	at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:114)
	at org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:293)
	at org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:264)
	at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:186)
	at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:971)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1650)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	... 66 common frames omitted
2025-11-21 15:01:42,501 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 15:01:42,591 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 30448 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 15:01:42,592 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 15:01:42,593 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 15:01:43,359 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 15:01:43,427 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 56 ms. Found 2 JPA repository interfaces.
2025-11-21 15:01:44,774 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 15:01:44,806 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 15:01:44,812 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 15:01:44,813 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 15:01:44,995 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 15:01:44,997 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2331 ms
2025-11-21 15:01:45,050 ERROR [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [D:\Food Delivery app\tiffin-api\target\classes\com\tiffin\security\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'jwtTokenProvider': Injection of autowired dependencies failed
2025-11-21 15:01:45,115 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-21 15:01:45,142 WARN  [main] [trace=] [user=] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-11-21 15:01:45,163 INFO  [main] [trace=] [user=] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-21 15:01:45,197 ERROR [main] [trace=] [user=] o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Unable to start web server
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:170)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:621)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:15)
Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:147)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.<init>(TomcatWebServer.java:107)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:517)
	at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:219)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:193)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:167)
	... 8 common frames omitted
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'jwtAuthenticationFilter' defined in file [D:\Food Delivery app\tiffin-api\target\classes\com\tiffin\security\JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'jwtTokenProvider': Injection of autowired dependencies failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:230)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:184)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:179)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:164)
	at org.springframework.boot.web.servlet.ServletContextInitializerBeans.<init>(ServletContextInitializerBeans.java:96)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans(ServletWebServerApplicationContext.java:271)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize(ServletWebServerApplicationContext.java:245)
	at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:52)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4464)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:772)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1203)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1193)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:749)
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:203)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:412)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:870)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:164)
	at org.apache.catalina.startup.Tomcat.start(Tomcat.java:438)
	at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:128)
	... 13 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jwtTokenProvider': Injection of autowired dependencies failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:515)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 54 common frames omitted
Caused by: org.springframework.util.PlaceholderResolutionException: Could not resolve placeholder 'app.jwtExpirationInMs' in value "${app.jwtExpirationInMs}"
	at org.springframework.util.PlaceholderResolutionException.withValue(PlaceholderResolutionException.java:81)
	at org.springframework.util.PlaceholderParser$ParsedValue.resolve(PlaceholderParser.java:423)
	at org.springframework.util.PlaceholderParser.replacePlaceholders(PlaceholderParser.java:128)
	at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:118)
	at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:114)
	at org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:293)
	at org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:264)
	at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:186)
	at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:971)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1650)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	... 66 common frames omitted
2025-11-21 15:03:27,144 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 15:03:27,242 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 18792 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 15:03:27,244 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 15:03:27,245 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 15:03:27,999 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 15:03:28,078 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 2 JPA repository interfaces.
2025-11-21 15:03:29,157 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 15:03:29,175 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 15:03:29,179 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 15:03:29,180 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 15:03:29,281 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 15:03:29,281 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1968 ms
2025-11-21 15:03:29,464 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 15:03:29,552 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 15:03:29,610 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 15:03:30,005 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 15:03:30,049 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 15:03:30,352 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 15:03:30,356 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 15:03:30,409 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 15:03:30,435 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 15:03:32,633 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 15:03:32,676 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 15:03:32,688 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 15:03:32,689 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 15:03:32,690 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 15:03:32,692 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 15:03:32,694 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 15:03:32,695 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 15:03:32,711 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 15:03:32,743 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 15:03:32,750 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 15:03:32,753 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 15:03:32,758 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 15:03:32,762 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 15:03:32,768 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 15:03:32,779 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 15:03:32,781 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 15:03:32,784 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 15:03:32,786 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 15:03:32,788 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 15:03:32,792 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:03:32,826 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 15:03:32,830 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 15:03:32,837 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 15:03:32,844 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 15:03:32,848 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:03:32,851 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 15:03:32,856 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:03:32,871 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 15:03:33,402 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 15:03:36,517 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 15:03:36,519 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 15:03:36,584 WARN  [main] [trace=] [user=] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authService' defined in file [D:\Food Delivery app\tiffin-api\target\classes\com\tiffin\auth\service\AuthService.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'org.springframework.security.authentication.AuthenticationManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-11-21 15:03:36,584 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 15:03:36,586 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 15:03:36,589 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 15:03:36,590 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 15:03:36,592 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 15:03:36,593 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 15:03:36,594 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 15:03:36,596 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 15:03:36,599 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 15:03:36,602 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 15:03:36,605 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-21 15:03:36,619 INFO  [main] [trace=] [user=] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-21 15:03:36,644 ERROR [main] [trace=] [user=] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.tiffin.auth.service.AuthService required a bean of type 'org.springframework.security.authentication.AuthenticationManager' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.authentication.AuthenticationManager' in your configuration.

2025-11-21 15:04:28,653 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 15:04:28,742 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 23932 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 15:04:28,743 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 15:04:28,745 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 15:04:29,952 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 15:04:30,041 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74 ms. Found 2 JPA repository interfaces.
2025-11-21 15:04:31,428 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 15:04:31,462 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 15:04:31,466 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 15:04:31,466 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 15:04:31,617 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 15:04:31,618 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2793 ms
2025-11-21 15:04:31,850 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 15:04:31,980 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 15:04:32,096 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 15:04:32,660 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 15:04:32,723 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 15:04:33,200 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 15:04:33,203 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 15:04:33,256 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 15:04:33,293 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 15:04:35,114 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 15:04:35,141 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 15:04:35,147 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 15:04:35,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 15:04:35,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 15:04:35,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 15:04:35,150 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 15:04:35,151 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 15:04:35,159 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 15:04:35,178 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 15:04:35,181 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 15:04:35,184 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 15:04:35,188 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 15:04:35,191 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 15:04:35,195 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 15:04:35,200 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 15:04:35,203 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 15:04:35,204 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 15:04:35,206 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 15:04:35,207 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 15:04:35,209 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:04:35,226 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 15:04:35,228 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 15:04:35,231 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 15:04:35,235 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 15:04:35,238 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:04:35,239 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 15:04:35,242 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:04:35,247 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 15:04:35,607 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 15:04:39,462 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 15:04:39,464 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 15:04:39,657 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 15:04:40,067 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 15:04:40,230 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-11-21 15:04:40,298 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 15:04:40,472 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 15:04:40,477 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 15:04:40,480 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 15:04:40,485 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 15:04:40,659 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-21 15:04:40,660 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-21 15:04:40,660 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-21 15:04:40,662 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-21 15:04:40,663 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-21 15:04:40,664 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-21 15:04:40,664 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-21 15:04:40,782 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-21 15:04:40,857 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-21 15:04:41,197 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 15:04:41,199 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 15:04:41,199 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-21 15:04:41,200 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ba540a5]
2025-11-21 15:04:41,201 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ba540a5]
2025-11-21 15:04:41,202 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5ba540a5]]
2025-11-21 15:04:41,205 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-21 15:04:41,206 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 15:04:41,206 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 15:04:41,207 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-21 15:04:41,275 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-21 15:04:41,287 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 13.554 seconds (process running for 14.287)
2025-11-21 15:05:41,451 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-21 15:21:05,970 WARN  [TiffinHikariCP:housekeeper] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Thread starvation or clock leap detected (housekeeper delta=13m2s472ms450s800ns).
2025-11-21 15:35:50,658 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-21 15:35:50,669 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-21 15:35:50,674 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-21 15:35:50,676 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-21 15:35:50,676 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-21 15:35:50,764 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6bc0b35c
2025-11-21 15:35:50,765 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@587011f0
2025-11-21 15:35:50,769 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-21 15:35:50,770 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 101 ms
2025-11-21 15:37:30,163 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 15:37:30,224 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 9496 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 15:37:30,225 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 15:37:30,225 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 15:37:30,759 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 15:37:30,817 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 2 JPA repository interfaces.
2025-11-21 15:37:31,506 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 15:37:31,517 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 15:37:31,521 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 15:37:31,521 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 15:37:31,591 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 15:37:31,591 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1323 ms
2025-11-21 15:37:31,710 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 15:37:31,762 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 15:37:31,809 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 15:37:32,046 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 15:37:32,072 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 15:37:32,239 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 15:37:32,241 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 15:37:32,267 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 15:37:32,288 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 15:37:33,240 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 15:37:33,254 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 15:37:33,259 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 15:37:33,259 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 15:37:33,260 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 15:37:33,260 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 15:37:33,260 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 15:37:33,260 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 15:37:33,265 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 15:37:33,277 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 15:37:33,279 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 15:37:33,280 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 15:37:33,282 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 15:37:33,283 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 15:37:33,287 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 15:37:33,292 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 15:37:33,293 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 15:37:33,294 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 15:37:33,295 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 15:37:33,295 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 15:37:33,296 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:37:33,309 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 15:37:33,311 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 15:37:33,314 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 15:37:33,316 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 15:37:33,317 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:37:33,319 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 15:37:33,321 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 15:37:33,326 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 15:37:33,584 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 15:37:35,261 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 15:37:35,262 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 15:37:35,313 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 15:37:35,543 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 15:37:35,658 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-11-21 15:37:35,713 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 15:37:35,776 WARN  [main] [trace=] [user=] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/tiffin/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token ")", ElidedSemicolonAndRightBrace expected
	Syntax error, insert ")" to complete MethodInvocation
	Syntax error on token ".", delete this token

2025-11-21 15:37:35,778 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 15:37:35,778 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 15:37:35,780 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 15:37:35,781 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 15:37:35,781 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 15:37:35,783 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 15:37:35,784 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 15:37:35,784 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 15:37:35,787 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 15:37:35,789 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 15:37:35,791 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-21 15:37:35,802 INFO  [main] [trace=] [user=] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-21 15:37:35,816 ERROR [main] [trace=] [user=] o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/tiffin/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token ")", ElidedSemicolonAndRightBrace expected
	Syntax error, insert ")" to complete MethodInvocation
	Syntax error on token ".", delete this token

	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:896)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:849)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/tiffin/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token ")", ElidedSemicolonAndRightBrace expected
	Syntax error, insert ")" to complete MethodInvocation
	Syntax error on token ".", delete this token

	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1996)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1960)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1850)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1818)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1694)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:888)
	... 22 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: Unresolved compilation problems: 
	Syntax error on token ")", ElidedSemicolonAndRightBrace expected
	Syntax error, insert ")" to complete MethodInvocation
	Syntax error on token ".", delete this token

	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:199)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:88)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:168)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 39 common frames omitted
Caused by: java.lang.Error: Unresolved compilation problems: 
	Syntax error on token ")", ElidedSemicolonAndRightBrace expected
	Syntax error, insert ")" to complete MethodInvocation
	Syntax error on token ".", delete this token

	at com.tiffin.config.SecurityConfig.securityFilterChain(SecurityConfig.java:80)
	at com.tiffin.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$securityFilterChain$0(<generated>)
	at com.tiffin.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.tiffin.config.SecurityConfig$$SpringCGLIB$$0.securityFilterChain(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:171)
	... 42 common frames omitted
2025-11-21 16:00:02,680 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 16:00:02,741 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 26008 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 16:00:02,742 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 16:00:02,742 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 16:00:03,301 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 16:00:03,350 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 2 JPA repository interfaces.
2025-11-21 16:00:04,124 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 16:00:04,135 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 16:00:04,138 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 16:00:04,138 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 16:00:04,220 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 16:00:04,221 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1436 ms
2025-11-21 16:00:04,350 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 16:00:04,419 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 16:00:04,450 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 16:00:04,680 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 16:00:04,706 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 16:00:04,859 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 16:00:04,861 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 16:00:04,884 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 16:00:04,903 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 16:00:05,800 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 16:00:05,814 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:00:05,817 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:00:05,818 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:00:05,818 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:00:05,818 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:00:05,819 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:00:05,819 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:00:05,824 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 16:00:05,835 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 16:00:05,839 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 16:00:05,840 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 16:00:05,844 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 16:00:05,845 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 16:00:05,847 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 16:00:05,852 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 16:00:05,853 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 16:00:05,854 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 16:00:05,855 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 16:00:05,856 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 16:00:05,857 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:00:05,869 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 16:00:05,872 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 16:00:05,874 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 16:00:05,875 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 16:00:05,876 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:00:05,878 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 16:00:05,879 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:00:05,884 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:00:06,073 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 16:00:07,778 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 16:00:07,779 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 16:00:07,838 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 16:00:08,085 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 16:00:08,170 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-11-21 16:00:08,206 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 16:00:08,289 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:00:08,291 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:00:08,293 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:00:08,294 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:00:08,383 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-21 16:00:08,384 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-21 16:00:08,384 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-21 16:00:08,385 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-21 16:00:08,385 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-21 16:00:08,386 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-21 16:00:08,386 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-21 16:00:08,466 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-21 16:00:08,515 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-21 16:00:08,646 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:00:08,647 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:00:08,648 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-21 16:00:08,648 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36e7932f]
2025-11-21 16:00:08,648 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36e7932f]
2025-11-21 16:00:08,648 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36e7932f]]
2025-11-21 16:00:08,649 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-21 16:00:08,650 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:00:08,650 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:00:08,650 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-21 16:00:08,683 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-21 16:00:08,690 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.505 seconds (process running for 6.817)
2025-11-21 16:00:49,700 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-21 16:00:49,736 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-21 16:00:49,741 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:00:49,742 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:00:49,742 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-21 16:00:49,742 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36e7932f]]
2025-11-21 16:00:49,743 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36e7932f]
2025-11-21 16:00:49,743 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@36e7932f]
2025-11-21 16:00:49,743 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-21 16:00:49,743 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:00:49,743 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:00:49,748 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:00:49,752 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:00:49,761 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:00:49,761 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:00:49,763 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:00:49,764 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:00:49,764 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:00:49,765 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:00:49,773 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 16:00:49,778 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 16:01:12,532 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 16:01:12,598 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 25400 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 16:01:12,599 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 16:01:12,599 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 16:01:13,174 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 16:01:13,225 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 2 JPA repository interfaces.
2025-11-21 16:01:13,920 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 16:01:13,931 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 16:01:13,933 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 16:01:13,934 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 16:01:14,007 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 16:01:14,008 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1359 ms
2025-11-21 16:01:14,142 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 16:01:14,205 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 16:01:14,237 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 16:01:14,487 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 16:01:14,513 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 16:01:14,674 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 16:01:14,675 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 16:01:14,700 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 16:01:14,721 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 16:01:15,608 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 16:01:15,622 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:01:15,625 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:01:15,626 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:01:15,627 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:01:15,627 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:01:15,627 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:01:15,627 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:01:15,632 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 16:01:15,644 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 16:01:15,648 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 16:01:15,649 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 16:01:15,650 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 16:01:15,652 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 16:01:15,654 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 16:01:15,658 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 16:01:15,659 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 16:01:15,660 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 16:01:15,661 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 16:01:15,662 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 16:01:15,663 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:01:15,675 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 16:01:15,677 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 16:01:15,679 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 16:01:15,682 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 16:01:15,683 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:01:15,685 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 16:01:15,686 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:01:15,691 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:01:15,925 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 16:01:17,560 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 16:01:17,561 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 16:01:17,610 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 16:01:17,799 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 16:01:17,872 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-11-21 16:01:17,923 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 16:01:18,006 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:01:18,009 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:01:18,011 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:01:18,013 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:01:18,142 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-21 16:01:18,143 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-21 16:01:18,143 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-21 16:01:18,144 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-21 16:01:18,144 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-21 16:01:18,145 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-21 16:01:18,145 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-21 16:01:18,232 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-21 16:01:18,282 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-21 16:01:18,416 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:01:18,416 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:01:18,417 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-21 16:01:18,417 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1869512f]
2025-11-21 16:01:18,417 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1869512f]
2025-11-21 16:01:18,417 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1869512f]]
2025-11-21 16:01:18,418 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-21 16:01:18,419 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:01:18,419 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:01:18,419 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-21 16:01:18,481 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-21 16:01:18,488 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.489 seconds (process running for 6.81)
2025-11-21 16:01:45,123 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-21 16:01:45,138 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-21 16:01:45,139 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:01:45,140 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:01:45,140 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-21 16:01:45,140 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1869512f]]
2025-11-21 16:01:45,140 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1869512f]
2025-11-21 16:01:45,141 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1869512f]
2025-11-21 16:01:45,141 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-21 16:01:45,141 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:01:45,141 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:01:45,143 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:01:45,145 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:01:45,147 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:01:45,149 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:01:45,150 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:01:45,150 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:01:45,151 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:01:45,151 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:01:45,154 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 16:01:45,158 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 16:04:09,337 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 16:04:09,407 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 28284 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 16:04:09,407 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 16:04:09,408 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 16:04:10,239 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 16:04:10,286 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 2 JPA repository interfaces.
2025-11-21 16:04:10,926 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 16:04:10,938 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 16:04:10,940 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 16:04:10,941 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 16:04:11,006 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 16:04:11,007 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1557 ms
2025-11-21 16:04:11,117 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 16:04:11,181 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 16:04:11,213 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 16:04:11,434 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 16:04:11,459 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 16:04:11,613 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 16:04:11,614 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 16:04:11,636 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 16:04:11,653 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 16:04:12,612 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 16:04:12,627 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:04:12,631 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:04:12,631 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:04:12,632 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:04:12,632 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:04:12,632 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:04:12,632 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:04:12,638 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 16:04:12,651 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 16:04:12,654 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 16:04:12,655 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 16:04:12,656 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 16:04:12,657 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 16:04:12,660 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 16:04:12,663 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 16:04:12,665 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 16:04:12,666 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 16:04:12,667 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 16:04:12,667 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 16:04:12,668 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:04:12,681 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 16:04:12,682 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 16:04:12,685 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 16:04:12,687 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 16:04:12,689 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:04:12,690 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 16:04:12,691 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:04:12,696 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:04:12,887 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 16:04:14,757 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 16:04:14,757 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 16:04:14,827 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 16:04:15,067 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 16:04:15,141 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 16 mappings in 'requestMappingHandlerMapping'
2025-11-21 16:04:15,173 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 16:04:15,242 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:04:15,243 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:04:15,244 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:04:15,246 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:04:15,330 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-21 16:04:15,330 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-21 16:04:15,330 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-21 16:04:15,332 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-21 16:04:15,332 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-21 16:04:15,333 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-21 16:04:15,333 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-21 16:04:15,403 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-21 16:04:15,446 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-21 16:04:15,555 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:04:15,556 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:04:15,556 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-21 16:04:15,556 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@517ca1dc]
2025-11-21 16:04:15,556 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@517ca1dc]
2025-11-21 16:04:15,556 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@517ca1dc]]
2025-11-21 16:04:15,558 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-21 16:04:15,558 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:04:15,558 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:04:15,558 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-21 16:04:15,587 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-21 16:04:15,593 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 6.751 seconds (process running for 7.057)
2025-11-21 16:05:15,567 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-21 16:08:57,803 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-21 16:08:57,807 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-21 16:08:57,809 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-11-21 16:08:57,810 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-11-21 16:08:57,810 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-11-21 16:08:57,843 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@199fe1dc
2025-11-21 16:08:57,843 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6b0169ce
2025-11-21 16:08:57,845 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-11-21 16:08:57,846 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 37 ms
2025-11-21 16:08:57,924 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - GET "/api/api/dishes?id=10f5f8c1-5bab-47b7-85a9-c1123edbea83&vscodeBrowserReqId=1763721537580", parameters={masked}
2025-11-21 16:08:57,940 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.tiffin.common.exception.GlobalExceptionHandler#handleMethodNotSupportedException(HttpRequestMethodNotSupportedException)
2025-11-21 16:08:57,941 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.c.e.GlobalExceptionHandler -  Method not supported: Request method 'GET' is not supported
2025-11-21 16:08:58,014 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json;q=0.8', given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7] and supported [application/json, application/*+json, application/yaml]
2025-11-21 16:08:58,019 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(success=false, errorCode=METHOD_NOT_ALLOWED, message=HTTP method not supported: GET, t (truncated)...]
2025-11-21 16:08:58,039 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
2025-11-21 16:08:58,040 DEBUG [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed 405 METHOD_NOT_ALLOWED
2025-11-21 16:20:53,095 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-21 16:20:53,162 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-21 16:20:53,175 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:20:53,176 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:20:53,177 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-21 16:20:53,178 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@517ca1dc]]
2025-11-21 16:20:53,179 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@517ca1dc]
2025-11-21 16:20:53,179 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@517ca1dc]
2025-11-21 16:20:53,179 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-21 16:20:53,179 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:20:53,179 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:20:53,208 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:20:53,223 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:20:53,240 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:20:53,243 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:20:53,244 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:20:53,246 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:20:53,248 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:20:53,250 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:20:53,269 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 16:20:53,279 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 16:31:37,368 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 16:31:37,452 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 22808 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 16:31:37,453 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 16:31:37,454 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 16:31:38,076 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 16:31:38,190 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 2 JPA repository interfaces.
2025-11-21 16:31:39,049 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 16:31:39,061 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 16:31:39,064 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 16:31:39,064 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 16:31:39,130 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 16:31:39,130 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1611 ms
2025-11-21 16:31:39,259 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 16:31:39,332 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 16:31:39,372 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 16:31:39,614 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 16:31:39,640 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 16:31:39,814 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 16:31:39,817 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 16:31:39,840 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 16:31:39,858 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 16:31:40,855 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 16:31:40,875 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:31:40,881 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:31:40,882 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:31:40,883 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:31:40,884 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:31:40,885 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:31:40,885 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:31:40,892 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 16:31:40,907 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 16:31:40,910 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 16:31:40,912 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 16:31:40,914 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 16:31:40,915 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 16:31:40,916 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 16:31:40,921 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 16:31:40,921 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 16:31:40,922 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 16:31:40,922 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 16:31:40,923 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 16:31:40,925 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:31:40,939 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 16:31:40,940 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 16:31:40,943 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 16:31:40,944 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 16:31:40,946 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:31:40,948 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 16:31:40,949 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:31:40,954 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:31:41,164 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 16:31:43,491 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 16:31:43,491 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 16:31:43,592 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 16:31:43,621 WARN  [main] [trace=] [user=] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dishController' defined in file [D:\Food Delivery app\tiffin-api\target\classes\com\tiffin\menu\controller\DishController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.tiffin.menu.repository.DishRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-11-21 16:31:43,622 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:31:43,623 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:31:43,626 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:31:43,628 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:31:43,629 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:31:43,630 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:31:43,631 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:31:43,633 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:31:43,636 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 16:31:43,640 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 16:31:43,641 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-21 16:31:43,654 INFO  [main] [trace=] [user=] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-21 16:31:43,676 ERROR [main] [trace=] [user=] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.tiffin.menu.controller.DishController required a bean of type 'com.tiffin.menu.repository.DishRepository' that could not be found.


Action:

Consider defining a bean of type 'com.tiffin.menu.repository.DishRepository' in your configuration.

2025-11-21 16:34:46,397 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 16:34:46,474 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 7028 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 16:34:46,474 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 16:34:46,475 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 16:34:47,142 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 16:34:47,199 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 49 ms. Found 3 JPA repository interfaces.
2025-11-21 16:34:48,147 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 16:34:48,164 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 16:34:48,167 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 16:34:48,168 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 16:34:48,273 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 16:34:48,274 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1742 ms
2025-11-21 16:34:48,465 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 16:34:48,541 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 16:34:48,581 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 16:34:48,898 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 16:34:48,940 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 16:34:49,168 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 16:34:49,170 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 16:34:49,206 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 16:34:49,245 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 16:34:50,626 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 16:34:50,644 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:34:50,648 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:34:50,649 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:34:50,650 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:34:50,651 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:34:50,651 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:34:50,651 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:34:50,658 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 16:34:50,674 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 16:34:50,678 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 16:34:50,680 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 16:34:50,682 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 16:34:50,683 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 16:34:50,687 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 16:34:50,692 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 16:34:50,694 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 16:34:50,696 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 16:34:50,698 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 16:34:50,701 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 16:34:50,704 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:34:50,721 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 16:34:50,723 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 16:34:50,726 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 16:34:50,729 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 16:34:50,731 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:34:50,732 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 16:34:50,735 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:34:50,741 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:34:50,985 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 16:34:53,110 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 16:34:53,110 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 16:34:53,178 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 16:34:53,466 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 16:34:53,550 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-21 16:34:53,589 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 16:34:53,664 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:34:53,666 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:34:53,668 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:34:53,669 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:34:53,770 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-21 16:34:53,771 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-21 16:34:53,771 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-21 16:34:53,771 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-21 16:34:53,773 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-21 16:34:53,773 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-21 16:34:53,774 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-21 16:34:53,774 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-21 16:34:53,884 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-21 16:34:53,963 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-21 16:34:54,167 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:34:54,168 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:34:54,169 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-21 16:34:54,169 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@159eb5f4]
2025-11-21 16:34:54,169 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@159eb5f4]
2025-11-21 16:34:54,170 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@159eb5f4]]
2025-11-21 16:34:54,172 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-21 16:34:54,173 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:34:54,173 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:34:54,173 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-21 16:34:54,236 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-21 16:34:54,245 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.741 seconds (process running for 9.533)
2025-11-21 16:34:54,331 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-21 16:34:54,383 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-21 16:34:54,409 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,434 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,437 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,439 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,442 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,444 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,446 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,449 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,456 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,460 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,465 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,468 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:34:54,470 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-21 16:35:54,174 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-21 16:46:07,990 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-21 16:46:08,064 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-21 16:46:08,076 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:46:08,078 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:46:08,078 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-21 16:46:08,080 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@159eb5f4]]
2025-11-21 16:46:08,080 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@159eb5f4]
2025-11-21 16:46:08,080 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@159eb5f4]
2025-11-21 16:46:08,080 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-21 16:46:08,080 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:46:08,080 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:46:08,095 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:46:08,110 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:46:08,130 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:46:08,131 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:46:08,132 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:46:08,133 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:46:08,133 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:46:08,133 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:46:08,158 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 16:46:08,167 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 16:58:42,925 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 16:58:43,064 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 12416 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 16:58:43,066 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 16:58:43,067 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 16:58:44,454 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 16:58:44,587 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 3 JPA repository interfaces.
2025-11-21 16:58:46,350 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 16:58:46,378 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 16:58:46,383 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 16:58:46,384 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 16:58:46,527 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 16:58:46,528 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3350 ms
2025-11-21 16:58:46,814 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 16:58:46,995 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 16:58:47,087 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 16:58:47,693 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 16:58:47,775 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 16:58:48,247 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 16:58:48,252 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 16:58:48,323 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 16:58:48,378 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 16:58:50,426 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 16:58:50,452 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:58:50,458 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:58:50,458 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:58:50,459 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:58:50,459 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:58:50,460 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:58:50,461 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:58:50,472 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 16:58:50,493 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 16:58:50,499 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 16:58:50,502 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 16:58:50,506 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 16:58:50,508 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 16:58:50,513 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 16:58:50,519 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 16:58:50,522 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 16:58:50,524 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 16:58:50,525 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 16:58:50,526 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 16:58:50,527 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:58:50,549 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 16:58:50,552 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 16:58:50,556 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 16:58:50,558 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 16:58:50,560 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:58:50,563 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 16:58:50,566 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 16:58:50,573 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:58:51,032 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 16:58:54,000 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 16:58:54,000 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 16:58:54,091 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 16:58:54,403 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 16:58:54,503 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-21 16:58:54,550 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 16:58:54,669 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:58:54,672 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:58:54,674 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:58:54,677 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 16:58:54,810 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-21 16:58:54,811 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-21 16:58:54,811 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-21 16:58:54,811 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-21 16:58:54,814 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-21 16:58:54,815 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-21 16:58:54,816 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-21 16:58:54,816 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-21 16:58:54,957 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-21 16:58:55,053 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-21 16:58:55,360 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:58:55,361 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:58:55,362 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-21 16:58:55,363 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7bf974a1]
2025-11-21 16:58:55,363 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7bf974a1]
2025-11-21 16:58:55,364 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7bf974a1]]
2025-11-21 16:58:55,365 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-21 16:58:55,365 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:58:55,366 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:58:55,366 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-21 16:58:55,418 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-21 16:58:55,430 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 13.677 seconds (process running for 14.485)
2025-11-21 16:58:55,521 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-21 16:58:55,575 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-21 16:58:55,624 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,652 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,657 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,660 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,665 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,669 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,672 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,674 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,676 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,680 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,684 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,687 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 16:58:55,689 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
2025-11-21 16:59:33,682 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-21 16:59:33,717 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-21 16:59:33,721 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 16:59:33,722 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 16:59:33,723 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-21 16:59:33,723 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7bf974a1]]
2025-11-21 16:59:33,724 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7bf974a1]
2025-11-21 16:59:33,725 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7bf974a1]
2025-11-21 16:59:33,725 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-21 16:59:33,725 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:59:33,726 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 16:59:33,731 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 16:59:33,736 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 16:59:33,743 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 16:59:33,744 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 16:59:33,746 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 16:59:33,747 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 16:59:33,747 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 16:59:33,749 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 16:59:33,755 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-21 16:59:33,761 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-21 17:26:29,139 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-21 17:26:29,299 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 24608 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-21 17:26:29,300 DEBUG [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Running with Spring Boot v3.5.2, Spring v6.2.8
2025-11-21 17:26:29,302 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-21 17:26:30,579 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-21 17:26:30,727 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 118 ms. Found 3 JPA repository interfaces.
2025-11-21 17:26:32,078 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-21 17:26:32,101 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-21 17:26:32,106 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-21 17:26:32,107 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-21 17:26:32,225 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-21 17:26:32,225 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2772 ms
2025-11-21 17:26:32,425 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-21 17:26:32,526 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-21 17:26:32,577 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-21 17:26:33,086 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-21 17:26:33,127 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-21 17:26:33,371 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection conn0: url=jdbc:h2:mem:tiffin user=SA
2025-11-21 17:26:33,373 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-21 17:26:33,410 WARN  [main] [trace=] [user=] org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-21 17:26:33,440 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-21 17:26:35,234 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-21 17:26:35,264 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade 
2025-11-21 17:26:35,272 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade 
2025-11-21 17:26:35,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade 
2025-11-21 17:26:35,274 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade 
2025-11-21 17:26:35,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "plans" cascade 
2025-11-21 17:26:35,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "subscriptions" cascade 
2025-11-21 17:26:35,276 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade 
2025-11-21 17:26:35,285 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-21 17:26:35,305 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "calories" integer not null,
        "carbs" float(53) not null,
        "fat" float(53) not null,
        "isAvailable" boolean not null,
        "isBestseller" boolean not null,
        "isGlutenFree" boolean not null,
        "isJain" boolean not null,
        "isVegan" boolean not null,
        "isVegetarian" boolean not null,
        "price" float(53) not null,
        "protein" float(53) not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255),
        "category" enum ('BREAKFAST','DINNER','LUNCH','SNACK'),
        primary key ("id")
    )
2025-11-21 17:26:35,311 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "price" float(53) not null,
        "quantity" integer not null,
        "dish_id" bigint,
        "id" bigint generated by default as identity,
        "order_id" bigint,
        primary key ("id")
    )
2025-11-21 17:26:35,313 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" float(53) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "delivery_partner_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6),
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255),
        "specialInstructions" varchar(255),
        "status" enum ('CANCELLED','CONFIRMED','DELIVERED','OUT_FOR_DELIVERY','PENDING','PREPARING'),
        primary key ("id")
    )
2025-11-21 17:26:35,315 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "plans" (
        "discountPercentage" float(53) not null,
        "durationDays" integer not null,
        "price" float(53) not null,
        "totalMeals" integer not null,
        "id" bigint generated by default as identity,
        "description" varchar(255),
        "name" varchar(255),
        primary key ("id")
    )
2025-11-21 17:26:35,317 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "subscriptions" (
        "endDate" date,
        "hasSmartTiffin" boolean not null,
        "mealsRemaining" integer not null,
        "startDate" date,
        "id" bigint generated by default as identity,
        "plan_id" bigint,
        "user_id" bigint,
        "mealTime" enum ('BOTH','DINNER','LUNCH'),
        "status" enum ('ACTIVE','CANCELLED','EXPIRED','PAUSED'),
        primary key ("id")
    )
2025-11-21 17:26:35,322 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        "role" enum ('ADMIN','DELIVERY_PERSON','PREMIUM_USER','RESTAURANT_PARTNER','SUPER_ADMIN','USER') not null,
        primary key ("id")
    )
2025-11-21 17:26:35,328 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_user" 
       on "addresses" ("user_id")
2025-11-21 17:26:35,330 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_address_default" 
       on "addresses" ("user_id", "isDefault")
2025-11-21 17:26:35,331 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_email" 
       on "users" ("email")
2025-11-21 17:26:35,332 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_phone" 
       on "users" ("phoneNumber")
2025-11-21 17:26:35,333 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index "idx_user_role" 
       on "users" ("role")
2025-11-21 17:26:35,335 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-21 17:26:35,358 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-21 17:26:35,360 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-21 17:26:35,365 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-21 17:26:35,368 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK6m1xjpp1pmkwaa7k9fqqnycf4" 
       foreign key ("delivery_partner_id") 
       references "users"
2025-11-21 17:26:35,372 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-21 17:26:35,374 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FKsfnr5qqe7j6vdxcqo0v4q86hu" 
       foreign key ("plan_id") 
       references "plans"
2025-11-21 17:26:35,377 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "subscriptions" 
       add constraint "FK54j1tnvqvb4o47gxybmfs97f9" 
       foreign key ("user_id") 
       references "users"
2025-11-21 17:26:35,385 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-21 17:26:35,684 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-21 17:26:38,756 DEBUG [main] [trace=] [user=] c.t.security.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-21 17:26:38,758 DEBUG [main] [trace=] [user=] c.tiffin.config.RateLimitingFilter - Filter 'rateLimitingFilter' configured for use
2025-11-21 17:26:38,910 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-21 17:26:39,525 DEBUG [main] [trace=] [user=] o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws-mobile] in 'stompWebSocketHandlerMapping'
2025-11-21 17:26:39,675 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 22 mappings in 'requestMappingHandlerMapping'
2025-11-21 17:26:39,755 DEBUG [main] [trace=] [user=] o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-11-21 17:26:39,893 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/dishes/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 17:26:39,897 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/restaurants/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 17:26:39,900 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [GET, /api/landing/**] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 17:26:39,903 WARN  [main] [trace=] [user=] o.s.s.c.a.w.c.AuthorizeHttpRequestsConfigurer$AuthorizationManagerRequestMatcherRegistry - One of the patterns in [POST, /api/newsletter/subscribe] is missing a leading slash. This is discouraged; please include the leading slash in all your request matcher patterns. In future versions of Spring Security, leaving out the leading slash will result in an exception.
2025-11-21 17:26:40,078 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.a.c.AuthController:
	
2025-11-21 17:26:40,080 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.c.CorsController:
	
2025-11-21 17:26:40,081 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.h.HealthController:
	
2025-11-21 17:26:40,081 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.m.c.DishController:
	
2025-11-21 17:26:40,083 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-21 17:26:40,085 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-21 17:26:40,086 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-21 17:26:40,087 DEBUG [main] [trace=] [user=] o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-21 17:26:40,262 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-11-21 17:26:40,367 DEBUG [main] [trace=] [user=] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-11-21 17:26:40,612 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-21 17:26:40,613 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-21 17:26:40,614 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-21 17:26:40,615 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@28f9873c]
2025-11-21 17:26:40,615 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@28f9873c]
2025-11-21 17:26:40,615 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@28f9873c]]
2025-11-21 17:26:40,616 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-21 17:26:40,617 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 17:26:40,618 DEBUG [main] [trace=] [user=] org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-21 17:26:40,619 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-21 17:26:40,677 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-21 17:26:40,689 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 12.845 seconds (process running for 13.511)
2025-11-21 17:26:40,799 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        count(*) 
    from
        "dishes" d1_0
2025-11-21 17:26:40,852 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Creating sample dishes...
2025-11-21 17:26:40,898 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,933 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,938 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,942 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,945 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,948 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,951 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,956 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,959 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,963 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,965 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,970 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "dishes"
        ("calories", "carbs", "category", "description", "fat", "imageUrl", "isAvailable", "isBestseller", "isGlutenFree", "isJain", "isVegan", "isVegetarian", "name", "price", "protein", "id") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-11-21 17:26:40,973 INFO  [main] [trace=] [user=] c.t.config.SampleDataInitializer - Sample dishes created successfully!
