2025-11-08 13:00:27,676 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:00:27,774 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 28864 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:00:27,776 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:00:29,355 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:00:29,522 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 153 ms. Found 15 JPA repository interfaces.
2025-11-08 13:00:30,316 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:00:30,335 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:00:30,338 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:00:30,338 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:00:30,431 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:00:30,431 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2583 ms
2025-11-08 13:00:30,631 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:00:30,691 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:00:30,738 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:00:31,273 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:00:31,366 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:00:31,680 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@e706aa
2025-11-08 13:00:31,682 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:00:31,785 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:00:33,885 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:00:33,917 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:00:33,922 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:00:34,052 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:00:34,056 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:00:34,059 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:00:34,061 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:00:34,064 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:00:34,066 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:00:34,069 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:00:34,072 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:00:34,075 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:00:34,099 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:00:34,106 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:00:34,109 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:00:34,111 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:00:34,117 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:00:34,121 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:00:34,122 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:00:34,130 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:00:34,137 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:00:34,140 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:00:34,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:00:34,151 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:00:34,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:00:34,161 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:00:34,171 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:00:34,176 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:00:34,186 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:00:34,195 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:00:34,212 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:00:34,266 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:00:34,341 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:00:34,353 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:00:34,357 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:00:34,361 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:00:34,376 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:00:34,388 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:00:34,393 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:00:34,394 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:00:34,398 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:00:34,406 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:00:34,415 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:00:34,420 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:00:34,422 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:00:34,425 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:00:34,435 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:00:34,438 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:00:34,441 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:00:34,449 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:00:34,459 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:00:34,470 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:00:34,481 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:00:34,495 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:00:34,507 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:00:34,528 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:00:34,533 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:00:34,538 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:00:34,544 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:00:34,549 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:00:34,555 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:00:34,584 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:00:34,589 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:00:34,593 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:00:34,598 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:00:34,601 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:00:34,607 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:00:34,612 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:00:34,616 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:00:34,621 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:00:34,623 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:00:34,634 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:00:35,194 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:00:42,335 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:00:42,336 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:00:42,579 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:00:42,579 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:00:43,053 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:00:43,504 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:00:43,505 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@27dec470]]
2025-11-08 13:00:43,507 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:00:43,508 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:00:43,536 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:00:43,545 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 17.064 seconds (process running for 18.093)
2025-11-08 13:01:43,989 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:02:35,738 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-08 13:02:35,753 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-08 13:02:35,870 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 117 ms
2025-11-08 13:06:02,482 WARN  [http-nio-8081-exec-5] [trace=] [user=] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.tiffin.auth.dto.AuthResponse> com.tiffin.auth.controller.AuthController.sendOtp(com.tiffin.auth.dto.OtpRequest) with 2 errors: [Field error in object 'otpRequest' on field 'phone': rejected value [+1234567890]; codes [Size.otpRequest.phone,Size.phone,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [otpRequest.phone,phone]; arguments []; default message [phone],10,10]; default message [Phone number must be 10 digits]] [Field error in object 'otpRequest' on field 'phone': rejected value [+1234567890]; codes [Pattern.otpRequest.phone,Pattern.phone,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [otpRequest.phone,phone]; arguments []; default message [phone],[Ljakarta.validation.constraints.Pattern$Flag;@39c7c92e,^[6-9]\d{9}$]; default message [Invalid phone number format]] ]
2025-11-08 13:07:05,143 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:07:05,143 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:07:05,324 WARN  [http-nio-8081-exec-9] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:07:05,363 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:07:05,370 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:07:11,317 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 13:07:11,319 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 13:07:11,328 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated OTP for 9045394959: 867851 (OTP ID: otp_1762587431326)
2025-11-08 13:07:11,331 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 13:07:16,971 INFO  [http-nio-8081-exec-10] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 13:07:16,971 INFO  [http-nio-8081-exec-10] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959
2025-11-08 13:07:16,971 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.a.service.AuthenticationService -  Invalid or expired OTP for phone: 9045394959
2025-11-08 13:07:16,971 ERROR [http-nio-8081-exec-10] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification failed - Phone: 9045394959, Error: Invalid or expired OTP
2025-11-08 13:13:48,016 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:13:48,059 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 16504 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:13:48,060 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:13:48,746 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:13:48,845 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 15 JPA repository interfaces.
2025-11-08 13:13:49,288 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:13:49,305 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:13:49,308 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:13:49,308 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:13:49,377 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:13:49,377 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1277 ms
2025-11-08 13:13:49,510 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:13:49,558 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:13:49,593 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:13:49,832 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:13:49,858 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:13:49,982 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@6bf0f70a
2025-11-08 13:13:49,983 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:13:50,057 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:13:51,120 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:13:51,143 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:13:51,145 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:13:51,160 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:13:51,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:13:51,164 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:13:51,165 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:13:51,167 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:13:51,169 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:13:51,170 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:13:51,171 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:13:51,173 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:13:51,185 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:13:51,190 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:13:51,192 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:13:51,194 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:13:51,198 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:13:51,200 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:13:51,200 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:13:51,203 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:13:51,208 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:13:51,210 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:13:51,210 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:13:51,215 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:13:51,216 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:13:51,219 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:13:51,225 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:13:51,229 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:13:51,233 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:13:51,239 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:13:51,243 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:13:51,254 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:13:51,274 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:13:51,282 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:13:51,285 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:13:51,287 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:13:51,296 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:13:51,304 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:13:51,307 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:13:51,308 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:13:51,309 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:13:51,315 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:13:51,322 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:13:51,325 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:13:51,327 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:13:51,328 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:13:51,335 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:13:51,336 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:13:51,338 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:13:51,342 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:13:51,351 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:13:51,358 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:13:51,364 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:13:51,371 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:13:51,379 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:13:51,389 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:13:51,391 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:13:51,392 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:13:51,395 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:13:51,397 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:13:51,399 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:13:51,409 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:13:51,411 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:13:51,413 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:13:51,415 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:13:51,416 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:13:51,418 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:13:51,420 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:13:51,421 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:13:51,422 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:13:51,423 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:13:51,427 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:13:51,653 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:13:54,997 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:13:54,997 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:13:55,117 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:13:55,117 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:13:55,525 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:13:55,908 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:13:55,908 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4d1df80e]]
2025-11-08 13:13:55,908 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:13:55,909 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:13:55,931 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:13:55,936 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.407 seconds (process running for 8.7)
2025-11-08 13:14:55,921 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:15:16,691 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-08 13:15:16,697 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-08 13:15:16,699 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-08 13:15:16,699 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4d1df80e]]
2025-11-08 13:15:16,699 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-08 13:15:16,704 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:15:16,706 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:15:16,710 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:15:16,715 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:15:16,717 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:15:16,718 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:15:16,720 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:15:16,723 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:15:16,725 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:15:16,726 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:15:16,728 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:15:16,729 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:15:16,739 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:15:16,744 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:15:16,745 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:15:16,747 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:15:16,751 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:15:16,752 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:15:16,752 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:15:16,756 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:15:16,759 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:15:16,761 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:15:16,761 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:15:16,765 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:15:16,766 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:15:16,769 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:15:16,772 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:15:16,775 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:15:16,778 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:15:16,783 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:15:16,787 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:15:16,795 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-08 13:15:16,798 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-08 13:16:13,837 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:16:13,888 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 13760 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:16:13,889 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:16:14,505 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:16:14,604 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 15 JPA repository interfaces.
2025-11-08 13:16:15,012 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:16:15,022 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:16:15,025 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:16:15,025 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:16:15,079 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:16:15,079 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1143 ms
2025-11-08 13:16:15,210 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:16:15,259 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:16:15,296 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:16:15,643 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:16:15,695 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:16:15,861 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@52d63b7e
2025-11-08 13:16:15,862 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:16:16,019 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:16:17,112 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:16:17,141 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:16:17,144 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:16:17,146 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:16:17,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:16:17,149 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:16:17,150 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:16:17,150 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:16:17,151 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:16:17,152 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:16:17,152 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:16:17,153 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:16:17,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:16:17,155 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:16:17,156 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:16:17,156 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:16:17,156 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:16:17,157 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:16:17,157 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:16:17,158 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:16:17,159 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:16:17,160 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:16:17,161 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:16:17,161 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:16:17,162 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:16:17,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:16:17,163 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:16:17,164 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:16:17,165 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:16:17,166 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:16:17,166 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:16:17,176 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:16:17,191 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:16:17,199 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:16:17,202 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:16:17,204 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:16:17,211 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:16:17,218 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:16:17,221 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:16:17,224 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:16:17,225 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:16:17,231 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:16:17,237 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:16:17,241 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:16:17,242 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:16:17,244 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:16:17,252 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:16:17,254 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:16:17,255 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:16:17,261 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:16:17,268 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:16:17,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:16:17,279 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:16:17,287 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:16:17,295 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:16:17,304 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:16:17,306 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:16:17,309 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:16:17,312 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:16:17,314 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:16:17,316 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:16:17,323 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:16:17,325 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:16:17,326 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:16:17,328 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:16:17,329 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:16:17,332 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:16:17,335 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:16:17,336 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:16:17,338 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:16:17,338 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:16:17,343 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:16:17,547 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:16:21,030 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:16:21,030 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:16:21,134 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:16:21,135 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:16:21,423 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:16:21,651 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:16:21,652 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1e98f201]]
2025-11-08 13:16:21,653 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:16:21,653 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:16:21,670 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:16:21,675 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.249 seconds (process running for 8.543)
2025-11-08 13:17:21,658 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:20:51,180 INFO  [http-nio-8081-exec-3] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-08 13:20:51,182 INFO  [http-nio-8081-exec-3] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-08 13:20:51,198 INFO  [http-nio-8081-exec-3] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 15 ms
2025-11-08 13:20:51,460 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:20:51,460 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:20:51,531 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:20:51,596 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:20:51,598 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:20:56,863 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 13:20:56,863 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 13:20:56,863 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated OTP for 9045394959: 265113 (OTP ID: otp_1762588256863)
2025-11-08 13:20:56,863 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 13:21:01,649 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 13:21:01,649 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959
2025-11-08 13:21:01,649 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Invalid or expired OTP for phone: 9045394959
2025-11-08 13:21:01,656 ERROR [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification failed - Phone: 9045394959, Error: Invalid or expired OTP
2025-11-08 13:23:47,174 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-08 13:23:47,228 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-08 13:23:47,257 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-08 13:23:47,260 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1e98f201]]
2025-11-08 13:23:47,260 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-08 13:23:47,312 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:23:47,359 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:23:47,375 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:23:47,403 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:23:47,408 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:23:47,409 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:23:47,410 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:23:47,412 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:23:47,413 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:23:47,414 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:23:47,416 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:23:47,417 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:23:47,435 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:23:47,442 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:23:47,444 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:23:47,445 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:23:47,451 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:23:47,452 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:23:47,453 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:23:47,458 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:23:47,463 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:23:47,465 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:23:47,466 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:23:47,473 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:23:47,473 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:23:47,478 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:23:47,487 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:23:47,492 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:23:47,498 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:23:47,506 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:23:47,513 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:23:47,565 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-08 13:23:47,585 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-08 13:26:29,164 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:26:29,210 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 14536 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:26:29,211 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:26:29,876 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:26:29,973 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 88 ms. Found 15 JPA repository interfaces.
2025-11-08 13:26:30,461 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:26:30,472 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:26:30,475 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:26:30,475 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:26:30,527 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:26:30,528 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1279 ms
2025-11-08 13:26:30,667 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:26:30,714 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:26:30,751 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:26:30,974 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:26:30,999 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:26:31,113 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@5310e451
2025-11-08 13:26:31,115 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:26:31,184 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:26:32,255 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:26:32,268 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:26:32,269 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:26:32,270 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:26:32,271 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:26:32,271 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:26:32,271 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:26:32,272 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:26:32,272 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:26:32,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:26:32,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:26:32,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:26:32,274 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:26:32,274 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:26:32,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:26:32,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:26:32,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:26:32,276 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:26:32,276 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:26:32,276 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:26:32,277 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:26:32,277 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:26:32,277 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:26:32,278 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:26:32,278 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:26:32,278 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:26:32,279 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:26:32,279 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:26:32,279 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:26:32,280 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:26:32,280 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:26:32,286 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:26:32,311 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:26:32,319 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:26:32,321 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:26:32,323 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:26:32,330 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:26:32,338 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:26:32,342 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:26:32,343 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:26:32,345 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:26:32,350 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:26:32,358 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:26:32,361 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:26:32,362 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:26:32,364 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:26:32,371 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:26:32,373 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:26:32,374 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:26:32,378 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:26:32,386 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:26:32,391 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:26:32,397 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:26:32,405 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:26:32,413 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:26:32,423 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:26:32,425 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:26:32,427 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:26:32,429 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:26:32,430 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:26:32,432 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:26:32,443 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:26:32,445 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:26:32,447 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:26:32,449 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:26:32,450 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:26:32,453 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:26:32,454 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:26:32,456 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:26:32,458 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:26:32,459 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:26:32,463 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:26:32,688 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:26:36,183 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:26:36,183 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:26:36,308 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:26:36,309 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:26:36,656 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:26:36,901 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:26:36,901 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4d1df80e]]
2025-11-08 13:26:36,901 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:26:36,901 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:26:36,920 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:26:36,927 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.274 seconds (process running for 8.568)
2025-11-08 13:27:36,916 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:28:18,278 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-08 13:28:18,284 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-08 13:28:18,286 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-08 13:28:18,287 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4d1df80e]]
2025-11-08 13:28:18,287 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-08 13:28:18,291 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:28:18,293 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:28:18,295 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:28:18,301 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:28:18,303 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:28:18,304 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:28:18,304 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:28:18,305 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:28:18,306 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:28:18,308 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:28:18,309 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:28:18,311 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:28:18,318 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:28:18,322 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:28:18,324 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:28:18,325 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:28:18,328 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:28:18,329 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:28:18,329 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:28:18,332 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:28:18,336 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:28:18,337 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:28:18,338 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:28:18,341 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:28:18,342 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:28:18,345 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:28:18,349 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:28:18,352 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:28:18,356 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:28:18,359 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:28:18,364 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:28:18,372 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-08 13:28:18,374 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-08 13:30:43,883 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:30:43,920 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 10844 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:30:43,921 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:30:44,535 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:30:44,648 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 106 ms. Found 15 JPA repository interfaces.
2025-11-08 13:30:45,049 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:30:45,058 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:30:45,060 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:30:45,061 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:30:45,106 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:30:45,107 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1153 ms
2025-11-08 13:30:45,225 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:30:45,262 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:30:45,296 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:30:45,484 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:30:45,504 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:30:45,617 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@6906be0f
2025-11-08 13:30:45,619 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:30:45,672 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:30:46,751 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:30:46,768 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:30:46,770 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:30:46,772 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:30:46,772 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:30:46,773 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:30:46,774 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:30:46,775 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:30:46,777 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:30:46,778 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:30:46,779 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:30:46,780 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:30:46,781 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:30:46,782 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:30:46,782 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:30:46,783 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:30:46,784 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:30:46,785 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:30:46,786 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:30:46,787 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:30:46,788 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:30:46,788 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:30:46,790 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:30:46,792 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:30:46,793 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:30:46,794 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:30:46,794 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:30:46,795 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:30:46,797 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:30:46,799 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:30:46,799 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:30:46,806 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:30:46,823 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:30:46,832 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:30:46,834 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:30:46,837 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:30:46,844 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:30:46,850 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:30:46,854 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:30:46,856 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:30:46,857 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:30:46,863 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:30:46,870 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:30:46,874 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:30:46,875 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:30:46,877 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:30:46,887 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:30:46,889 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:30:46,891 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:30:46,897 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:30:46,905 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:30:46,911 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:30:46,917 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:30:46,925 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:30:46,933 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:30:46,948 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:30:46,951 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:30:46,953 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:30:46,956 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:30:46,959 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:30:46,962 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:30:46,969 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:30:46,973 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:30:46,974 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:30:46,975 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:30:46,977 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:30:46,980 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:30:46,983 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:30:46,986 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:30:46,988 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:30:46,989 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:30:46,995 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:30:47,229 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:30:50,631 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:30:50,631 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:30:50,723 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:30:50,724 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:30:51,010 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:30:51,257 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:30:51,258 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f65aa8c]]
2025-11-08 13:30:51,258 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:30:51,259 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:30:51,274 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:30:51,280 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 7.824 seconds (process running for 8.074)
2025-11-08 13:31:51,271 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:34:10,801 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-08 13:34:10,807 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-08 13:34:10,809 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-08 13:34:10,810 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@f65aa8c]]
2025-11-08 13:34:10,810 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-08 13:34:10,814 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:34:10,816 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:34:10,817 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:34:10,824 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:34:10,827 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:34:10,829 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:34:10,831 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:34:10,834 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:34:10,835 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:34:10,837 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:34:10,838 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:34:10,839 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:34:10,848 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:34:10,852 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:34:10,854 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:34:10,856 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:34:10,859 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:34:10,859 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:34:10,860 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:34:10,864 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:34:10,868 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:34:10,870 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:34:10,870 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:34:10,873 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:34:10,874 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:34:10,878 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:34:10,881 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:34:10,884 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:34:10,886 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:34:10,891 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:34:10,895 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:34:10,903 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-08 13:34:10,905 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-08 13:34:31,396 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:34:31,440 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 16980 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:34:31,441 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:34:32,108 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:34:32,214 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 99 ms. Found 15 JPA repository interfaces.
2025-11-08 13:34:32,629 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:34:32,639 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:34:32,642 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:34:32,643 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:34:32,694 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:34:32,695 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1204 ms
2025-11-08 13:34:32,811 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:34:32,859 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:34:32,898 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:34:33,087 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:34:33,111 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:34:33,331 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@52d63b7e
2025-11-08 13:34:33,332 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:34:33,397 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:34:34,470 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:34:34,483 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:34:34,484 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:34:34,485 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:34:34,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:34:34,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:34:34,486 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:34:34,487 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:34:34,487 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:34:34,488 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:34:34,488 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:34:34,488 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:34:34,489 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:34:34,489 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:34:34,489 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:34:34,490 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:34:34,490 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:34:34,491 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:34:34,491 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:34:34,491 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:34:34,492 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:34:34,492 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:34:34,492 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:34:34,493 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:34:34,493 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:34:34,493 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:34:34,494 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:34:34,494 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:34:34,495 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:34:34,495 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:34:34,496 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:34:34,504 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:34:34,517 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:34:34,523 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:34:34,526 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:34:34,528 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:34:34,534 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:34:34,539 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:34:34,542 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:34:34,545 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:34:34,546 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:34:34,551 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:34:34,557 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:34:34,559 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:34:34,561 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:34:34,563 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:34:34,569 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:34:34,571 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:34:34,572 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:34:34,577 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:34:34,585 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:34:34,590 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:34:34,595 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:34:34,603 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:34:34,611 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:34:34,618 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:34:34,620 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:34:34,623 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:34:34,626 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:34:34,628 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:34:34,629 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:34:34,636 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:34:34,639 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:34:34,641 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:34:34,641 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:34:34,642 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:34:34,645 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:34:34,648 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:34:34,649 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:34:34,650 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:34:34,651 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:34:34,655 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:34:34,873 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:34:37,908 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:34:37,909 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:34:38,022 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:34:38,022 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:34:38,277 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:34:38,479 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:34:38,480 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6381ff2]]
2025-11-08 13:34:38,481 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:34:38,481 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:34:38,497 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:34:38,502 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 7.524 seconds (process running for 7.786)
2025-11-08 13:35:38,485 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:39:30,791 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-08 13:39:30,797 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-08 13:39:30,800 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-08 13:39:30,800 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6381ff2]]
2025-11-08 13:39:30,800 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-08 13:39:30,805 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:39:30,808 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:39:30,810 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:39:30,815 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:39:30,818 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:39:30,819 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:39:30,820 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:39:30,822 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:39:30,824 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:39:30,825 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:39:30,826 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:39:30,826 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:39:30,832 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:39:30,837 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:39:30,839 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:39:30,840 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:39:30,844 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:39:30,845 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:39:30,845 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:39:30,848 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:39:30,852 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:39:30,853 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:39:30,854 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:39:30,858 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:39:30,859 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:39:30,861 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:39:30,866 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:39:30,868 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:39:30,871 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:39:30,874 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:39:30,878 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:39:30,885 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-08 13:39:30,887 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-08 13:39:48,270 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:39:48,311 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 27736 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:39:48,312 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:39:48,966 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:39:49,071 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 99 ms. Found 15 JPA repository interfaces.
2025-11-08 13:39:49,462 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:39:49,471 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:39:49,475 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:39:49,476 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:39:49,526 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:39:49,527 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1179 ms
2025-11-08 13:39:49,659 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:39:49,694 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:39:49,728 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:39:49,908 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:39:49,929 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:39:50,028 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@4c41a177
2025-11-08 13:39:50,028 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:39:50,080 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:39:51,088 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:39:51,101 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:39:51,103 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:39:51,104 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:39:51,106 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:39:51,107 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:39:51,108 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:39:51,108 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:39:51,109 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:39:51,109 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:39:51,110 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:39:51,110 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:39:51,111 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:39:51,111 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:39:51,112 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:39:51,112 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:39:51,113 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:39:51,113 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:39:51,114 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:39:51,114 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:39:51,114 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:39:51,115 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:39:51,115 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:39:51,115 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:39:51,116 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:39:51,116 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:39:51,116 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:39:51,117 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:39:51,117 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:39:51,118 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:39:51,118 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:39:51,123 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:39:51,136 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:39:51,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:39:51,144 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:39:51,147 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:39:51,152 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:39:51,158 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:39:51,161 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:39:51,162 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:39:51,164 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:39:51,169 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:39:51,175 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:39:51,178 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:39:51,179 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:39:51,181 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:39:51,188 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:39:51,190 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:39:51,191 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:39:51,197 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:39:51,204 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:39:51,209 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:39:51,214 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:39:51,220 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:39:51,227 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:39:51,236 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:39:51,240 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:39:51,242 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:39:51,245 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:39:51,248 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:39:51,250 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:39:51,258 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:39:51,260 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:39:51,262 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:39:51,263 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:39:51,264 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:39:51,266 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:39:51,269 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:39:51,271 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:39:51,273 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:39:51,275 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:39:51,279 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:39:51,474 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:39:54,632 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:39:54,633 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:39:54,730 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:39:54,730 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:39:55,007 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:39:55,213 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:39:55,214 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@15cdfb19]]
2025-11-08 13:39:55,214 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:39:55,215 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:39:55,230 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:39:55,236 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 7.367 seconds (process running for 7.612)
2025-11-08 13:39:56,680 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-08 13:39:56,688 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-08 13:39:56,691 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-08 13:39:56,691 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@15cdfb19]]
2025-11-08 13:39:56,692 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-08 13:39:56,697 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:39:56,699 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:39:56,702 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:39:56,722 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:39:56,723 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:39:56,724 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:39:56,725 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:39:56,726 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:39:56,727 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:39:56,729 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:39:56,733 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:39:56,734 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:39:56,742 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:39:56,746 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:39:56,748 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:39:56,750 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:39:56,754 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:39:56,754 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:39:56,755 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:39:56,759 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:39:56,764 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:39:56,766 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:39:56,766 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:39:56,771 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:39:56,771 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:39:56,774 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:39:56,781 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:39:56,787 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:39:56,794 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:39:56,799 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:39:56,802 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:39:56,810 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-08 13:39:56,813 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-08 13:43:24,505 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:43:24,552 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 28436 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:43:24,553 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:43:25,205 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:43:25,295 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 83 ms. Found 15 JPA repository interfaces.
2025-11-08 13:43:25,698 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:43:25,710 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:43:25,713 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:43:25,713 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:43:25,765 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:43:25,765 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1170 ms
2025-11-08 13:43:25,889 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:43:25,934 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:43:25,967 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:43:26,175 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:43:26,198 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:43:26,318 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@e4b54d3
2025-11-08 13:43:26,319 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:43:26,391 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:43:27,482 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:43:27,505 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:43:27,507 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:43:27,511 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:43:27,512 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:43:27,513 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:43:27,513 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:43:27,514 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:43:27,516 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:43:27,517 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:43:27,517 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:43:27,518 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:43:27,519 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:43:27,519 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:43:27,519 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:43:27,520 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:43:27,520 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:43:27,520 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:43:27,521 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:43:27,521 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:43:27,522 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:43:27,523 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:43:27,524 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:43:27,526 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:43:27,526 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:43:27,527 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:43:27,527 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:43:27,527 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:43:27,528 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:43:27,529 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:43:27,530 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:43:27,539 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:43:27,566 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:43:27,574 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:43:27,576 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:43:27,580 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:43:27,589 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:43:27,597 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:43:27,601 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:43:27,602 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:43:27,604 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:43:27,609 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:43:27,616 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:43:27,620 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:43:27,622 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:43:27,623 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:43:27,630 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:43:27,632 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:43:27,635 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:43:27,639 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:43:27,650 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:43:27,656 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:43:27,662 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:43:27,670 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:43:27,678 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:43:27,687 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:43:27,692 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:43:27,694 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:43:27,698 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:43:27,700 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:43:27,704 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:43:27,717 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:43:27,720 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:43:27,722 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:43:27,725 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:43:27,726 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:43:27,728 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:43:27,733 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:43:27,735 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:43:27,736 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:43:27,738 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:43:27,743 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:43:28,026 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:43:32,303 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:43:32,305 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:43:32,419 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:43:32,419 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:43:32,715 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:43:32,962 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:43:32,962 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@70139ceb]]
2025-11-08 13:43:32,962 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:43:32,962 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:43:32,983 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:43:33,002 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.936 seconds (process running for 9.261)
2025-11-08 13:43:56,769 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-08 13:43:56,770 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-08 13:43:56,774 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-08 13:43:56,966 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:43:56,966 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:43:57,044 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:43:57,114 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:43:57,118 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:44:04,875 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 13:44:04,876 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 13:44:04,877 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1762589644876)
2025-11-08 13:44:04,880 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 13:44:09,221 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 13:44:09,221 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-08 13:44:09,223 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-08 13:44:09,230 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-08 13:44:09,235 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  Creating new user for phone: 9045394959
2025-11-08 13:44:09,291 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-08 13:44:09,338 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-08 13:44:09,339 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-08 13:44:09,419 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:44:09,421 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:44:32,975 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:46:55,488 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:46:55,517 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:46:55,880 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:46:55,887 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:46:55,890 WARN  [http-nio-8081-exec-9] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:46:56,294 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:46:56,301 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:46:58,312 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:46:58,327 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:46:58,661 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:46:58,669 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:46:58,677 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:46:59,631 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:46:59,637 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:47:54,864 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:47:54,890 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:47:54,890 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:47:54,974 WARN  [http-nio-8081-exec-4] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:47:54,995 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:47:55,033 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:47:55,036 WARN  [http-nio-8081-exec-9] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:48:17,307 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:17,320 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:48:17,639 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:48:17,657 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:17,673 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:48:17,946 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:17,951 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:48:26,099 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:26,104 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:48:26,284 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:48:26,291 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:26,296 WARN  [http-nio-8081-exec-4] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:48:26,382 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:26,391 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:48:38,720 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:38,832 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:48:38,957 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:48:39,646 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:39,654 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:48:46,232 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:46,239 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:48:46,453 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:48:46,477 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:46,484 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:48:46,686 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:48:46,688 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:49:46,089 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:49:46,153 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:49:46,392 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:49:46,413 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:49:46,413 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:49:46,548 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:49:46,554 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:50:04,187 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:50:04,199 WARN  [http-nio-8081-exec-9] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:50:04,868 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:50:04,881 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:50:04,884 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:50:05,219 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:50:05,225 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:51:10,641 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:10,655 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:51:10,715 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:51:10,990 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:10,995 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:51:23,140 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:23,157 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:51:23,340 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:51:23,349 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:23,353 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:51:23,437 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:23,439 WARN  [http-nio-8081-exec-9] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:51:35,134 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:35,139 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:51:35,320 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:51:35,333 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:35,336 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:51:35,429 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:51:35,459 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:53:20,404 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:53:20,459 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 21008 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:53:20,461 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:53:21,183 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:53:21,295 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 106 ms. Found 15 JPA repository interfaces.
2025-11-08 13:53:21,858 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:53:21,875 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:53:21,880 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:53:21,880 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:53:21,947 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:53:21,948 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1434 ms
2025-11-08 13:53:22,149 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:53:22,205 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:53:22,246 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:53:22,494 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:53:22,520 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:53:22,662 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@25421809
2025-11-08 13:53:22,663 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:53:22,756 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:53:23,922 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:53:23,939 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:53:23,942 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:53:23,957 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:53:23,959 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:53:23,961 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:53:23,962 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:53:23,964 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:53:23,965 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:53:23,966 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:53:23,967 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:53:23,969 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:53:23,984 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:53:23,991 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:53:23,992 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:53:23,993 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:53:23,998 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:53:23,999 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:53:24,000 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:53:24,004 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:53:24,008 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:53:24,011 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:53:24,012 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:53:24,015 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:53:24,017 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:53:24,020 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:53:24,027 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:53:24,030 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:53:24,042 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:53:24,047 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:53:24,052 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:53:24,065 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:53:24,093 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:53:24,101 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:53:24,103 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:53:24,106 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:53:24,115 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:53:24,124 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:53:24,128 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:53:24,129 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:53:24,131 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:53:24,139 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:53:24,147 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:53:24,151 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:53:24,152 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:53:24,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:53:24,165 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:53:24,167 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:53:24,169 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:53:24,176 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:53:24,187 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:53:24,197 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:53:24,206 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:53:24,213 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:53:24,222 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:53:24,233 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:53:24,235 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:53:24,238 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:53:24,241 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:53:24,243 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:53:24,246 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:53:24,259 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:53:24,264 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:53:24,268 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:53:24,271 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:53:24,272 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:53:24,275 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:53:24,278 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:53:24,280 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:53:24,282 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:53:24,283 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:53:24,289 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:53:24,548 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:53:28,592 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:53:28,593 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:53:28,760 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:53:28,760 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:53:29,201 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:53:29,499 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:53:29,499 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@68beeb27]]
2025-11-08 13:53:29,501 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:53:29,502 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:53:29,528 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:53:29,534 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 9.664 seconds (process running for 9.988)
2025-11-08 13:53:47,297 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-08 13:53:47,301 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-08 13:53:47,321 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 19 ms
2025-11-08 13:53:47,703 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 13:53:47,703 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:53:47,854 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=logo
2025-11-08 13:53:47,961 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:53:47,965 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 13:54:29,650 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:57:59,271 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:57:59,314 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 17532 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:57:59,315 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:58:00,044 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:58:00,146 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 15 JPA repository interfaces.
2025-11-08 13:58:00,611 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:58:00,624 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:58:00,627 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:58:00,627 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:58:00,688 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:58:00,688 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1331 ms
2025-11-08 13:58:00,846 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:58:00,900 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:58:00,933 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:58:01,162 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:58:01,200 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:58:01,321 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@e4b54d3
2025-11-08 13:58:01,323 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:58:01,396 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:58:02,489 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:58:02,513 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:58:02,515 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:58:02,523 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:58:02,525 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:58:02,527 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:58:02,528 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:58:02,531 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:58:02,532 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:58:02,533 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:58:02,534 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:58:02,537 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:58:02,544 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:58:02,547 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:58:02,550 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:58:02,551 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:58:02,554 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:58:02,555 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:58:02,556 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:58:02,559 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:58:02,564 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:58:02,566 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:58:02,567 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:58:02,573 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:58:02,574 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:58:02,577 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:58:02,581 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:58:02,585 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:58:02,588 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:58:02,593 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:58:02,597 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:58:02,610 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:58:02,635 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:58:02,643 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:58:02,646 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:58:02,649 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:58:02,658 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:58:02,670 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:58:02,673 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:58:02,675 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:58:02,677 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:58:02,681 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:58:02,688 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:58:02,691 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:58:02,693 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:58:02,694 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:58:02,701 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:58:02,703 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:58:02,705 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:58:02,708 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:58:02,717 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:58:02,722 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:58:02,729 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:58:02,737 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:58:02,743 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:58:02,752 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:58:02,754 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:58:02,756 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:58:02,758 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:58:02,761 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:58:02,762 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:58:02,771 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:58:02,774 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:58:02,775 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:58:02,776 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:58:02,777 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:58:02,780 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:58:02,783 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:58:02,784 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:58:02,786 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:58:02,787 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:58:02,791 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:58:03,043 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:58:06,534 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:58:06,535 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:58:06,656 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:58:06,656 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:58:06,970 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:58:07,264 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:58:07,265 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@53ad085c]]
2025-11-08 13:58:07,265 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:58:07,266 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:58:07,295 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:58:07,304 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.688 seconds (process running for 9.101)
2025-11-08 13:59:07,278 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 13:59:45,759 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 13:59:45,800 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 24520 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 13:59:45,801 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 13:59:46,461 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 13:59:46,571 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 15 JPA repository interfaces.
2025-11-08 13:59:47,053 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 13:59:47,067 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 13:59:47,069 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 13:59:47,070 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 13:59:47,128 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 13:59:47,128 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1283 ms
2025-11-08 13:59:47,265 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 13:59:47,321 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 13:59:47,356 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 13:59:47,585 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 13:59:47,611 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 13:59:47,741 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@6ac9b66b
2025-11-08 13:59:47,743 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 13:59:47,814 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 13:59:48,897 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 13:59:48,911 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 13:59:48,913 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 13:59:48,924 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 13:59:48,926 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 13:59:48,927 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 13:59:48,927 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 13:59:48,929 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 13:59:48,930 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 13:59:48,931 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 13:59:48,932 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 13:59:48,933 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 13:59:48,942 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 13:59:48,947 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 13:59:48,948 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 13:59:48,950 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 13:59:48,954 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 13:59:48,954 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 13:59:48,955 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 13:59:48,958 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 13:59:48,962 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 13:59:48,964 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 13:59:48,965 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 13:59:48,969 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 13:59:48,970 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 13:59:48,973 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 13:59:48,978 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 13:59:48,982 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 13:59:48,986 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 13:59:48,992 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 13:59:48,996 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 13:59:49,010 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 13:59:49,033 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 13:59:49,042 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 13:59:49,045 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 13:59:49,048 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 13:59:49,056 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 13:59:49,065 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:59:49,071 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 13:59:49,073 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:59:49,076 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 13:59:49,086 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 13:59:49,098 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 13:59:49,103 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 13:59:49,105 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:59:49,108 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 13:59:49,121 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 13:59:49,124 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 13:59:49,126 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 13:59:49,134 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 13:59:49,146 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 13:59:49,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 13:59:49,168 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 13:59:49,182 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 13:59:49,192 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 13:59:49,203 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 13:59:49,205 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 13:59:49,208 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 13:59:49,211 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 13:59:49,212 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 13:59:49,215 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:59:49,224 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:59:49,226 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:59:49,227 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:59:49,230 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:59:49,231 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 13:59:49,234 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 13:59:49,236 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 13:59:49,238 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 13:59:49,240 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 13:59:49,240 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 13:59:49,245 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 13:59:49,465 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 13:59:52,901 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 13:59:52,901 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 13:59:53,024 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 13:59:53,024 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 13:59:53,312 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 13:59:53,572 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 13:59:53,572 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@32e111f9]]
2025-11-08 13:59:53,573 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 13:59:53,573 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 13:59:53,610 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 13:59:53,620 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.357 seconds (process running for 8.648)
2025-11-08 13:59:53,716 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 13:59:53,746 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-08 13:59:53,774 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-08 13:59:53,798 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-08 13:59:53,799 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-08 14:00:47,361 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-08 14:00:47,362 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-08 14:00:47,369 INFO  [http-nio-8081-exec-1] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-11-08 14:00:47,498 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:00:47,525 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:00:47,646 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:00:47,649 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:00:53,574 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 14:00:56,650 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 14:00:56,651 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 14:00:56,651 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1762590656651)
2025-11-08 14:00:56,651 INFO  [http-nio-8081-exec-4] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 14:01:01,006 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 14:01:01,006 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-08 14:01:01,006 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-08 14:01:01,013 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-08 14:01:01,027 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Creating new user for phone: 9045394959
2025-11-08 14:01:01,048 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-08 14:01:01,069 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-08 14:01:01,074 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-08 14:06:32,249 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:06:32,285 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:06:32,321 WARN  [http-nio-8081-exec-9] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:06:35,241 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:06:35,345 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:06:35,350 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:26:20,676 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:26:20,682 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:26:20,716 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:26:32,163 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 14:26:32,163 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 14:26:32,163 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1762592192163)
2025-11-08 14:26:32,163 INFO  [http-nio-8081-exec-2] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 14:26:37,630 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 14:26:37,633 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-08 14:26:37,633 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-08 14:26:37,643 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-08 14:26:37,721 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Existing user found: 1
2025-11-08 14:26:37,823 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt",
        a1_0."user_id",
        a1_0."id",
        a1_0."active",
        a1_0."apartment",
        a1_0."city",
        a1_0."country",
        a1_0."createdAt",
        a1_0."deliveryInstructions",
        a1_0."isDefault",
        a1_0."label",
        a1_0."landmark",
        a1_0."latitude",
        a1_0."longitude",
        a1_0."state",
        a1_0."street",
        a1_0."updatedAt",
        a1_0."zipCode" 
    from
        "users" u1_0 
    left join
        "addresses" a1_0 
            on u1_0."id"=a1_0."user_id" 
    where
        u1_0."id"=?
2025-11-08 14:26:37,850 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        o1_0."user_id",
        o1_0."id",
        o1_0."createdAt",
        o1_0."delivery_address_id",
        o1_0."deliveryTime",
        o1_0."orderTime",
        o1_0."paymentId",
        o1_0."paymentMethod",
        o1_0."paymentStatus",
        o1_0."specialInstructions",
        o1_0."status",
        o1_0."totalAmount" 
    from
        "orders" o1_0 
    where
        o1_0."user_id"=?
2025-11-08 14:26:37,858 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-08 14:26:37,863 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-08 14:30:53,612 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2025-11-08 14:37:06,695 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:37:06,714 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:37:06,742 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:37:15,631 INFO  [http-nio-8081-exec-9] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 14:37:15,631 INFO  [http-nio-8081-exec-9] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 14:37:15,631 INFO  [http-nio-8081-exec-9] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1762592835631)
2025-11-08 14:37:15,631 INFO  [http-nio-8081-exec-9] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 14:37:20,543 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 14:37:20,547 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-08 14:37:20,547 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-08 14:37:20,548 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-08 14:37:20,571 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  Existing user found: 1
2025-11-08 14:37:20,575 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt",
        a1_0."user_id",
        a1_0."id",
        a1_0."active",
        a1_0."apartment",
        a1_0."city",
        a1_0."country",
        a1_0."createdAt",
        a1_0."deliveryInstructions",
        a1_0."isDefault",
        a1_0."label",
        a1_0."landmark",
        a1_0."latitude",
        a1_0."longitude",
        a1_0."state",
        a1_0."street",
        a1_0."updatedAt",
        a1_0."zipCode" 
    from
        "users" u1_0 
    left join
        "addresses" a1_0 
            on u1_0."id"=a1_0."user_id" 
    where
        u1_0."id"=?
2025-11-08 14:37:20,583 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        o1_0."user_id",
        o1_0."id",
        o1_0."createdAt",
        o1_0."delivery_address_id",
        o1_0."deliveryTime",
        o1_0."orderTime",
        o1_0."paymentId",
        o1_0."paymentMethod",
        o1_0."paymentStatus",
        o1_0."specialInstructions",
        o1_0."status",
        o1_0."totalAmount" 
    from
        "orders" o1_0 
    where
        o1_0."user_id"=?
2025-11-08 14:37:20,590 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-08 14:37:20,590 INFO  [http-nio-8081-exec-6] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-08 14:40:14,375 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 14:40:14,441 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication v0.0.1-SNAPSHOT using Java 21.0.8 with PID 17304 (D:\Food Delivery app\tiffin-api\target\tiffin-api-0.0.1-SNAPSHOT.jar started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 14:40:14,442 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 14:40:15,563 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 14:40:15,686 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 15 JPA repository interfaces.
2025-11-08 14:40:16,516 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 14:40:16,556 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 14:40:16,561 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 14:40:16,561 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 14:40:16,616 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 14:40:16,617 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2111 ms
2025-11-08 14:40:16,822 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 14:40:16,890 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 14:40:16,957 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 14:40:17,335 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 14:40:17,367 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 14:40:17,502 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@72e75786
2025-11-08 14:40:17,504 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 14:40:17,582 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 14:40:18,857 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 14:40:18,871 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 14:40:18,873 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 14:40:18,882 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 14:40:18,884 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 14:40:18,885 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 14:40:18,886 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 14:40:18,887 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 14:40:18,888 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 14:40:18,890 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 14:40:18,891 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 14:40:18,892 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 14:40:18,902 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 14:40:18,908 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 14:40:18,911 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 14:40:18,912 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 14:40:18,917 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 14:40:18,919 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 14:40:18,919 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 14:40:18,922 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 14:40:18,926 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 14:40:18,927 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 14:40:18,928 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 14:40:18,933 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 14:40:18,934 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 14:40:18,937 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 14:40:18,944 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 14:40:18,949 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 14:40:18,952 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 14:40:18,957 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 14:40:18,962 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 14:40:18,973 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 14:40:18,996 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 14:40:19,003 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 14:40:19,006 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 14:40:19,008 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 14:40:19,017 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 14:40:19,025 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:102)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:64)
	at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:40)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 44 common frames omitted
2025-11-08 14:40:19,029 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 14:40:19,031 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:102)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:64)
	at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:40)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 44 common frames omitted
2025-11-08 14:40:19,033 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 14:40:19,038 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 14:40:19,046 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 14:40:19,049 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 14:40:19,051 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:102)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:64)
	at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:40)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 44 common frames omitted
2025-11-08 14:40:19,053 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 14:40:19,060 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 14:40:19,062 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:102)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:64)
	at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:40)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 44 common frames omitted
2025-11-08 14:40:19,064 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 14:40:19,068 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 14:40:19,079 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 14:40:19,085 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 14:40:19,092 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 14:40:19,100 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 14:40:19,107 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 14:40:19,116 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 14:40:19,120 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 14:40:19,124 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 14:40:19,126 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 14:40:19,129 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 14:40:19,130 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 14:40:19,139 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 14:40:19,142 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 14:40:19,144 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 14:40:19,146 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:102)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:64)
	at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:40)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 43 common frames omitted
2025-11-08 14:40:19,148 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 14:40:19,151 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 14:40:19,154 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 14:40:19,157 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 14:40:19,158 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 14:40:19,159 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:102)
	at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:64)
	at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:40)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 43 common frames omitted
2025-11-08 14:40:19,168 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 14:40:19,581 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 14:40:22,476 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 14:40:22,476 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 14:40:22,670 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 14:40:22,671 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 14:40:23,133 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 14:40:23,584 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 14:40:23,585 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1ce8119f]]
2025-11-08 14:40:23,585 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 14:40:23,586 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 14:40:23,612 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 14:40:23,621 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 9.856 seconds (process running for 10.38)
2025-11-08 14:41:23,696 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 14:50:26,548 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-08 14:50:26,611 INFO  [tomcat-shutdown] [trace=] [user=] o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-08 14:50:26,644 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-08 14:50:26,647 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1ce8119f]]
2025-11-08 14:50:26,648 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-08 14:50:26,700 INFO  [SpringApplicationShutdownHook] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 14:50:26,745 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 14:50:26,762 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 14:50:26,779 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 14:50:26,783 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 14:50:26,784 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 14:50:26,785 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 14:50:26,786 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 14:50:26,788 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 14:50:26,792 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 14:50:26,793 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 14:50:26,793 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 14:50:26,811 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 14:50:26,821 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 14:50:26,825 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 14:50:26,828 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 14:50:26,837 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 14:50:26,839 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 14:50:26,841 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 14:50:26,848 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 14:50:26,855 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 14:50:26,858 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 14:50:26,860 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 14:50:26,868 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 14:50:26,869 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 14:50:26,876 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 14:50:26,883 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 14:50:26,889 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 14:50:26,896 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 14:50:26,903 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 14:50:26,913 DEBUG [SpringApplicationShutdownHook] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 14:50:26,981 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown initiated...
2025-11-08 14:50:27,001 INFO  [SpringApplicationShutdownHook] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Shutdown completed.
2025-11-08 14:55:56,503 INFO  [background-preinit] [trace=] [user=] o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-11-08 14:55:56,544 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Starting TiffinApiApplication using Java 21.0.9 with PID 16468 (D:\Food Delivery app\tiffin-api\target\classes started by Tamoghna in D:\Food Delivery app\tiffin-api)
2025-11-08 14:55:56,545 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - No active profile set, falling back to 1 default profile: "default"
2025-11-08 14:55:57,230 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-08 14:55:57,329 INFO  [main] [trace=] [user=] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 91 ms. Found 15 JPA repository interfaces.
2025-11-08 14:55:57,757 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-11-08 14:55:57,767 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-11-08 14:55:57,770 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-08 14:55:57,770 INFO  [main] [trace=] [user=] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-11-08 14:55:57,833 INFO  [main] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring embedded WebApplicationContext
2025-11-08 14:55:57,833 INFO  [main] [trace=] [user=] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1251 ms
2025-11-08 14:55:57,955 INFO  [main] [trace=] [user=] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-08 14:55:57,999 INFO  [main] [trace=] [user=] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-11-08 14:55:58,037 INFO  [main] [trace=] [user=] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-08 14:55:58,239 INFO  [main] [trace=] [user=] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-08 14:55:58,262 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Starting...
2025-11-08 14:55:58,394 INFO  [main] [trace=] [user=] com.zaxxer.hikari.pool.HikariPool - TiffinHikariCP - Added connection org.postgresql.jdbc.PgConnection@51141f64
2025-11-08 14:55:58,395 INFO  [main] [trace=] [user=] com.zaxxer.hikari.HikariDataSource - TiffinHikariCP - Start completed.
2025-11-08 14:55:58,466 INFO  [main] [trace=] [user=] o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (TiffinHikariCP)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-08 14:55:59,785 INFO  [main] [trace=] [user=] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-08 14:55:59,804 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-11-08 14:55:59,806 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       drop constraint if exists "FK1o3cf1oq29twu2e49lxh6u8pg"
2025-11-08 14:55:59,811 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       drop constraint if exists "FKkcjtpklna4ym5c19ym2pmjkuq"
2025-11-08 14:55:59,813 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       drop constraint if exists "FK8fenw11chwbd31jgayrx86vll"
2025-11-08 14:55:59,814 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       drop constraint if exists "FKsny3a8mx1j0x10oy32nbv53x0"
2025-11-08 14:55:59,814 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FKrnpho6nwth59gol8v9lyjb9sj"
2025-11-08 14:55:59,815 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       drop constraint if exists "FK6gg8woymk43fp55jtjlgkd1eh"
2025-11-08 14:55:59,815 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FK35r28bu0fnis2c0ed2pels2mb"
2025-11-08 14:55:59,816 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       drop constraint if exists "FKitd0598xtxfyrro0df4ey8kdd"
2025-11-08 14:55:59,816 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       drop constraint if exists "FK67d4njd6wxctoxt50x2j2ueyh"
2025-11-08 14:55:59,818 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "addresses" cascade
2025-11-08 14:55:59,819 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "customer_testimonials" cascade
2025-11-08 14:55:59,819 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_dietary_tags" cascade
2025-11-08 14:55:59,819 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dish_tags" cascade
2025-11-08 14:55:59,820 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "dishes" cascade
2025-11-08 14:55:59,820 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "featured_dishes" cascade
2025-11-08 14:55:59,821 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "landing_analytics" cascade
2025-11-08 14:55:59,821 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_points" cascade
2025-11-08 14:55:59,821 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "loyalty_transactions" cascade
2025-11-08 14:55:59,822 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plan_features" cascade
2025-11-08 14:55:59,822 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "membership_plans" cascade
2025-11-08 14:55:59,823 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "newsletter_subscriptions" cascade
2025-11-08 14:55:59,823 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "notifications" cascade
2025-11-08 14:55:59,824 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "order_items" cascade
2025-11-08 14:55:59,824 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "orders" cascade
2025-11-08 14:55:59,825 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "payments" cascade
2025-11-08 14:55:59,825 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "reviews" cascade
2025-11-08 14:55:59,826 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "uploaded_images" cascade
2025-11-08 14:55:59,826 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "user_memberships" cascade
2025-11-08 14:55:59,826 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    drop table if exists "users" cascade
2025-11-08 14:55:59,833 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "addresses" (
        "active" boolean not null,
        "isDefault" boolean not null,
        "latitude" float(53),
        "longitude" float(53),
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "user_id" bigint not null,
        "zipCode" varchar(20) not null,
        "apartment" varchar(100),
        "city" varchar(100) not null,
        "country" varchar(100) not null,
        "label" varchar(100) not null,
        "state" varchar(100) not null,
        "deliveryInstructions" varchar(500),
        "landmark" varchar(500),
        "street" varchar(255) not null,
        primary key ("id")
    )
2025-11-08 14:55:59,867 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "customer_testimonials" (
        "display_order" integer,
        "is_approved" boolean,
        "is_featured" boolean,
        "is_verified" boolean,
        "rating" integer not null check (("rating"<=5) and ("rating">=1)),
        "approved_at" timestamp(6),
        "created_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "user_id" bigint,
        "comment" varchar(1000) not null,
        "avatar_emoji" varchar(255),
        "customer_image_url" varchar(255),
        "customer_name" varchar(255) not null,
        "location" varchar(255),
        primary key ("id")
    )
2025-11-08 14:55:59,878 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_dietary_tags" (
        "dish_id" bigint not null,
        "dietary_tag" varchar(255)
    )
2025-11-08 14:55:59,881 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dish_tags" (
        "dish_id" bigint not null,
        "tag" varchar(255)
    )
2025-11-08 14:55:59,885 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "dishes" (
        "available" boolean,
        "calories" integer,
        "preparationTime" integer,
        "price" numeric(38,2) not null,
        "rating" float(53),
        "reviewCount" integer,
        "spicyLevel" integer,
        "id" bigint generated by default as identity,
        "cuisine" varchar(255),
        "description" varchar(255),
        "imageUrl" varchar(255),
        "name" varchar(255) not null,
        "type" varchar(255) not null check ("type" in ('VEG','NON_VEG')),
        primary key ("id")
    )
2025-11-08 14:55:59,901 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )
2025-11-08 14:55:59,913 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "featured_dishes" (
        "average_rating" numeric(2,1),
        "calories_per_serving" integer,
        "discounted_price" numeric(8,2),
        "display_order" integer,
        "is_available" boolean not null,
        "is_featured" boolean not null,
        "is_gluten_free" boolean not null,
        "is_popular" boolean not null,
        "is_vegan" boolean not null,
        "is_vegetarian" boolean not null,
        "preparation_time_minutes" integer,
        "price" numeric(8,2) not null,
        "total_reviews" integer not null,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "category" varchar(255),
        "cuisine_type" varchar(255),
        "description" "TEXT",
        "dish_name" varchar(255) not null,
        "image_url" varchar(255),
        "ingredients" "TEXT",
        "nutritional_info" "TEXT",
        "short_description" varchar(255),
        "spice_level" varchar(255),
        "tags" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 804]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 804
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 14:55:59,917 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )
2025-11-08 14:55:59,918 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "landing_analytics" (
        "click_x" integer,
        "click_y" integer,
        "latitude" float(53),
        "longitude" float(53),
        "scroll_percentage" integer,
        "time_on_page_seconds" integer,
        "created_at" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updated_at" timestamp(6),
        "user_id" bigint,
        "additional_data" "TEXT",
        "browser_name" varchar(255),
        "browser_version" varchar(255),
        "city" varchar(255),
        "country" varchar(255),
        "device_type" varchar(255),
        "element_id" varchar(255),
        "element_text" varchar(255),
        "event_category" varchar(255),
        "event_type" varchar(255) not null,
        "form_data" "TEXT",
        "ip_address" varchar(255),
        "operating_system" varchar(255),
        "page_section" varchar(255),
        "referrer" varchar(255),
        "region" varchar(255),
        "screen_resolution" varchar(255),
        "session_id" varchar(255),
        "user_agent" "TEXT",
        "utm_campaign" varchar(255),
        "utm_content" varchar(255),
        "utm_medium" varchar(255),
        "utm_source" varchar(255),
        "utm_term" varchar(255),
        "viewport_size" varchar(255),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 430]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 430
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 14:55:59,921 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_points" (
        "availablePoints" integer not null,
        "expiredPoints" integer not null,
        "lifetimeEarned" integer not null,
        "totalPoints" integer not null,
        "usedPoints" integer not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextTierDate" timestamp(6),
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "tier" varchar(255) not null check ("tier" in ('BRONZE','SILVER','GOLD','PLATINUM','DIAMOND')),
        primary key ("id")
    )
2025-11-08 14:55:59,931 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "loyalty_transactions" (
        "points" integer not null,
        "createdAt" timestamp(6) not null,
        "expiryDate" timestamp(6),
        "id" bigint generated by default as identity,
        "orderId" bigint,
        "userId" bigint not null,
        "description" varchar(255),
        "referenceId" varchar(255),
        "type" varchar(255) not null check ("type" in ('EARNED_ORDER','EARNED_REFERRAL','EARNED_BONUS','EARNED_REVIEW','REDEEMED_DISCOUNT','REDEEMED_DELIVERY','EXPIRED','ADJUSTMENT')),
        primary key ("id")
    )
2025-11-08 14:55:59,943 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plan_features" (
        "plan_id" bigint not null,
        "feature" varchar(255)
    )
2025-11-08 14:55:59,949 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )
2025-11-08 14:55:59,951 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "membership_plans" (
        "deliveryDiscount" numeric(5,2),
        "earlyAccess" boolean not null,
        "exclusiveDeals" boolean not null,
        "foodDiscount" numeric(5,2),
        "freeDelivery" boolean not null,
        "isActive" boolean not null,
        "isFeatured" boolean not null,
        "loyaltyBonusMultiplier" boolean not null,
        "loyaltyMultiplier" numeric(3,2),
        "maxCancellations" integer,
        "maxDeliveries" integer not null,
        "maxOrders" integer not null,
        "monthlyPrice" numeric(10,2) not null,
        "priorityDeliveryMinutes" integer,
        "prioritySupport" boolean not null,
        "yearlyDiscount" numeric(5,2),
        "yearlyPrice" numeric(10,2) not null,
        "createdAt" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6) not null,
        "color" varchar(255),
        "description" "TEXT",
        "displayName" varchar(255) not null,
        "iconUrl" varchar(255),
        "name" varchar(255) not null unique,
        "tier" varchar(255) not null check ("tier" in ('FREE','BASIC','PREMIUM','VIP','ENTERPRISE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 961]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 961
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 14:55:59,955 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "newsletter_subscriptions" (
        "is_active" boolean,
        "id" bigint generated by default as identity,
        "subscribed_at" timestamp(6) not null,
        "email" varchar(255) not null unique,
        "ip_address" varchar(255),
        "source" varchar(255),
        "user_agent" varchar(255),
        primary key ("id")
    )
2025-11-08 14:55:59,965 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )
2025-11-08 14:55:59,968 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table "notifications" (
        "read_status" boolean not null,
        "created_at" timestamp(6) not null,
        "delivery_id" bigint,
        "expires_at" timestamp(6),
        "id" bigint generated by default as identity,
        "order_id" bigint,
        "read_at" timestamp(6),
        "user_id" bigint not null,
        "title" varchar(200) not null,
        "message" "TEXT" not null,
        "metadata" "TEXT",
        "priority" varchar(255) not null check ("priority" in ('LOW','NORMAL','HIGH','URGENT')),
        "type" varchar(255) not null check ("type" in ('ORDER_PLACED','ORDER_CONFIRMED','ORDER_PREPARING','ORDER_READY','ORDER_PICKED_UP','ORDER_OUT_FOR_DELIVERY','ORDER_DELIVERED','ORDER_CANCELLED','PAYMENT_SUCCESS','PAYMENT_FAILED','PAYMENT_REFUND','DELIVERY_LOCATION_UPDATE','DELIVERY_DELAY','DELIVERY_PARTNER_ASSIGNED','PROMOTION','DISCOUNT_AVAILABLE','SYSTEM_ANNOUNCEMENT','MAINTENANCE_SCHEDULED','SUBSCRIPTION_REMINDER','SUBSCRIPTION_EXPIRED','LOYALTY_POINTS_EARNED','LOYALTY_REWARD_AVAILABLE','REVIEW_REQUEST','CHAT_MESSAGE','FRIEND_RECOMMENDATION','SECURITY_ALERT','LOGIN_ALERT','PASSWORD_CHANGED','PROFILE_UPDATED','NEW_ORDER_RESTAURANT','ORDER_CANCELLED_RESTAURANT','MENU_UPDATE_APPROVED','DELIVERY_REQUEST','DELIVERY_COMPLETED','EARNINGS_UPDATE')),
        primary key ("id")
    )" via JDBC [ERROR: type "TEXT" does not exist
  Position: 402]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:430)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:346)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:241)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: type "TEXT" does not exist
  Position: 402
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 39 common frames omitted
2025-11-08 14:55:59,970 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "order_items" (
        "quantity" integer not null,
        "totalPrice" numeric(38,2) not null,
        "unitPrice" numeric(38,2) not null,
        "dish_id" bigint not null,
        "id" bigint generated by default as identity,
        "order_id" bigint not null,
        primary key ("id")
    )
2025-11-08 14:55:59,980 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "orders" (
        "totalAmount" numeric(38,2) not null,
        "createdAt" timestamp(6) not null,
        "deliveryTime" timestamp(6),
        "delivery_address_id" bigint,
        "id" bigint generated by default as identity,
        "orderTime" timestamp(6) not null,
        "user_id" bigint,
        "paymentId" varchar(255),
        "paymentMethod" varchar(255) not null check ("paymentMethod" in ('UPI','CARD','WALLET','COD')),
        "paymentStatus" varchar(255) not null,
        "specialInstructions" varchar(255),
        "status" varchar(255) not null check ("status" in ('PENDING','CONFIRMED','PREPARING','OUT_FOR_DELIVERY','DELIVERED','CANCELLED')),
        primary key ("id")
    )
2025-11-08 14:55:59,990 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "payments" (
        "amount" numeric(38,2),
        "createdAt" timestamp(6),
        "updatedAt" timestamp(6),
        "currency" varchar(255),
        "failureReason" varchar(255),
        "id" varchar(255) not null,
        "orderId" varchar(255),
        "paymentMethod" varchar(255),
        "paymentMethodDetails" varchar(255),
        "receiptUrl" varchar(255),
        "status" varchar(255),
        "transactionId" varchar(255),
        "userId" varchar(255),
        primary key ("id")
    )
2025-11-08 14:55:59,997 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "reviews" (
        "isVerifiedOrder" boolean not null,
        "rating" integer not null,
        "createdAt" timestamp(6),
        "dishId" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "comment" varchar(255),
        "userId" varchar(255),
        "userName" varchar(255),
        primary key ("id")
    )
2025-11-08 14:56:00,006 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "uploaded_images" (
        "fileSize" bigint,
        "id" bigint generated by default as identity,
        "updatedAt" timestamp(6),
        "uploadedAt" timestamp(6),
        "category" varchar(50) not null,
        "contentType" varchar(100),
        "image_id" varchar(100) not null,
        "filename" varchar(255) not null,
        "fileData" "bytea",
        primary key ("id"),
        unique ("category", "image_id")
    )
2025-11-08 14:56:00,020 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "user_memberships" (
        "autoRenewal" boolean not null,
        "cancellationsUsed" integer not null,
        "deliveriesUsed" integer not null,
        "discountAmount" numeric(10,2),
        "ordersUsed" integer not null,
        "paidAmount" numeric(10,2) not null,
        "totalSavings" numeric(12,2) not null,
        "cancelledAt" timestamp(6),
        "createdAt" timestamp(6) not null,
        "endDate" timestamp(6) not null,
        "id" bigint generated by default as identity,
        "nextBillingDate" timestamp(6),
        "plan_id" bigint not null,
        "startDate" timestamp(6) not null,
        "updatedAt" timestamp(6) not null,
        "userId" bigint not null,
        "billingCycle" varchar(255) not null check ("billingCycle" in ('MONTHLY','YEARLY')),
        "cancellationReason" varchar(255),
        "paymentTransactionId" varchar(255),
        "promoCode" varchar(255),
        "status" varchar(255) not null check ("status" in ('ACTIVE','EXPIRED','CANCELLED','SUSPENDED','PENDING_PAYMENT','TRIAL')),
        primary key ("id")
    )
2025-11-08 14:56:00,032 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create table "users" (
        "active" boolean,
        "emailVerified" boolean,
        "phoneVerified" boolean,
        "createdAt" timestamp(6),
        "id" bigint generated by default as identity,
        "lastLoginAt" timestamp(6),
        "updatedAt" timestamp(6),
        "preferredLanguage" varchar(10),
        "phoneNumber" varchar(15) unique,
        "role" varchar(20) not null check ("role" in ('USER','PREMIUM_USER','DELIVERY_PERSON','RESTAURANT_PARTNER','ADMIN','SUPER_ADMIN')),
        "firstName" varchar(50),
        "lastName" varchar(50),
        "email" varchar(100) not null unique,
        "password" varchar(255) not null,
        "profileImageUrl" varchar(255),
        primary key ("id")
    )
2025-11-08 14:56:00,044 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_user 
       on "addresses" ("user_id")
2025-11-08 14:56:00,048 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_address_default 
       on "addresses" ("user_id", "isDefault")
2025-11-08 14:56:00,051 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_email 
       on "users" ("email")
2025-11-08 14:56:00,055 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_phone 
       on "users" ("phoneNumber")
2025-11-08 14:56:00,057 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    create index idx_user_role 
       on "users" ("role")
2025-11-08 14:56:00,061 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "addresses" 
       add constraint "FK1o3cf1oq29twu2e49lxh6u8pg" 
       foreign key ("user_id") 
       references "users"
2025-11-08 14:56:00,075 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_dietary_tags" 
       add constraint "FKkcjtpklna4ym5c19ym2pmjkuq" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 14:56:00,078 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "dish_tags" 
       add constraint "FK8fenw11chwbd31jgayrx86vll" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 14:56:00,081 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 14:56:00,084 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "membership_plan_features" 
       add constraint "FKsny3a8mx1j0x10oy32nbv53x0" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 14:56:00,085 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FKrnpho6nwth59gol8v9lyjb9sj" 
       foreign key ("dish_id") 
       references "dishes"
2025-11-08 14:56:00,089 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "order_items" 
       add constraint "FK6gg8woymk43fp55jtjlgkd1eh" 
       foreign key ("order_id") 
       references "orders"
2025-11-08 14:56:00,091 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FK35r28bu0fnis2c0ed2pels2mb" 
       foreign key ("delivery_address_id") 
       references "addresses"
2025-11-08 14:56:00,094 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "orders" 
       add constraint "FKitd0598xtxfyrro0df4ey8kdd" 
       foreign key ("user_id") 
       references "users"
2025-11-08 14:56:00,095 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"
2025-11-08 14:56:00,097 WARN  [main] [trace=] [user=] o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table if exists "user_memberships" 
       add constraint "FK67d4njd6wxctoxt50x2j2ueyh" 
       foreign key ("plan_id") 
       references "membership_plans"" via JDBC [ERROR: relation "membership_plans" does not exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createForeignKeys(SchemaCreatorImpl.java:307)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:253)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:174)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:144)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:120)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:250)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tiffin.TiffinApiApplication.main(TiffinApiApplication.java:10)
Caused by: org.postgresql.util.PSQLException: ERROR: relation "membership_plans" does not exist
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2734)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2421)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:518)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:435)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:357)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:342)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:313)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 38 common frames omitted
2025-11-08 14:56:00,101 INFO  [main] [trace=] [user=] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-08 14:56:00,387 INFO  [main] [trace=] [user=] o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-08 14:56:03,896 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Initializing Razorpay client with key: rzp_****p8IS in test environment
2025-11-08 14:56:03,896 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay configuration validated successfully
2025-11-08 14:56:04,014 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Configured Razorpay client timeout: 30000 ms
2025-11-08 14:56:04,014 INFO  [main] [trace=] [user=] com.tiffin.config.RazorpayConfig - Razorpay client initialized successfully
2025-11-08 14:56:04,337 INFO  [main] [trace=] [user=] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-08 14:56:04,593 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-08 14:56:04,593 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@79856a96]]
2025-11-08 14:56:04,595 INFO  [main] [trace=] [user=] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-08 14:56:04,595 INFO  [main] [trace=] [user=] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-11-08 14:56:04,617 INFO  [main] [trace=] [user=] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api'
2025-11-08 14:56:04,623 INFO  [main] [trace=] [user=] com.tiffin.TiffinApiApplication - Started TiffinApiApplication in 8.607 seconds (process running for 8.901)
2025-11-08 14:56:04,706 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:56:04,732 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  No logo found, creating default TiffinApp logo...
2025-11-08 14:56:04,757 DEBUG [main] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "uploaded_images"
        ("category", "contentType", "fileData", "fileSize", "filename", "image_id", "updatedAt", "uploadedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?)
2025-11-08 14:56:04,781 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default TiffinApp logo saved to database
2025-11-08 14:56:04,781 INFO  [main] [trace=] [user=] com.tiffin.config.LogoInitializer -  Default logo created successfully!
2025-11-08 14:56:53,476 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.a.c.c.C.[.[localhost].[/api] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-08 14:56:53,476 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-08 14:56:53,483 INFO  [http-nio-8081-exec-2] [trace=] [user=] o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-11-08 14:56:53,565 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:56:53,565 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:56:53,576 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:56:55,549 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:56:55,925 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:56:55,925 WARN  [http-nio-8081-exec-4] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:57:04,725 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-08 14:57:10,303 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 14:57:10,303 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 14:57:10,307 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1762594030303)
2025-11-08 14:57:10,309 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 14:57:15,114 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 14:57:15,114 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-08 14:57:15,114 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-08 14:57:15,128 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-08 14:57:15,141 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Creating new user for phone: 9045394959
2025-11-08 14:57:15,168 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    insert 
    into
        "users"
        ("active", "createdAt", "email", "emailVerified", "firstName", "lastLoginAt", "lastName", "password", "phoneNumber", "phoneVerified", "preferredLanguage", "profileImageUrl", "role", "updatedAt") 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-08 14:57:15,194 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-08 14:57:15,195 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-08 14:59:27,747 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:59:27,897 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:59:27,906 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 14:59:47,287 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 14:59:47,416 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 14:59:47,419 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:01:43,652 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:01:44,581 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:01:44,615 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:02:08,493 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:02:08,617 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:02:08,633 WARN  [http-nio-8081-exec-4] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:27:04,750 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 1, queued tasks = 0, completed tasks = 1]
2025-11-08 15:48:41,358 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:48:41,470 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:48:41,499 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:48:55,548 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:48:55,703 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:48:55,715 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:49:16,411 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:49:16,480 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:49:16,483 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:50:30,435 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:50:30,491 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:50:30,511 WARN  [http-nio-8081-exec-1] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:50:38,346 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:50:38,424 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:50:38,429 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:50:47,393 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 15:50:47,393 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 15:50:47,400 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1762597247393)
2025-11-08 15:50:47,400 INFO  [http-nio-8081-exec-8] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 15:50:53,137 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 15:50:53,137 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-08 15:50:53,137 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-08 15:50:53,151 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-08 15:50:53,246 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  Existing user found: 1
2025-11-08 15:50:53,343 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt",
        a1_0."user_id",
        a1_0."id",
        a1_0."active",
        a1_0."apartment",
        a1_0."city",
        a1_0."country",
        a1_0."createdAt",
        a1_0."deliveryInstructions",
        a1_0."isDefault",
        a1_0."label",
        a1_0."landmark",
        a1_0."latitude",
        a1_0."longitude",
        a1_0."state",
        a1_0."street",
        a1_0."updatedAt",
        a1_0."zipCode" 
    from
        "users" u1_0 
    left join
        "addresses" a1_0 
            on u1_0."id"=a1_0."user_id" 
    where
        u1_0."id"=?
2025-11-08 15:50:53,371 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        o1_0."user_id",
        o1_0."id",
        o1_0."createdAt",
        o1_0."delivery_address_id",
        o1_0."deliveryTime",
        o1_0."orderTime",
        o1_0."paymentId",
        o1_0."paymentMethod",
        o1_0."paymentStatus",
        o1_0."specialInstructions",
        o1_0."status",
        o1_0."totalAmount" 
    from
        "orders" o1_0 
    where
        o1_0."user_id"=?
2025-11-08 15:50:53,385 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-08 15:50:53,385 INFO  [http-nio-8081-exec-3] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-08 15:52:47,899 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:52:48,053 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:52:48,066 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:52:53,567 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:52:53,708 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:52:53,711 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:53:13,950 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:53:14,097 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:53:14,106 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:53:26,225 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:53:26,306 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:53:26,335 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:53:36,231 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 15:53:36,330 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 15:53:36,335 WARN  [http-nio-8081-exec-3] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 15:57:04,778 INFO  [MessageBroker-2] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
2025-11-08 16:16:05,640 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:16:05,747 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:16:05,762 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:16:10,567 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:16:15,439 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/send-otp - Phone: 9045394959
2025-11-08 16:16:15,444 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Sending OTP to phone: 9045394959
2025-11-08 16:16:15,446 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.a.service.AuthenticationService -  Generated DEMO OTP for 9045394959: 123456 (OTP ID: otp_1762598775444)
2025-11-08 16:16:15,447 INFO  [http-nio-8081-exec-5] [trace=] [user=] c.t.auth.controller.AuthController -  OTP sent successfully - Phone: 9045394959
2025-11-08 16:16:20,213 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.auth.controller.AuthController -  POST /api/auth/verify-otp - Phone: 9045394959
2025-11-08 16:16:20,213 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.a.service.AuthenticationService -  Verifying OTP for phone: 9045394959 with OTP: 123456
2025-11-08 16:16:20,213 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification: phone match=true, otp match=true, not expired=true
2025-11-08 16:16:20,224 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt" 
    from
        "users" u1_0 
    where
        u1_0."phoneNumber"=?
2025-11-08 16:16:20,240 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.a.service.AuthenticationService -  Existing user found: 1
2025-11-08 16:16:20,253 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        u1_0."id",
        u1_0."active",
        u1_0."createdAt",
        u1_0."email",
        u1_0."emailVerified",
        u1_0."firstName",
        u1_0."lastLoginAt",
        u1_0."lastName",
        u1_0."password",
        u1_0."phoneNumber",
        u1_0."phoneVerified",
        u1_0."preferredLanguage",
        u1_0."profileImageUrl",
        u1_0."role",
        u1_0."updatedAt",
        a1_0."user_id",
        a1_0."id",
        a1_0."active",
        a1_0."apartment",
        a1_0."city",
        a1_0."country",
        a1_0."createdAt",
        a1_0."deliveryInstructions",
        a1_0."isDefault",
        a1_0."label",
        a1_0."landmark",
        a1_0."latitude",
        a1_0."longitude",
        a1_0."state",
        a1_0."street",
        a1_0."updatedAt",
        a1_0."zipCode" 
    from
        "users" u1_0 
    left join
        "addresses" a1_0 
            on u1_0."id"=a1_0."user_id" 
    where
        u1_0."id"=?
2025-11-08 16:16:20,268 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        o1_0."user_id",
        o1_0."id",
        o1_0."createdAt",
        o1_0."delivery_address_id",
        o1_0."deliveryTime",
        o1_0."orderTime",
        o1_0."paymentId",
        o1_0."paymentMethod",
        o1_0."paymentStatus",
        o1_0."specialInstructions",
        o1_0."status",
        o1_0."totalAmount" 
    from
        "orders" o1_0 
    where
        o1_0."user_id"=?
2025-11-08 16:16:20,276 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.a.service.AuthenticationService -  OTP verification successful for phone: 9045394959, user ID: 1
2025-11-08 16:16:20,276 INFO  [http-nio-8081-exec-1] [trace=] [user=] c.t.auth.controller.AuthController -  OTP verification successful - Phone: 9045394959
2025-11-08 16:19:13,850 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:13,921 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:14,852 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:19:14,867 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:19:16,711 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:17,341 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:17,388 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:19:17,391 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:19:30,150 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:30,334 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:30,538 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:19:30,572 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:19:55,085 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:55,540 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:19:55,659 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:19:55,673 WARN  [http-nio-8081-exec-2] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:27:04,858 INFO  [MessageBroker-1] [trace=] [user=] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 0, completed tasks = 3]
2025-11-08 16:27:30,407 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:27:30,428 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:27:30,458 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:29:53,814 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:29:53,837 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:29:53,862 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:31:30,135 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:31:30,177 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:31:30,194 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:31:37,556 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:31:38,242 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:31:38,366 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:31:38,369 WARN  [http-nio-8081-exec-4] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:32:50,959 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:32:50,967 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:32:51,006 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:33:06,972 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:33:07,053 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:33:07,075 WARN  [http-nio-8081-exec-7] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:34:00,364 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:34:00,383 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:34:00,414 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:35:17,859 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:35:17,871 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:35:17,890 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:36:57,708 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:36:57,721 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:36:57,745 WARN  [http-nio-8081-exec-4] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:37:10,387 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:37:10,982 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:37:11,102 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:37:11,115 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:38:03,486 DEBUG [http-nio-8081-exec-7] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:38:03,508 DEBUG [http-nio-8081-exec-10] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:38:03,555 WARN  [http-nio-8081-exec-10] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:38:29,491 DEBUG [http-nio-8081-exec-3] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:38:29,554 DEBUG [http-nio-8081-exec-5] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:38:29,566 WARN  [http-nio-8081-exec-5] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:38:49,248 DEBUG [http-nio-8081-exec-9] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:38:49,301 DEBUG [http-nio-8081-exec-4] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:38:49,335 WARN  [http-nio-8081-exec-4] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:38:59,672 DEBUG [http-nio-8081-exec-1] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:38:59,900 DEBUG [http-nio-8081-exec-8] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:38:59,911 WARN  [http-nio-8081-exec-8] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
2025-11-08 16:40:07,745 DEBUG [http-nio-8081-exec-2] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    order by
        ui1_0."category",
        ui1_0."uploadedAt" desc
2025-11-08 16:40:07,777 DEBUG [http-nio-8081-exec-6] [trace=] [user=] org.hibernate.SQL - 
    select
        ui1_0."id",
        ui1_0."category",
        ui1_0."contentType",
        ui1_0."fileData",
        ui1_0."fileSize",
        ui1_0."filename",
        ui1_0."image_id",
        ui1_0."updatedAt",
        ui1_0."uploadedAt" 
    from
        "uploaded_images" ui1_0 
    where
        ui1_0."category"=? 
        and ui1_0."image_id"=?
2025-11-08 16:40:07,836 WARN  [http-nio-8081-exec-6] [trace=] [user=] c.t.s.controller.ImageController -  Image not found: category=branding, imageId=favicon
